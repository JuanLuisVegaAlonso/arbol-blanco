var Kl=Object.defineProperty;var Yl=(e,t,n)=>t in e?Kl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Pt=(e,t,n)=>(Yl(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function po(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Xl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ql=po(Xl);function xa(e){return!!e||e===""}function Pn(e){if(se(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=$e(r)?tu(r):Pn(r);if(i)for(const o in i)t[o]=i[o]}return t}else{if($e(e))return e;if(Me(e))return e}}const Zl=/;(?![^(]*\))/g,eu=/:(.+)/;function tu(e){const t={};return e.split(Zl).forEach(n=>{if(n){const r=n.split(eu);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ho(e){let t="";if($e(e))t=e;else if(se(e))for(let n=0;n<e.length;n++){const r=ho(e[n]);r&&(t+=r+" ")}else if(Me(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const vt=e=>$e(e)?e:e==null?"":se(e)||Me(e)&&(e.toString===Aa||!le(e.toString))?JSON.stringify(e,Oa,2):String(e),Oa=(e,t)=>t&&t.__v_isRef?Oa(e,t.value):En(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:Ia(t)?{[`Set(${t.size})`]:[...t.values()]}:Me(t)&&!se(t)&&!Da(t)?String(t):t,xe={},Sn=[],yt=()=>{},nu=()=>!1,ru=/^on[^a-z]/,Zr=e=>ru.test(e),mo=e=>e.startsWith("onUpdate:"),tt=Object.assign,go=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},iu=Object.prototype.hasOwnProperty,he=(e,t)=>iu.call(e,t),se=Array.isArray,En=e=>ei(e)==="[object Map]",Ia=e=>ei(e)==="[object Set]",le=e=>typeof e=="function",$e=e=>typeof e=="string",vo=e=>typeof e=="symbol",Me=e=>e!==null&&typeof e=="object",Ma=e=>Me(e)&&le(e.then)&&le(e.catch),Aa=Object.prototype.toString,ei=e=>Aa.call(e),ou=e=>ei(e).slice(8,-1),Da=e=>ei(e)==="[object Object]",yo=e=>$e(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Dr=po(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ti=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},su=/-(\w)/g,kn=ti(e=>e.replace(su,(t,n)=>n?n.toUpperCase():"")),au=/\B([A-Z])/g,Nn=ti(e=>e.replace(au,"-$1").toLowerCase()),Na=ti(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ei=ti(e=>e?`on${Na(e)}`:""),sr=(e,t)=>!Object.is(e,t),Nr=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Gr=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},wi=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ss;const cu=()=>ss||(ss=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let xt;class wa{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&xt&&(this.parent=xt,this.index=(xt.scopes||(xt.scopes=[])).push(this)-1)}run(t){if(this.active){const n=xt;try{return xt=this,t()}finally{xt=n}}}on(){xt=this}off(){xt=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function La(e){return new wa(e)}function lu(e,t=xt){t&&t.active&&t.effects.push(e)}const _o=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ja=e=>(e.w&Zt)>0,Ba=e=>(e.n&Zt)>0,uu=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Zt},fu=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];ja(i)&&!Ba(i)?i.delete(e):t[n++]=i,i.w&=~Zt,i.n&=~Zt}t.length=n}},Li=new WeakMap;let Wn=0,Zt=1;const ji=30;let dt;const hn=Symbol(""),Bi=Symbol("");class bo{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,lu(this,r)}run(){if(!this.active)return this.fn();let t=dt,n=Yt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=dt,dt=this,Yt=!0,Zt=1<<++Wn,Wn<=ji?uu(this):as(this),this.fn()}finally{Wn<=ji&&fu(this),Zt=1<<--Wn,dt=this.parent,Yt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){dt===this?this.deferStop=!0:this.active&&(as(this),this.onStop&&this.onStop(),this.active=!1)}}function as(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Yt=!0;const Fa=[];function wn(){Fa.push(Yt),Yt=!1}function Ln(){const e=Fa.pop();Yt=e===void 0?!0:e}function ct(e,t,n){if(Yt&&dt){let r=Li.get(e);r||Li.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=_o()),$a(i)}}function $a(e,t){let n=!1;Wn<=ji?Ba(e)||(e.n|=Zt,n=!ja(e)):n=!e.has(dt),n&&(e.add(dt),dt.deps.push(e))}function Ut(e,t,n,r,i,o){const s=Li.get(e);if(!s)return;let l=[];if(t==="clear")l=[...s.values()];else if(n==="length"&&se(e))s.forEach((a,c)=>{(c==="length"||c>=r)&&l.push(a)});else switch(n!==void 0&&l.push(s.get(n)),t){case"add":se(e)?yo(n)&&l.push(s.get("length")):(l.push(s.get(hn)),En(e)&&l.push(s.get(Bi)));break;case"delete":se(e)||(l.push(s.get(hn)),En(e)&&l.push(s.get(Bi)));break;case"set":En(e)&&l.push(s.get(hn));break}if(l.length===1)l[0]&&Fi(l[0]);else{const a=[];for(const c of l)c&&a.push(...c);Fi(_o(a))}}function Fi(e,t){const n=se(e)?e:[...e];for(const r of n)r.computed&&cs(r);for(const r of n)r.computed||cs(r)}function cs(e,t){(e!==dt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const pu=po("__proto__,__v_isRef,__isVue"),Ua=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(vo)),du=Co(),hu=Co(!1,!0),mu=Co(!0),ls=gu();function gu(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=ve(this);for(let o=0,s=this.length;o<s;o++)ct(r,"get",o+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(ve)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){wn();const r=ve(this)[t].apply(this,n);return Ln(),r}}),e}function Co(e=!1,t=!1){return function(r,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Au:Wa:t?Va:Ha).get(r))return r;const s=se(r);if(!e&&s&&he(ls,i))return Reflect.get(ls,i,o);const l=Reflect.get(r,i,o);return(vo(i)?Ua.has(i):pu(i))||(e||ct(r,"get",i),t)?l:De(l)?s&&yo(i)?l:l.value:Me(l)?e?qa(l):zt(l):l}}const vu=za(),yu=za(!0);function za(e=!1){return function(n,r,i,o){let s=n[r];if(xn(s)&&De(s)&&!De(i))return!1;if(!e&&(!Hr(i)&&!xn(i)&&(s=ve(s),i=ve(i)),!se(n)&&De(s)&&!De(i)))return s.value=i,!0;const l=se(n)&&yo(r)?Number(r)<n.length:he(n,r),a=Reflect.set(n,r,i,o);return n===ve(o)&&(l?sr(i,s)&&Ut(n,"set",r,i):Ut(n,"add",r,i)),a}}function _u(e,t){const n=he(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Ut(e,"delete",t,void 0),r}function bu(e,t){const n=Reflect.has(e,t);return(!vo(t)||!Ua.has(t))&&ct(e,"has",t),n}function Cu(e){return ct(e,"iterate",se(e)?"length":hn),Reflect.ownKeys(e)}const Ga={get:du,set:vu,deleteProperty:_u,has:bu,ownKeys:Cu},Tu={get:mu,set(e,t){return!0},deleteProperty(e,t){return!0}},Su=tt({},Ga,{get:hu,set:yu}),To=e=>e,ni=e=>Reflect.getPrototypeOf(e);function Rr(e,t,n=!1,r=!1){e=e.__v_raw;const i=ve(e),o=ve(t);n||(t!==o&&ct(i,"get",t),ct(i,"get",o));const{has:s}=ni(i),l=r?To:n?Ro:ar;if(s.call(i,t))return l(e.get(t));if(s.call(i,o))return l(e.get(o));e!==i&&e.get(t)}function Pr(e,t=!1){const n=this.__v_raw,r=ve(n),i=ve(e);return t||(e!==i&&ct(r,"has",e),ct(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function kr(e,t=!1){return e=e.__v_raw,!t&&ct(ve(e),"iterate",hn),Reflect.get(e,"size",e)}function us(e){e=ve(e);const t=ve(this);return ni(t).has.call(t,e)||(t.add(e),Ut(t,"add",e,e)),this}function fs(e,t){t=ve(t);const n=ve(this),{has:r,get:i}=ni(n);let o=r.call(n,e);o||(e=ve(e),o=r.call(n,e));const s=i.call(n,e);return n.set(e,t),o?sr(t,s)&&Ut(n,"set",e,t):Ut(n,"add",e,t),this}function ps(e){const t=ve(this),{has:n,get:r}=ni(t);let i=n.call(t,e);i||(e=ve(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&Ut(t,"delete",e,void 0),o}function ds(){const e=ve(this),t=e.size!==0,n=e.clear();return t&&Ut(e,"clear",void 0,void 0),n}function xr(e,t){return function(r,i){const o=this,s=o.__v_raw,l=ve(s),a=t?To:e?Ro:ar;return!e&&ct(l,"iterate",hn),s.forEach((c,u)=>r.call(i,a(c),a(u),o))}}function Or(e,t,n){return function(...r){const i=this.__v_raw,o=ve(i),s=En(o),l=e==="entries"||e===Symbol.iterator&&s,a=e==="keys"&&s,c=i[e](...r),u=n?To:t?Ro:ar;return!t&&ct(o,"iterate",a?Bi:hn),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:l?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Vt(e){return function(...t){return e==="delete"?!1:this}}function Eu(){const e={get(o){return Rr(this,o)},get size(){return kr(this)},has:Pr,add:us,set:fs,delete:ps,clear:ds,forEach:xr(!1,!1)},t={get(o){return Rr(this,o,!1,!0)},get size(){return kr(this)},has:Pr,add:us,set:fs,delete:ps,clear:ds,forEach:xr(!1,!0)},n={get(o){return Rr(this,o,!0)},get size(){return kr(this,!0)},has(o){return Pr.call(this,o,!0)},add:Vt("add"),set:Vt("set"),delete:Vt("delete"),clear:Vt("clear"),forEach:xr(!0,!1)},r={get(o){return Rr(this,o,!0,!0)},get size(){return kr(this,!0)},has(o){return Pr.call(this,o,!0)},add:Vt("add"),set:Vt("set"),delete:Vt("delete"),clear:Vt("clear"),forEach:xr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Or(o,!1,!1),n[o]=Or(o,!0,!1),t[o]=Or(o,!1,!0),r[o]=Or(o,!0,!0)}),[e,n,t,r]}const[Ru,Pu,ku,xu]=Eu();function So(e,t){const n=t?e?xu:ku:e?Pu:Ru;return(r,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(he(n,i)&&i in r?n:r,i,o)}const Ou={get:So(!1,!1)},Iu={get:So(!1,!0)},Mu={get:So(!0,!1)},Ha=new WeakMap,Va=new WeakMap,Wa=new WeakMap,Au=new WeakMap;function Du(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Nu(e){return e.__v_skip||!Object.isExtensible(e)?0:Du(ou(e))}function zt(e){return xn(e)?e:Eo(e,!1,Ga,Ou,Ha)}function wu(e){return Eo(e,!1,Su,Iu,Va)}function qa(e){return Eo(e,!0,Tu,Mu,Wa)}function Eo(e,t,n,r,i){if(!Me(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const s=Nu(e);if(s===0)return e;const l=new Proxy(e,s===2?r:n);return i.set(e,l),l}function Xt(e){return xn(e)?Xt(e.__v_raw):!!(e&&e.__v_isReactive)}function xn(e){return!!(e&&e.__v_isReadonly)}function Hr(e){return!!(e&&e.__v_isShallow)}function Ja(e){return Xt(e)||xn(e)}function ve(e){const t=e&&e.__v_raw;return t?ve(t):e}function On(e){return Gr(e,"__v_skip",!0),e}const ar=e=>Me(e)?zt(e):e,Ro=e=>Me(e)?qa(e):e;function Ka(e){Yt&&dt&&(e=ve(e),$a(e.dep||(e.dep=_o())))}function Ya(e,t){e=ve(e),e.dep&&Fi(e.dep)}function De(e){return!!(e&&e.__v_isRef===!0)}function Ae(e){return Xa(e,!1)}function Lu(e){return Xa(e,!0)}function Xa(e,t){return De(e)?e:new ju(e,t)}class ju{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:ve(t),this._value=n?t:ar(t)}get value(){return Ka(this),this._value}set value(t){const n=this.__v_isShallow||Hr(t)||xn(t);t=n?t:ve(t),sr(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:ar(t),Ya(this))}}function ae(e){return De(e)?e.value:e}const Bu={get:(e,t,n)=>ae(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return De(i)&&!De(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Qa(e){return Xt(e)?e:new Proxy(e,Bu)}function Fu(e){const t=se(e)?new Array(e.length):{};for(const n in e)t[n]=Uu(e,n);return t}class $u{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Uu(e,t,n){const r=e[t];return De(r)?r:new $u(e,t,n)}var Za;class zu{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[Za]=!1,this._dirty=!0,this.effect=new bo(t,()=>{this._dirty||(this._dirty=!0,Ya(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=ve(this);return Ka(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}Za="__v_isReadonly";function Gu(e,t,n=!1){let r,i;const o=le(e);return o?(r=e,i=yt):(r=e.get,i=e.set),new zu(r,i,o||!i,n)}function Qt(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){ri(o,t,n)}return i}function _t(e,t,n,r){if(le(e)){const o=Qt(e,t,n,r);return o&&Ma(o)&&o.catch(s=>{ri(s,t,n)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(_t(e[o],t,n,r));return i}function ri(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const s=t.proxy,l=n;for(;o;){const c=o.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,s,l)===!1)return}o=o.parent}const a=t.appContext.config.errorHandler;if(a){Qt(a,null,10,[e,s,l]);return}}Hu(e,n,i,r)}function Hu(e,t,n,r=!0){console.error(e)}let Vr=!1,$i=!1;const Ke=[];let It=0;const Rn=[];let Lt=null,fn=0;const ec=Promise.resolve();let Po=null;function ko(e){const t=Po||ec;return e?t.then(this?e.bind(this):e):t}function Vu(e){let t=It+1,n=Ke.length;for(;t<n;){const r=t+n>>>1;cr(Ke[r])<e?t=r+1:n=r}return t}function xo(e){(!Ke.length||!Ke.includes(e,Vr&&e.allowRecurse?It+1:It))&&(e.id==null?Ke.push(e):Ke.splice(Vu(e.id),0,e),tc())}function tc(){!Vr&&!$i&&($i=!0,Po=ec.then(rc))}function Wu(e){const t=Ke.indexOf(e);t>It&&Ke.splice(t,1)}function qu(e){se(e)?Rn.push(...e):(!Lt||!Lt.includes(e,e.allowRecurse?fn+1:fn))&&Rn.push(e),tc()}function hs(e,t=It){for(;t<Ke.length;t++){const n=Ke[t];n&&n.pre&&(Ke.splice(t,1),t--,n())}}function nc(e){if(Rn.length){const t=[...new Set(Rn)];if(Rn.length=0,Lt){Lt.push(...t);return}for(Lt=t,Lt.sort((n,r)=>cr(n)-cr(r)),fn=0;fn<Lt.length;fn++)Lt[fn]();Lt=null,fn=0}}const cr=e=>e.id==null?1/0:e.id,Ju=(e,t)=>{const n=cr(e)-cr(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function rc(e){$i=!1,Vr=!0,Ke.sort(Ju);const t=yt;try{for(It=0;It<Ke.length;It++){const n=Ke[It];n&&n.active!==!1&&Qt(n,null,14)}}finally{It=0,Ke.length=0,nc(),Vr=!1,Po=null,(Ke.length||Rn.length)&&rc()}}function Ku(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||xe;let i=n;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in r){const u=`${s==="modelValue"?"model":s}Modifiers`,{number:f,trim:p}=r[u]||xe;p&&(i=n.map(g=>g.trim())),f&&(i=n.map(wi))}let l,a=r[l=Ei(t)]||r[l=Ei(kn(t))];!a&&o&&(a=r[l=Ei(Nn(t))]),a&&_t(a,e,6,i);const c=r[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,_t(c,e,6,i)}}function ic(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const o=e.emits;let s={},l=!1;if(!le(e)){const a=c=>{const u=ic(c,t,!0);u&&(l=!0,tt(s,u))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!o&&!l?(Me(e)&&r.set(e,null),null):(se(o)?o.forEach(a=>s[a]=null):tt(s,o),Me(e)&&r.set(e,s),s)}function ii(e,t){return!e||!Zr(t)?!1:(t=t.slice(2).replace(/Once$/,""),he(e,t[0].toLowerCase()+t.slice(1))||he(e,Nn(t))||he(e,t))}let mt=null,oi=null;function Wr(e){const t=mt;return mt=e,oi=e&&e.type.__scopeId||null,t}function si(e){oi=e}function ai(){oi=null}function Yu(e,t=mt,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Ss(-1);const o=Wr(t),s=e(...i);return Wr(o),r._d&&Ss(1),s};return r._n=!0,r._c=!0,r._d=!0,r}function Ri(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:l,attrs:a,emit:c,render:u,renderCache:f,data:p,setupState:g,ctx:y,inheritAttrs:S}=e;let A,E;const k=Wr(e);try{if(n.shapeFlag&4){const B=i||r;A=Ot(u.call(B,B,f,o,g,p,y)),E=a}else{const B=t;A=Ot(B.length>1?B(o,{attrs:a,slots:l,emit:c}):B(o,null)),E=t.props?a:Xu(a)}}catch(B){Yn.length=0,ri(B,e,1),A=Ie(gn)}let Y=A;if(E&&S!==!1){const B=Object.keys(E),{shapeFlag:H}=Y;B.length&&H&7&&(s&&B.some(mo)&&(E=Qu(E,s)),Y=In(Y,E))}return n.dirs&&(Y=In(Y),Y.dirs=Y.dirs?Y.dirs.concat(n.dirs):n.dirs),n.transition&&(Y.transition=n.transition),A=Y,Wr(k),A}const Xu=e=>{let t;for(const n in e)(n==="class"||n==="style"||Zr(n))&&((t||(t={}))[n]=e[n]);return t},Qu=(e,t)=>{const n={};for(const r in e)(!mo(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Zu(e,t,n){const{props:r,children:i,component:o}=e,{props:s,children:l,patchFlag:a}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?ms(r,s,c):!!s;if(a&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(s[p]!==r[p]&&!ii(c,p))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:r===s?!1:r?s?ms(r,s,c):!0:!!s;return!1}function ms(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!ii(n,o))return!0}return!1}function ef({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const tf=e=>e.__isSuspense;function nf(e,t){t&&t.pendingBranch?se(e)?t.effects.push(...e):t.effects.push(e):qu(e)}function wr(e,t){if(Ge){let n=Ge.provides;const r=Ge.parent&&Ge.parent.provides;r===n&&(n=Ge.provides=Object.create(r)),n[e]=t}}function bt(e,t,n=!1){const r=Ge||mt;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&le(t)?t.call(r.proxy):t}}function Ui(e,t){return Oo(e,null,t)}const gs={};function Ct(e,t,n){return Oo(e,t,n)}function Oo(e,t,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=xe){const l=Ge;let a,c=!1,u=!1;if(De(e)?(a=()=>e.value,c=Hr(e)):Xt(e)?(a=()=>e,r=!0):se(e)?(u=!0,c=e.some(E=>Xt(E)||Hr(E)),a=()=>e.map(E=>{if(De(E))return E.value;if(Xt(E))return dn(E);if(le(E))return Qt(E,l,2)})):le(e)?t?a=()=>Qt(e,l,2):a=()=>{if(!(l&&l.isUnmounted))return f&&f(),_t(e,l,3,[p])}:a=yt,t&&r){const E=a;a=()=>dn(E())}let f,p=E=>{f=A.onStop=()=>{Qt(E,l,4)}};if(ur)return p=yt,t?n&&_t(t,l,3,[a(),u?[]:void 0,p]):a(),yt;let g=u?[]:gs;const y=()=>{if(!!A.active)if(t){const E=A.run();(r||c||(u?E.some((k,Y)=>sr(k,g[Y])):sr(E,g)))&&(f&&f(),_t(t,l,3,[E,g===gs?void 0:g,p]),g=E)}else A.run()};y.allowRecurse=!!t;let S;i==="sync"?S=y:i==="post"?S=()=>rt(y,l&&l.suspense):(y.pre=!0,l&&(y.id=l.uid),S=()=>xo(y));const A=new bo(a,S);return t?n?y():g=A.run():i==="post"?rt(A.run.bind(A),l&&l.suspense):A.run(),()=>{A.stop(),l&&l.scope&&go(l.scope.effects,A)}}function rf(e,t,n){const r=this.proxy,i=$e(e)?e.includes(".")?oc(r,e):()=>r[e]:e.bind(r,r);let o;le(t)?o=t:(o=t.handler,n=t);const s=Ge;Mn(this);const l=Oo(i,o.bind(r),n);return s?Mn(s):mn(),l}function oc(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function dn(e,t){if(!Me(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),De(e))dn(e.value,t);else if(se(e))for(let n=0;n<e.length;n++)dn(e[n],t);else if(Ia(e)||En(e))e.forEach(n=>{dn(n,t)});else if(Da(e))for(const n in e)dn(e[n],t);return e}function He(e){return le(e)?{setup:e,name:e.name}:e}const Lr=e=>!!e.type.__asyncLoader,sc=e=>e.type.__isKeepAlive;function of(e,t){ac(e,"a",t)}function sf(e,t){ac(e,"da",t)}function ac(e,t,n=Ge){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(ci(t,r,n),n){let i=n.parent;for(;i&&i.parent;)sc(i.parent.vnode)&&af(r,t,n,i),i=i.parent}}function af(e,t,n,r){const i=ci(t,e,r,!0);Io(()=>{go(r[t],i)},n)}function ci(e,t,n=Ge,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;wn(),Mn(n);const l=_t(t,n,e,s);return mn(),Ln(),l});return r?i.unshift(o):i.push(o),o}}const Gt=e=>(t,n=Ge)=>(!ur||e==="sp")&&ci(e,t,n),cf=Gt("bm"),lf=Gt("m"),uf=Gt("bu"),ff=Gt("u"),pf=Gt("bum"),Io=Gt("um"),df=Gt("sp"),hf=Gt("rtg"),mf=Gt("rtc");function gf(e,t=Ge){ci("ec",e,t)}function Pi(e,t){const n=mt;if(n===null)return e;const r=ui(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[s,l,a,c=xe]=t[o];le(s)&&(s={mounted:s,updated:s}),s.deep&&dn(l),i.push({dir:s,instance:r,value:l,oldValue:void 0,arg:a,modifiers:c})}return e}function sn(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let s=0;s<i.length;s++){const l=i[s];o&&(l.oldValue=o[s].value);let a=l.dir[r];a&&(wn(),_t(a,n,8,[e.el,l,e,t]),Ln())}}const vf=Symbol();function qr(e,t,n,r){let i;const o=n&&n[r];if(se(e)||$e(e)){i=new Array(e.length);for(let s=0,l=e.length;s<l;s++)i[s]=t(e[s],s,void 0,o&&o[s])}else if(typeof e=="number"){i=new Array(e);for(let s=0;s<e;s++)i[s]=t(s+1,s,void 0,o&&o[s])}else if(Me(e))if(e[Symbol.iterator])i=Array.from(e,(s,l)=>t(s,l,void 0,o&&o[l]));else{const s=Object.keys(e);i=new Array(s.length);for(let l=0,a=s.length;l<a;l++){const c=s[l];i[l]=t(e[c],c,l,o&&o[l])}}else i=[];return n&&(n[r]=i),i}const zi=e=>e?Cc(e)?ui(e)||e.proxy:zi(e.parent):null,Jr=tt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>zi(e.parent),$root:e=>zi(e.root),$emit:e=>e.emit,$options:e=>lc(e),$forceUpdate:e=>e.f||(e.f=()=>xo(e.update)),$nextTick:e=>e.n||(e.n=ko.bind(e.proxy)),$watch:e=>rf.bind(e)}),yf={get({_:e},t){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:l,appContext:a}=e;let c;if(t[0]!=="$"){const g=s[t];if(g!==void 0)switch(g){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(r!==xe&&he(r,t))return s[t]=1,r[t];if(i!==xe&&he(i,t))return s[t]=2,i[t];if((c=e.propsOptions[0])&&he(c,t))return s[t]=3,o[t];if(n!==xe&&he(n,t))return s[t]=4,n[t];Gi&&(s[t]=0)}}const u=Jr[t];let f,p;if(u)return t==="$attrs"&&ct(e,"get",t),u(e);if((f=l.__cssModules)&&(f=f[t]))return f;if(n!==xe&&he(n,t))return s[t]=4,n[t];if(p=a.config.globalProperties,he(p,t))return p[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return i!==xe&&he(i,t)?(i[t]=n,!0):r!==xe&&he(r,t)?(r[t]=n,!0):he(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let l;return!!n[s]||e!==xe&&he(e,s)||t!==xe&&he(t,s)||(l=o[0])&&he(l,s)||he(r,s)||he(Jr,s)||he(i.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:he(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Gi=!0;function _f(e){const t=lc(e),n=e.proxy,r=e.ctx;Gi=!1,t.beforeCreate&&vs(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:s,watch:l,provide:a,inject:c,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:y,activated:S,deactivated:A,beforeDestroy:E,beforeUnmount:k,destroyed:Y,unmounted:B,render:H,renderTracked:W,renderTriggered:Q,errorCaptured:te,serverPrefetch:ge,expose:J,inheritAttrs:Ee,components:Oe,directives:Be,filters:be}=t;if(c&&bf(c,r,null,e.appContext.config.unwrapInjectedRef),s)for(const fe in s){const ce=s[fe];le(ce)&&(r[fe]=ce.bind(n))}if(i){const fe=i.call(n,n);Me(fe)&&(e.data=zt(fe))}if(Gi=!0,o)for(const fe in o){const ce=o[fe],Ne=le(ce)?ce.bind(n,n):le(ce.get)?ce.get.bind(n,n):yt,Xe=!le(ce)&&le(ce.set)?ce.set.bind(n):yt,je=st({get:Ne,set:Xe});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>je.value,set:ke=>je.value=ke})}if(l)for(const fe in l)cc(l[fe],r,n,fe);if(a){const fe=le(a)?a.call(n):a;Reflect.ownKeys(fe).forEach(ce=>{wr(ce,fe[ce])})}u&&vs(u,e,"c");function Pe(fe,ce){se(ce)?ce.forEach(Ne=>fe(Ne.bind(n))):ce&&fe(ce.bind(n))}if(Pe(cf,f),Pe(lf,p),Pe(uf,g),Pe(ff,y),Pe(of,S),Pe(sf,A),Pe(gf,te),Pe(mf,W),Pe(hf,Q),Pe(pf,k),Pe(Io,B),Pe(df,ge),se(J))if(J.length){const fe=e.exposed||(e.exposed={});J.forEach(ce=>{Object.defineProperty(fe,ce,{get:()=>n[ce],set:Ne=>n[ce]=Ne})})}else e.exposed||(e.exposed={});H&&e.render===yt&&(e.render=H),Ee!=null&&(e.inheritAttrs=Ee),Oe&&(e.components=Oe),Be&&(e.directives=Be)}function bf(e,t,n=yt,r=!1){se(e)&&(e=Hi(e));for(const i in e){const o=e[i];let s;Me(o)?"default"in o?s=bt(o.from||i,o.default,!0):s=bt(o.from||i):s=bt(o),De(s)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:l=>s.value=l}):t[i]=s}}function vs(e,t,n){_t(se(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function cc(e,t,n,r){const i=r.includes(".")?oc(n,r):()=>n[r];if($e(e)){const o=t[e];le(o)&&Ct(i,o)}else if(le(e))Ct(i,e.bind(n));else if(Me(e))if(se(e))e.forEach(o=>cc(o,t,n,r));else{const o=le(e.handler)?e.handler.bind(n):t[e.handler];le(o)&&Ct(i,o,e)}}function lc(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,l=o.get(t);let a;return l?a=l:!i.length&&!n&&!r?a=t:(a={},i.length&&i.forEach(c=>Kr(a,c,s,!0)),Kr(a,t,s)),Me(t)&&o.set(t,a),a}function Kr(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&Kr(e,o,n,!0),i&&i.forEach(s=>Kr(e,s,n,!0));for(const s in t)if(!(r&&s==="expose")){const l=Cf[s]||n&&n[s];e[s]=l?l(e[s],t[s]):t[s]}return e}const Cf={data:ys,props:un,emits:un,methods:un,computed:un,beforeCreate:et,created:et,beforeMount:et,mounted:et,beforeUpdate:et,updated:et,beforeDestroy:et,beforeUnmount:et,destroyed:et,unmounted:et,activated:et,deactivated:et,errorCaptured:et,serverPrefetch:et,components:un,directives:un,watch:Sf,provide:ys,inject:Tf};function ys(e,t){return t?e?function(){return tt(le(e)?e.call(this,this):e,le(t)?t.call(this,this):t)}:t:e}function Tf(e,t){return un(Hi(e),Hi(t))}function Hi(e){if(se(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function et(e,t){return e?[...new Set([].concat(e,t))]:t}function un(e,t){return e?tt(tt(Object.create(null),e),t):t}function Sf(e,t){if(!e)return t;if(!t)return e;const n=tt(Object.create(null),e);for(const r in t)n[r]=et(e[r],t[r]);return n}function Ef(e,t,n,r=!1){const i={},o={};Gr(o,li,1),e.propsDefaults=Object.create(null),uc(e,t,i,o);for(const s in e.propsOptions[0])s in i||(i[s]=void 0);n?e.props=r?i:wu(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Rf(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=e,l=ve(i),[a]=e.propsOptions;let c=!1;if((r||s>0)&&!(s&16)){if(s&8){const u=e.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(ii(e.emitsOptions,p))continue;const g=t[p];if(a)if(he(o,p))g!==o[p]&&(o[p]=g,c=!0);else{const y=kn(p);i[y]=Vi(a,l,y,g,e,!1)}else g!==o[p]&&(o[p]=g,c=!0)}}}else{uc(e,t,i,o)&&(c=!0);let u;for(const f in l)(!t||!he(t,f)&&((u=Nn(f))===f||!he(t,u)))&&(a?n&&(n[f]!==void 0||n[u]!==void 0)&&(i[f]=Vi(a,l,f,void 0,e,!0)):delete i[f]);if(o!==l)for(const f in o)(!t||!he(t,f)&&!0)&&(delete o[f],c=!0)}c&&Ut(e,"set","$attrs")}function uc(e,t,n,r){const[i,o]=e.propsOptions;let s=!1,l;if(t)for(let a in t){if(Dr(a))continue;const c=t[a];let u;i&&he(i,u=kn(a))?!o||!o.includes(u)?n[u]=c:(l||(l={}))[u]=c:ii(e.emitsOptions,a)||(!(a in r)||c!==r[a])&&(r[a]=c,s=!0)}if(o){const a=ve(n),c=l||xe;for(let u=0;u<o.length;u++){const f=o[u];n[f]=Vi(i,a,f,c[f],e,!he(c,f))}}return s}function Vi(e,t,n,r,i,o){const s=e[n];if(s!=null){const l=he(s,"default");if(l&&r===void 0){const a=s.default;if(s.type!==Function&&le(a)){const{propsDefaults:c}=i;n in c?r=c[n]:(Mn(i),r=c[n]=a.call(null,t),mn())}else r=a}s[0]&&(o&&!l?r=!1:s[1]&&(r===""||r===Nn(n))&&(r=!0))}return r}function fc(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,s={},l=[];let a=!1;if(!le(e)){const u=f=>{a=!0;const[p,g]=fc(f,t,!0);tt(s,p),g&&l.push(...g)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!a)return Me(e)&&r.set(e,Sn),Sn;if(se(o))for(let u=0;u<o.length;u++){const f=kn(o[u]);_s(f)&&(s[f]=xe)}else if(o)for(const u in o){const f=kn(u);if(_s(f)){const p=o[u],g=s[f]=se(p)||le(p)?{type:p}:p;if(g){const y=Ts(Boolean,g.type),S=Ts(String,g.type);g[0]=y>-1,g[1]=S<0||y<S,(y>-1||he(g,"default"))&&l.push(f)}}}const c=[s,l];return Me(e)&&r.set(e,c),c}function _s(e){return e[0]!=="$"}function bs(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Cs(e,t){return bs(e)===bs(t)}function Ts(e,t){return se(t)?t.findIndex(n=>Cs(n,e)):le(t)&&Cs(t,e)?0:-1}const pc=e=>e[0]==="_"||e==="$stable",Mo=e=>se(e)?e.map(Ot):[Ot(e)],Pf=(e,t,n)=>{if(t._n)return t;const r=Yu((...i)=>Mo(t(...i)),n);return r._c=!1,r},dc=(e,t,n)=>{const r=e._ctx;for(const i in e){if(pc(i))continue;const o=e[i];if(le(o))t[i]=Pf(i,o,r);else if(o!=null){const s=Mo(o);t[i]=()=>s}}},hc=(e,t)=>{const n=Mo(t);e.slots.default=()=>n},kf=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=ve(t),Gr(t,"_",n)):dc(t,e.slots={})}else e.slots={},t&&hc(e,t);Gr(e.slots,li,1)},xf=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,s=xe;if(r.shapeFlag&32){const l=t._;l?n&&l===1?o=!1:(tt(i,t),!n&&l===1&&delete i._):(o=!t.$stable,dc(t,i)),s=t}else t&&(hc(e,t),s={default:1});if(o)for(const l in i)!pc(l)&&!(l in s)&&delete i[l]};function mc(){return{app:null,config:{isNativeTag:nu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Of=0;function If(e,t){return function(r,i=null){le(r)||(r=Object.assign({},r)),i!=null&&!Me(i)&&(i=null);const o=mc(),s=new Set;let l=!1;const a=o.app={_uid:Of++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:qf,get config(){return o.config},set config(c){},use(c,...u){return s.has(c)||(c&&le(c.install)?(s.add(c),c.install(a,...u)):le(c)&&(s.add(c),c(a,...u))),a},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),a},component(c,u){return u?(o.components[c]=u,a):o.components[c]},directive(c,u){return u?(o.directives[c]=u,a):o.directives[c]},mount(c,u,f){if(!l){const p=Ie(r,i);return p.appContext=o,u&&t?t(p,c):e(p,c,f),l=!0,a._container=c,c.__vue_app__=a,ui(p.component)||p.component.proxy}},unmount(){l&&(e(null,a._container),delete a._container.__vue_app__)},provide(c,u){return o.provides[c]=u,a}};return a}}function Wi(e,t,n,r,i=!1){if(se(e)){e.forEach((p,g)=>Wi(p,t&&(se(t)?t[g]:t),n,r,i));return}if(Lr(r)&&!i)return;const o=r.shapeFlag&4?ui(r.component)||r.component.proxy:r.el,s=i?null:o,{i:l,r:a}=e,c=t&&t.r,u=l.refs===xe?l.refs={}:l.refs,f=l.setupState;if(c!=null&&c!==a&&($e(c)?(u[c]=null,he(f,c)&&(f[c]=null)):De(c)&&(c.value=null)),le(a))Qt(a,l,12,[s,u]);else{const p=$e(a),g=De(a);if(p||g){const y=()=>{if(e.f){const S=p?u[a]:a.value;i?se(S)&&go(S,o):se(S)?S.includes(o)||S.push(o):p?(u[a]=[o],he(f,a)&&(f[a]=u[a])):(a.value=[o],e.k&&(u[e.k]=a.value))}else p?(u[a]=s,he(f,a)&&(f[a]=s)):g&&(a.value=s,e.k&&(u[e.k]=s))};s?(y.id=-1,rt(y,n)):y()}}}const rt=nf;function Mf(e){return Af(e)}function Af(e,t){const n=cu();n.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:l,createComment:a,setText:c,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=yt,cloneNode:y,insertStaticContent:S}=e,A=(m,_,C,R=null,P=null,w=null,U=!1,D=null,M=!!_.dynamicChildren)=>{if(m===_)return;m&&!zn(m,_)&&(R=$(m),N(m,P,w,!0),m=null),_.patchFlag===-2&&(M=!1,_.dynamicChildren=null);const{type:O,ref:X,shapeFlag:z}=_;switch(O){case Ao:E(m,_,C,R);break;case gn:k(m,_,C,R);break;case ki:m==null&&Y(_,C,R,U);break;case Le:Be(m,_,C,R,P,w,U,D,M);break;default:z&1?W(m,_,C,R,P,w,U,D,M):z&6?be(m,_,C,R,P,w,U,D,M):(z&64||z&128)&&O.process(m,_,C,R,P,w,U,D,M,Z)}X!=null&&P&&Wi(X,m&&m.ref,w,_||m,!_)},E=(m,_,C,R)=>{if(m==null)r(_.el=l(_.children),C,R);else{const P=_.el=m.el;_.children!==m.children&&c(P,_.children)}},k=(m,_,C,R)=>{m==null?r(_.el=a(_.children||""),C,R):_.el=m.el},Y=(m,_,C,R)=>{[m.el,m.anchor]=S(m.children,_,C,R,m.el,m.anchor)},B=({el:m,anchor:_},C,R)=>{let P;for(;m&&m!==_;)P=p(m),r(m,C,R),m=P;r(_,C,R)},H=({el:m,anchor:_})=>{let C;for(;m&&m!==_;)C=p(m),i(m),m=C;i(_)},W=(m,_,C,R,P,w,U,D,M)=>{U=U||_.type==="svg",m==null?Q(_,C,R,P,w,U,D,M):J(m,_,P,w,U,D,M)},Q=(m,_,C,R,P,w,U,D)=>{let M,O;const{type:X,props:z,shapeFlag:K,transition:re,patchFlag:ue,dirs:de}=m;if(m.el&&y!==void 0&&ue===-1)M=m.el=y(m.el);else{if(M=m.el=s(m.type,w,z&&z.is,z),K&8?u(M,m.children):K&16&&ge(m.children,M,null,R,P,w&&X!=="foreignObject",U,D),de&&sn(m,null,R,"created"),z){for(const Se in z)Se!=="value"&&!Dr(Se)&&o(M,Se,null,z[Se],w,m.children,R,P,x);"value"in z&&o(M,"value",null,z.value),(O=z.onVnodeBeforeMount)&&kt(O,R,m)}te(M,m,m.scopeId,U,R)}de&&sn(m,null,R,"beforeMount");const ye=(!P||P&&!P.pendingBranch)&&re&&!re.persisted;ye&&re.beforeEnter(M),r(M,_,C),((O=z&&z.onVnodeMounted)||ye||de)&&rt(()=>{O&&kt(O,R,m),ye&&re.enter(M),de&&sn(m,null,R,"mounted")},P)},te=(m,_,C,R,P)=>{if(C&&g(m,C),R)for(let w=0;w<R.length;w++)g(m,R[w]);if(P){let w=P.subTree;if(_===w){const U=P.vnode;te(m,U,U.scopeId,U.slotScopeIds,P.parent)}}},ge=(m,_,C,R,P,w,U,D,M=0)=>{for(let O=M;O<m.length;O++){const X=m[O]=D?qt(m[O]):Ot(m[O]);A(null,X,_,C,R,P,w,U,D)}},J=(m,_,C,R,P,w,U)=>{const D=_.el=m.el;let{patchFlag:M,dynamicChildren:O,dirs:X}=_;M|=m.patchFlag&16;const z=m.props||xe,K=_.props||xe;let re;C&&an(C,!1),(re=K.onVnodeBeforeUpdate)&&kt(re,C,_,m),X&&sn(_,m,C,"beforeUpdate"),C&&an(C,!0);const ue=P&&_.type!=="foreignObject";if(O?Ee(m.dynamicChildren,O,D,C,R,ue,w):U||Ne(m,_,D,null,C,R,ue,w,!1),M>0){if(M&16)Oe(D,_,z,K,C,R,P);else if(M&2&&z.class!==K.class&&o(D,"class",null,K.class,P),M&4&&o(D,"style",z.style,K.style,P),M&8){const de=_.dynamicProps;for(let ye=0;ye<de.length;ye++){const Se=de[ye],qe=z[Se],St=K[Se];(St!==qe||Se==="value")&&o(D,Se,qe,St,P,m.children,C,R,x)}}M&1&&m.children!==_.children&&u(D,_.children)}else!U&&O==null&&Oe(D,_,z,K,C,R,P);((re=K.onVnodeUpdated)||X)&&rt(()=>{re&&kt(re,C,_,m),X&&sn(_,m,C,"updated")},R)},Ee=(m,_,C,R,P,w,U)=>{for(let D=0;D<_.length;D++){const M=m[D],O=_[D],X=M.el&&(M.type===Le||!zn(M,O)||M.shapeFlag&70)?f(M.el):C;A(M,O,X,null,R,P,w,U,!0)}},Oe=(m,_,C,R,P,w,U)=>{if(C!==R){for(const D in R){if(Dr(D))continue;const M=R[D],O=C[D];M!==O&&D!=="value"&&o(m,D,O,M,U,_.children,P,w,x)}if(C!==xe)for(const D in C)!Dr(D)&&!(D in R)&&o(m,D,C[D],null,U,_.children,P,w,x);"value"in R&&o(m,"value",C.value,R.value)}},Be=(m,_,C,R,P,w,U,D,M)=>{const O=_.el=m?m.el:l(""),X=_.anchor=m?m.anchor:l("");let{patchFlag:z,dynamicChildren:K,slotScopeIds:re}=_;re&&(D=D?D.concat(re):re),m==null?(r(O,C,R),r(X,C,R),ge(_.children,C,X,P,w,U,D,M)):z>0&&z&64&&K&&m.dynamicChildren?(Ee(m.dynamicChildren,K,C,P,w,U,D),(_.key!=null||P&&_===P.subTree)&&gc(m,_,!0)):Ne(m,_,C,X,P,w,U,D,M)},be=(m,_,C,R,P,w,U,D,M)=>{_.slotScopeIds=D,m==null?_.shapeFlag&512?P.ctx.activate(_,C,R,U,M):Re(_,C,R,P,w,U,M):Pe(m,_,M)},Re=(m,_,C,R,P,w,U)=>{const D=m.component=Uf(m,R,P);if(sc(m)&&(D.ctx.renderer=Z),zf(D),D.asyncDep){if(P&&P.registerDep(D,fe),!m.el){const M=D.subTree=Ie(gn);k(null,M,_,C)}return}fe(D,m,_,C,P,w,U)},Pe=(m,_,C)=>{const R=_.component=m.component;if(Zu(m,_,C))if(R.asyncDep&&!R.asyncResolved){ce(R,_,C);return}else R.next=_,Wu(R.update),R.update();else _.el=m.el,R.vnode=_},fe=(m,_,C,R,P,w,U)=>{const D=()=>{if(m.isMounted){let{next:X,bu:z,u:K,parent:re,vnode:ue}=m,de=X,ye;an(m,!1),X?(X.el=ue.el,ce(m,X,U)):X=ue,z&&Nr(z),(ye=X.props&&X.props.onVnodeBeforeUpdate)&&kt(ye,re,X,ue),an(m,!0);const Se=Ri(m),qe=m.subTree;m.subTree=Se,A(qe,Se,f(qe.el),$(qe),m,P,w),X.el=Se.el,de===null&&ef(m,Se.el),K&&rt(K,P),(ye=X.props&&X.props.onVnodeUpdated)&&rt(()=>kt(ye,re,X,ue),P)}else{let X;const{el:z,props:K}=_,{bm:re,m:ue,parent:de}=m,ye=Lr(_);if(an(m,!1),re&&Nr(re),!ye&&(X=K&&K.onVnodeBeforeMount)&&kt(X,de,_),an(m,!0),z&&ee){const Se=()=>{m.subTree=Ri(m),ee(z,m.subTree,m,P,null)};ye?_.type.__asyncLoader().then(()=>!m.isUnmounted&&Se()):Se()}else{const Se=m.subTree=Ri(m);A(null,Se,C,R,m,P,w),_.el=Se.el}if(ue&&rt(ue,P),!ye&&(X=K&&K.onVnodeMounted)){const Se=_;rt(()=>kt(X,de,Se),P)}(_.shapeFlag&256||de&&Lr(de.vnode)&&de.vnode.shapeFlag&256)&&m.a&&rt(m.a,P),m.isMounted=!0,_=C=R=null}},M=m.effect=new bo(D,()=>xo(O),m.scope),O=m.update=()=>M.run();O.id=m.uid,an(m,!0),O()},ce=(m,_,C)=>{_.component=m;const R=m.vnode.props;m.vnode=_,m.next=null,Rf(m,_.props,R,C),xf(m,_.children,C),wn(),hs(),Ln()},Ne=(m,_,C,R,P,w,U,D,M=!1)=>{const O=m&&m.children,X=m?m.shapeFlag:0,z=_.children,{patchFlag:K,shapeFlag:re}=_;if(K>0){if(K&128){je(O,z,C,R,P,w,U,D,M);return}else if(K&256){Xe(O,z,C,R,P,w,U,D,M);return}}re&8?(X&16&&x(O,P,w),z!==O&&u(C,z)):X&16?re&16?je(O,z,C,R,P,w,U,D,M):x(O,P,w,!0):(X&8&&u(C,""),re&16&&ge(z,C,R,P,w,U,D,M))},Xe=(m,_,C,R,P,w,U,D,M)=>{m=m||Sn,_=_||Sn;const O=m.length,X=_.length,z=Math.min(O,X);let K;for(K=0;K<z;K++){const re=_[K]=M?qt(_[K]):Ot(_[K]);A(m[K],re,C,null,P,w,U,D,M)}O>X?x(m,P,w,!0,!1,z):ge(_,C,R,P,w,U,D,M,z)},je=(m,_,C,R,P,w,U,D,M)=>{let O=0;const X=_.length;let z=m.length-1,K=X-1;for(;O<=z&&O<=K;){const re=m[O],ue=_[O]=M?qt(_[O]):Ot(_[O]);if(zn(re,ue))A(re,ue,C,null,P,w,U,D,M);else break;O++}for(;O<=z&&O<=K;){const re=m[z],ue=_[K]=M?qt(_[K]):Ot(_[K]);if(zn(re,ue))A(re,ue,C,null,P,w,U,D,M);else break;z--,K--}if(O>z){if(O<=K){const re=K+1,ue=re<X?_[re].el:R;for(;O<=K;)A(null,_[O]=M?qt(_[O]):Ot(_[O]),C,ue,P,w,U,D,M),O++}}else if(O>K)for(;O<=z;)N(m[O],P,w,!0),O++;else{const re=O,ue=O,de=new Map;for(O=ue;O<=K;O++){const Qe=_[O]=M?qt(_[O]):Ot(_[O]);Qe.key!=null&&de.set(Qe.key,O)}let ye,Se=0;const qe=K-ue+1;let St=!1,vr=0;const nn=new Array(qe);for(O=0;O<qe;O++)nn[O]=0;for(O=re;O<=z;O++){const Qe=m[O];if(Se>=qe){N(Qe,P,w,!0);continue}let ut;if(Qe.key!=null)ut=de.get(Qe.key);else for(ye=ue;ye<=K;ye++)if(nn[ye-ue]===0&&zn(Qe,_[ye])){ut=ye;break}ut===void 0?N(Qe,P,w,!0):(nn[ut-ue]=O+1,ut>=vr?vr=ut:St=!0,A(Qe,_[ut],C,null,P,w,U,D,M),Se++)}const yr=St?Df(nn):Sn;for(ye=yr.length-1,O=qe-1;O>=0;O--){const Qe=ue+O,ut=_[Qe],rn=Qe+1<X?_[Qe+1].el:R;nn[O]===0?A(null,ut,C,rn,P,w,U,D,M):St&&(ye<0||O!==yr[ye]?ke(ut,C,rn,2):ye--)}}},ke=(m,_,C,R,P=null)=>{const{el:w,type:U,transition:D,children:M,shapeFlag:O}=m;if(O&6){ke(m.component.subTree,_,C,R);return}if(O&128){m.suspense.move(_,C,R);return}if(O&64){U.move(m,_,C,Z);return}if(U===Le){r(w,_,C);for(let z=0;z<M.length;z++)ke(M[z],_,C,R);r(m.anchor,_,C);return}if(U===ki){B(m,_,C);return}if(R!==2&&O&1&&D)if(R===0)D.beforeEnter(w),r(w,_,C),rt(()=>D.enter(w),P);else{const{leave:z,delayLeave:K,afterLeave:re}=D,ue=()=>r(w,_,C),de=()=>{z(w,()=>{ue(),re&&re()})};K?K(w,ue,de):de()}else r(w,_,C)},N=(m,_,C,R=!1,P=!1)=>{const{type:w,props:U,ref:D,children:M,dynamicChildren:O,shapeFlag:X,patchFlag:z,dirs:K}=m;if(D!=null&&Wi(D,null,C,m,!0),X&256){_.ctx.deactivate(m);return}const re=X&1&&K,ue=!Lr(m);let de;if(ue&&(de=U&&U.onVnodeBeforeUnmount)&&kt(de,_,m),X&6)j(m.component,C,R);else{if(X&128){m.suspense.unmount(C,R);return}re&&sn(m,null,_,"beforeUnmount"),X&64?m.type.remove(m,_,C,P,Z,R):O&&(w!==Le||z>0&&z&64)?x(O,_,C,!1,!0):(w===Le&&z&384||!P&&X&16)&&x(M,_,C),R&&L(m)}(ue&&(de=U&&U.onVnodeUnmounted)||re)&&rt(()=>{de&&kt(de,_,m),re&&sn(m,null,_,"unmounted")},C)},L=m=>{const{type:_,el:C,anchor:R,transition:P}=m;if(_===Le){T(C,R);return}if(_===ki){H(m);return}const w=()=>{i(C),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(m.shapeFlag&1&&P&&!P.persisted){const{leave:U,delayLeave:D}=P,M=()=>U(C,w);D?D(m.el,w,M):M()}else w()},T=(m,_)=>{let C;for(;m!==_;)C=p(m),i(m),m=C;i(_)},j=(m,_,C)=>{const{bum:R,scope:P,update:w,subTree:U,um:D}=m;R&&Nr(R),P.stop(),w&&(w.active=!1,N(U,m,_,C)),D&&rt(D,_),rt(()=>{m.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},x=(m,_,C,R=!1,P=!1,w=0)=>{for(let U=w;U<m.length;U++)N(m[U],_,C,R,P)},$=m=>m.shapeFlag&6?$(m.component.subTree):m.shapeFlag&128?m.suspense.next():p(m.anchor||m.el),F=(m,_,C)=>{m==null?_._vnode&&N(_._vnode,null,null,!0):A(_._vnode||null,m,_,null,null,null,C),hs(),nc(),_._vnode=m},Z={p:A,um:N,m:ke,r:L,mt:Re,mc:ge,pc:Ne,pbc:Ee,n:$,o:e};let q,ee;return t&&([q,ee]=t(Z)),{render:F,hydrate:q,createApp:If(F,q)}}function an({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function gc(e,t,n=!1){const r=e.children,i=t.children;if(se(r)&&se(i))for(let o=0;o<r.length;o++){const s=r[o];let l=i[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[o]=qt(i[o]),l.el=s.el),n||gc(s,l))}}function Df(e){const t=e.slice(),n=[0];let r,i,o,s,l;const a=e.length;for(r=0;r<a;r++){const c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)l=o+s>>1,e[n[l]]<c?o=l+1:s=l;c<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,s=n[o-1];o-- >0;)n[o]=s,s=t[s];return n}const Nf=e=>e.__isTeleport,Le=Symbol(void 0),Ao=Symbol(void 0),gn=Symbol(void 0),ki=Symbol(void 0),Yn=[];let gt=null;function oe(e=!1){Yn.push(gt=e?null:[])}function wf(){Yn.pop(),gt=Yn[Yn.length-1]||null}let lr=1;function Ss(e){lr+=e}function vc(e){return e.dynamicChildren=lr>0?gt||Sn:null,wf(),lr>0&&gt&&gt.push(e),e}function me(e,t,n,r,i,o){return vc(ne(e,t,n,r,i,o,!0))}function at(e,t,n,r,i){return vc(Ie(e,t,n,r,i,!0))}function qi(e){return e?e.__v_isVNode===!0:!1}function zn(e,t){return e.type===t.type&&e.key===t.key}const li="__vInternal",yc=({key:e})=>e!=null?e:null,jr=({ref:e,ref_key:t,ref_for:n})=>e!=null?$e(e)||De(e)||le(e)?{i:mt,r:e,k:t,f:!!n}:e:null;function ne(e,t=null,n=null,r=0,i=null,o=e===Le?0:1,s=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&yc(t),ref:t&&jr(t),scopeId:oi,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return l?(Do(a,n),o&128&&e.normalize(a)):n&&(a.shapeFlag|=$e(n)?8:16),lr>0&&!s&&gt&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&gt.push(a),a}const Ie=Lf;function Lf(e,t=null,n=null,r=0,i=null,o=!1){if((!e||e===vf)&&(e=gn),qi(e)){const l=In(e,t,!0);return n&&Do(l,n),lr>0&&!o&&gt&&(l.shapeFlag&6?gt[gt.indexOf(e)]=l:gt.push(l)),l.patchFlag|=-2,l}if(Wf(e)&&(e=e.__vccOpts),t){t=jf(t);let{class:l,style:a}=t;l&&!$e(l)&&(t.class=ho(l)),Me(a)&&(Ja(a)&&!se(a)&&(a=tt({},a)),t.style=Pn(a))}const s=$e(e)?1:tf(e)?128:Nf(e)?64:Me(e)?4:le(e)?2:0;return ne(e,t,n,r,i,s,o,!0)}function jf(e){return e?Ja(e)||li in e?tt({},e):e:null}function In(e,t,n=!1){const{props:r,ref:i,patchFlag:o,children:s}=e,l=t?Bf(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&yc(l),ref:t&&t.ref?n&&i?se(i)?i.concat(jr(t)):[i,jr(t)]:jr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Le?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&In(e.ssContent),ssFallback:e.ssFallback&&In(e.ssFallback),el:e.el,anchor:e.anchor}}function _c(e=" ",t=0){return Ie(Ao,null,e,t)}function ot(e="",t=!1){return t?(oe(),at(gn,null,e)):Ie(gn,null,e)}function Ot(e){return e==null||typeof e=="boolean"?Ie(gn):se(e)?Ie(Le,null,e.slice()):typeof e=="object"?qt(e):Ie(Ao,null,String(e))}function qt(e){return e.el===null||e.memo?e:In(e)}function Do(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(se(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Do(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(li in t)?t._ctx=mt:i===3&&mt&&(mt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else le(t)?(t={default:t,_ctx:mt},n=32):(t=String(t),r&64?(n=16,t=[_c(t)]):n=8);e.children=t,e.shapeFlag|=n}function Bf(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=ho([t.class,r.class]));else if(i==="style")t.style=Pn([t.style,r.style]);else if(Zr(i)){const o=t[i],s=r[i];s&&o!==s&&!(se(o)&&o.includes(s))&&(t[i]=o?[].concat(o,s):s)}else i!==""&&(t[i]=r[i])}return t}function kt(e,t,n,r=null){_t(e,t,7,[n,r])}const Ff=mc();let $f=0;function Uf(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||Ff,o={uid:$f++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new wa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:fc(r,i),emitsOptions:ic(r,i),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:r.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Ku.bind(null,o),e.ce&&e.ce(o),o}let Ge=null;const bc=()=>Ge||mt,Mn=e=>{Ge=e,e.scope.on()},mn=()=>{Ge&&Ge.scope.off(),Ge=null};function Cc(e){return e.vnode.shapeFlag&4}let ur=!1;function zf(e,t=!1){ur=t;const{props:n,children:r}=e.vnode,i=Cc(e);Ef(e,n,i,t),kf(e,r);const o=i?Gf(e,t):void 0;return ur=!1,o}function Gf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=On(new Proxy(e.ctx,yf));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?Vf(e):null;Mn(e),wn();const o=Qt(r,e,0,[e.props,i]);if(Ln(),mn(),Ma(o)){if(o.then(mn,mn),t)return o.then(s=>{Es(e,s,t)}).catch(s=>{ri(s,e,0)});e.asyncDep=o}else Es(e,o,t)}else Tc(e,t)}function Es(e,t,n){le(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Me(t)&&(e.setupState=Qa(t)),Tc(e,n)}let Rs;function Tc(e,t,n){const r=e.type;if(!e.render){if(!t&&Rs&&!r.render){const i=r.template;if(i){const{isCustomElement:o,compilerOptions:s}=e.appContext.config,{delimiters:l,compilerOptions:a}=r,c=tt(tt({isCustomElement:o,delimiters:l},s),a);r.render=Rs(i,c)}}e.render=r.render||yt}Mn(e),wn(),_f(e),Ln(),mn()}function Hf(e){return new Proxy(e.attrs,{get(t,n){return ct(e,"get","$attrs"),t[n]}})}function Vf(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=Hf(e))},slots:e.slots,emit:e.emit,expose:t}}function ui(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Qa(On(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Jr)return Jr[n](e)}}))}function Wf(e){return le(e)&&"__vccOpts"in e}const st=(e,t)=>Gu(e,t,ur);function Sc(e,t,n){const r=arguments.length;return r===2?Me(t)&&!se(t)?qi(t)?Ie(e,null,[t]):Ie(e,t):Ie(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&qi(n)&&(n=[n]),Ie(e,t,n))}const qf="3.2.38",Jf="http://www.w3.org/2000/svg",pn=typeof document<"u"?document:null,Ps=pn&&pn.createElement("template"),Kf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?pn.createElementNS(Jf,e):pn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>pn.createTextNode(e),createComment:e=>pn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>pn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,i,o){const s=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===o||!(i=i.nextSibling)););else{Ps.innerHTML=r?`<svg>${e}</svg>`:e;const l=Ps.content;if(r){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Yf(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Xf(e,t,n){const r=e.style,i=$e(n);if(n&&!i){for(const o in n)Ji(r,o,n[o]);if(t&&!$e(t))for(const o in t)n[o]==null&&Ji(r,o,"")}else{const o=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=o)}}const ks=/\s*!important$/;function Ji(e,t,n){if(se(n))n.forEach(r=>Ji(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Qf(e,t);ks.test(n)?e.setProperty(Nn(r),n.replace(ks,""),"important"):e[r]=n}}const xs=["Webkit","Moz","ms"],xi={};function Qf(e,t){const n=xi[t];if(n)return n;let r=kn(t);if(r!=="filter"&&r in e)return xi[t]=r;r=Na(r);for(let i=0;i<xs.length;i++){const o=xs[i]+r;if(o in e)return xi[t]=o}return t}const Os="http://www.w3.org/1999/xlink";function Zf(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Os,t.slice(6,t.length)):e.setAttributeNS(Os,t,n);else{const o=Ql(t);n==null||o&&!xa(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function ep(e,t,n,r,i,o,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,i,o),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const a=n==null?"":n;(e.value!==a||e.tagName==="OPTION")&&(e.value=a),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=xa(n):n==null&&a==="string"?(n="",l=!0):a==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}const[Ec,tp]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Ki=0;const np=Promise.resolve(),rp=()=>{Ki=0},ip=()=>Ki||(np.then(rp),Ki=Ec());function Cn(e,t,n,r){e.addEventListener(t,n,r)}function op(e,t,n,r){e.removeEventListener(t,n,r)}function sp(e,t,n,r,i=null){const o=e._vei||(e._vei={}),s=o[t];if(r&&s)s.value=r;else{const[l,a]=ap(t);if(r){const c=o[t]=cp(r,i);Cn(e,l,c,a)}else s&&(op(e,l,s,a),o[t]=void 0)}}const Is=/(?:Once|Passive|Capture)$/;function ap(e){let t;if(Is.test(e)){t={};let r;for(;r=e.match(Is);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Nn(e.slice(2)),t]}function cp(e,t){const n=r=>{const i=r.timeStamp||Ec();(tp||i>=n.attached-1)&&_t(lp(r,n.value),t,5,[r])};return n.value=e,n.attached=ip(),n}function lp(e,t){if(se(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const Ms=/^on[a-z]/,up=(e,t,n,r,i=!1,o,s,l,a)=>{t==="class"?Yf(e,r,i):t==="style"?Xf(e,n,r):Zr(t)?mo(t)||sp(e,t,n,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):fp(e,t,r,i))?ep(e,t,r,o,s,l,a):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Zf(e,t,r,i))};function fp(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&Ms.test(t)&&le(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||Ms.test(t)&&$e(n)?!1:t in e}const As=e=>{const t=e.props["onUpdate:modelValue"]||!1;return se(t)?n=>Nr(t,n):t};function pp(e){e.target.composing=!0}function Ds(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Oi={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=As(i);const o=r||i.props&&i.props.type==="number";Cn(e,t?"change":"input",s=>{if(s.target.composing)return;let l=e.value;n&&(l=l.trim()),o&&(l=wi(l)),e._assign(l)}),n&&Cn(e,"change",()=>{e.value=e.value.trim()}),t||(Cn(e,"compositionstart",pp),Cn(e,"compositionend",Ds),Cn(e,"change",Ds))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},o){if(e._assign=As(o),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&wi(e.value)===t))return;const s=t==null?"":t;e.value!==s&&(e.value=s)}},dp=tt({patchProp:up},Kf);let Ns;function hp(){return Ns||(Ns=Mf(dp))}const mp=(...e)=>{const t=hp().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=gp(r);if(!i)return;const o=t._component;!le(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const s=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},t};function gp(e){return $e(e)?document.querySelector(e):e}var vp=!1;/*!
  * pinia v2.0.21
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let Rc;const fi=e=>Rc=e,Pc=Symbol();function Yi(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Xn;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Xn||(Xn={}));function yp(){const e=La(!0),t=e.run(()=>Ae({}));let n=[],r=[];const i=On({install(o){fi(i),i._a=o,o.provide(Pc,i),o.config.globalProperties.$pinia=i,r.forEach(s=>n.push(s)),r=[]},use(o){return!this._a&&!vp?r.push(o):n.push(o),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const kc=()=>{};function ws(e,t,n,r=kc){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),r())};return!n&&bc()&&Io(i),i}function _n(e,...t){e.slice().forEach(n=>{n(...t)})}function Xi(e,t){for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];Yi(i)&&Yi(r)&&e.hasOwnProperty(n)&&!De(r)&&!Xt(r)?e[n]=Xi(i,r):e[n]=r}return e}const _p=Symbol();function bp(e){return!Yi(e)||!e.hasOwnProperty(_p)}const{assign:jt}=Object;function Cp(e){return!!(De(e)&&e.effect)}function Tp(e,t,n,r){const{state:i,actions:o,getters:s}=t,l=n.state.value[e];let a;function c(){l||(n.state.value[e]=i?i():{});const u=Fu(n.state.value[e]);return jt(u,o,Object.keys(s||{}).reduce((f,p)=>(f[p]=On(st(()=>{fi(n);const g=n._s.get(e);return s[p].call(g,g)})),f),{}))}return a=xc(e,c,t,n,r,!0),a.$reset=function(){const f=i?i():{};this.$patch(p=>{jt(p,f)})},a}function xc(e,t,n={},r,i,o){let s;const l=jt({actions:{}},n),a={deep:!0};let c,u,f=On([]),p=On([]),g;const y=r.state.value[e];!o&&!y&&(r.state.value[e]={}),Ae({});let S;function A(Q){let te;c=u=!1,typeof Q=="function"?(Q(r.state.value[e]),te={type:Xn.patchFunction,storeId:e,events:g}):(Xi(r.state.value[e],Q),te={type:Xn.patchObject,payload:Q,storeId:e,events:g});const ge=S=Symbol();ko().then(()=>{S===ge&&(c=!0)}),u=!0,_n(f,te,r.state.value[e])}const E=kc;function k(){s.stop(),f=[],p=[],r._s.delete(e)}function Y(Q,te){return function(){fi(r);const ge=Array.from(arguments),J=[],Ee=[];function Oe(Re){J.push(Re)}function Be(Re){Ee.push(Re)}_n(p,{args:ge,name:Q,store:H,after:Oe,onError:Be});let be;try{be=te.apply(this&&this.$id===e?this:H,ge)}catch(Re){throw _n(Ee,Re),Re}return be instanceof Promise?be.then(Re=>(_n(J,Re),Re)).catch(Re=>(_n(Ee,Re),Promise.reject(Re))):(_n(J,be),be)}}const B={_p:r,$id:e,$onAction:ws.bind(null,p),$patch:A,$reset:E,$subscribe(Q,te={}){const ge=ws(f,Q,te.detached,()=>J()),J=s.run(()=>Ct(()=>r.state.value[e],Ee=>{(te.flush==="sync"?u:c)&&Q({storeId:e,type:Xn.direct,events:g},Ee)},jt({},a,te)));return ge},$dispose:k},H=zt(jt({},B));r._s.set(e,H);const W=r._e.run(()=>(s=La(),s.run(()=>t())));for(const Q in W){const te=W[Q];if(De(te)&&!Cp(te)||Xt(te))o||(y&&bp(te)&&(De(te)?te.value=y[Q]:Xi(te,y[Q])),r.state.value[e][Q]=te);else if(typeof te=="function"){const ge=Y(Q,te);W[Q]=ge,l.actions[Q]=te}}return jt(H,W),jt(ve(H),W),Object.defineProperty(H,"$state",{get:()=>r.state.value[e],set:Q=>{A(te=>{jt(te,Q)})}}),r._p.forEach(Q=>{jt(H,s.run(()=>Q({store:H,app:r._a,pinia:r,options:l})))}),y&&o&&n.hydrate&&n.hydrate(H.$state,y),c=!0,u=!0,H}function No(e,t,n){let r,i;const o=typeof t=="function";typeof e=="string"?(r=e,i=o?n:t):(i=e,r=e.id);function s(l,a){const c=bc();return l=l||c&&bt(Pc),l&&fi(l),l=Rc,l._s.has(r)||(o?xc(r,t,i,l):Tp(r,i,l)),l._s.get(r)}return s.$id=r,s}function Sp(e){return typeof e=="object"&&e!==null}function Ls(e,t){return e=Sp(e)?e:Object.create(null),new Proxy(e,{get(n,r,i){return Reflect.get(n,r,i)||Reflect.get(t,r,i)}})}function Ep(e,t){return t.reduce((n,r)=>n==null?void 0:n[r],e)}function Rp(e,t,n){return t.slice(0,-1).reduce((r,i)=>/^(__proto__)$/.test(i)?{}:r[i]=r[i]||{},e)[t[t.length-1]]=n,e}function Pp(e,t){return t.reduce((n,r)=>{const i=r.split(".");return Rp(n,i,Ep(e,i))},{})}function js(e,t,n,r){try{const i=t==null?void 0:t.getItem(r);i&&e.$patch(n==null?void 0:n.deserialize(i))}catch{}}function kp(e={}){return t=>{const{options:{persist:n},store:r}=t;if(!n)return;const i=(Array.isArray(n)?n.map(o=>Ls(o,e)):[Ls(n,e)]).map(({storage:o=localStorage,beforeRestore:s=null,afterRestore:l=null,serializer:a={serialize:JSON.stringify,deserialize:JSON.parse},key:c=r.$id,paths:u=null})=>({storage:o,beforeRestore:s,afterRestore:l,serializer:a,key:c,paths:u}));i.forEach(o=>{const{storage:s,serializer:l,key:a,paths:c,beforeRestore:u,afterRestore:f}=o;u==null||u(t),js(r,s,l,a),f==null||f(t),r.$subscribe((p,g)=>{try{const y=Array.isArray(c)?Pp(g,c):g;s.setItem(a,l.serialize(y))}catch{}},{detached:!0})}),r.$hydrate=({runHooks:o=!0}={})=>{i.forEach(s=>{const{beforeRestore:l,afterRestore:a,storage:c,serializer:u,key:f}=s;o&&(l==null||l(t)),js(r,c,u,f),o&&(a==null||a(t))})}}}var xp=kp();/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Tn=typeof window<"u";function Op(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ce=Object.assign;function Ii(e,t){const n={};for(const r in t){const i=t[r];n[r]=Tt(i)?i.map(e):e(i)}return n}const Qn=()=>{},Tt=Array.isArray,Ip=/\/$/,Mp=e=>e.replace(Ip,"");function Mi(e,t,n="/"){let r,i={},o="",s="";const l=t.indexOf("#");let a=t.indexOf("?");return l<a&&l>=0&&(a=-1),a>-1&&(r=t.slice(0,a),o=t.slice(a+1,l>-1?l:t.length),i=e(o)),l>-1&&(r=r||t.slice(0,l),s=t.slice(l,t.length)),r=wp(r!=null?r:t,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function Ap(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Bs(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Dp(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&An(t.matched[r],n.matched[i])&&Oc(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function An(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Oc(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Np(e[n],t[n]))return!1;return!0}function Np(e,t){return Tt(e)?Fs(e,t):Tt(t)?Fs(t,e):e===t}function Fs(e,t){return Tt(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function wp(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let i=n.length-1,o,s;for(o=0;o<r.length;o++)if(s=r[o],s!==".")if(s==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var fr;(function(e){e.pop="pop",e.push="push"})(fr||(fr={}));var Zn;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Zn||(Zn={}));function Lp(e){if(!e)if(Tn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Mp(e)}const jp=/^[^#]+#/;function Bp(e,t){return e.replace(jp,"#")+t}function Fp(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const pi=()=>({left:window.pageXOffset,top:window.pageYOffset});function $p(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Fp(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function $s(e,t){return(history.state?history.state.position-t:-1)+e}const Qi=new Map;function Up(e,t){Qi.set(e,t)}function zp(e){const t=Qi.get(e);return Qi.delete(e),t}let Gp=()=>location.protocol+"//"+location.host;function Ic(e,t){const{pathname:n,search:r,hash:i}=t,o=e.indexOf("#");if(o>-1){let l=i.includes(e.slice(o))?e.slice(o).length:1,a=i.slice(l);return a[0]!=="/"&&(a="/"+a),Bs(a,"")}return Bs(n,e)+r+i}function Hp(e,t,n,r){let i=[],o=[],s=null;const l=({state:p})=>{const g=Ic(e,location),y=n.value,S=t.value;let A=0;if(p){if(n.value=g,t.value=p,s&&s===y){s=null;return}A=S?p.position-S.position:0}else r(g);i.forEach(E=>{E(n.value,y,{delta:A,type:fr.pop,direction:A?A>0?Zn.forward:Zn.back:Zn.unknown})})};function a(){s=n.value}function c(p){i.push(p);const g=()=>{const y=i.indexOf(p);y>-1&&i.splice(y,1)};return o.push(g),g}function u(){const{history:p}=window;!p.state||p.replaceState(Ce({},p.state,{scroll:pi()}),"")}function f(){for(const p of o)p();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u),{pauseListeners:a,listen:c,destroy:f}}function Us(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?pi():null}}function Vp(e){const{history:t,location:n}=window,r={value:Ic(e,n)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(a,c,u){const f=e.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+a:Gp()+e+a;try{t[u?"replaceState":"pushState"](c,"",p),i.value=c}catch(g){console.error(g),n[u?"replace":"assign"](p)}}function s(a,c){const u=Ce({},t.state,Us(i.value.back,a,i.value.forward,!0),c,{position:i.value.position});o(a,u,!0),r.value=a}function l(a,c){const u=Ce({},i.value,t.state,{forward:a,scroll:pi()});o(u.current,u,!0);const f=Ce({},Us(r.value,a,null),{position:u.position+1},c);o(a,f,!1),r.value=a}return{location:r,state:i,push:l,replace:s}}function Wp(e){e=Lp(e);const t=Vp(e),n=Hp(e,t.state,t.location,t.replace);function r(o,s=!0){s||n.pauseListeners(),history.go(o)}const i=Ce({location:"",base:e,go:r,createHref:Bp.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function qp(e){return typeof e=="string"||e&&typeof e=="object"}function Mc(e){return typeof e=="string"||typeof e=="symbol"}const Wt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Ac=Symbol("");var zs;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(zs||(zs={}));function Dn(e,t){return Ce(new Error,{type:e,[Ac]:!0},t)}function wt(e,t){return e instanceof Error&&Ac in e&&(t==null||!!(e.type&t))}const Gs="[^/]+?",Jp={sensitive:!1,strict:!1,start:!0,end:!0},Kp=/[.+*?^${}()[\]/\\]/g;function Yp(e,t){const n=Ce({},Jp,t),r=[];let i=n.start?"^":"";const o=[];for(const c of e){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let f=0;f<c.length;f++){const p=c[f];let g=40+(n.sensitive?.25:0);if(p.type===0)f||(i+="/"),i+=p.value.replace(Kp,"\\$&"),g+=40;else if(p.type===1){const{value:y,repeatable:S,optional:A,regexp:E}=p;o.push({name:y,repeatable:S,optional:A});const k=E||Gs;if(k!==Gs){g+=10;try{new RegExp(`(${k})`)}catch(B){throw new Error(`Invalid custom RegExp for param "${y}" (${k}): `+B.message)}}let Y=S?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;f||(Y=A&&c.length<2?`(?:/${Y})`:"/"+Y),A&&(Y+="?"),i+=Y,g+=20,A&&(g+=-8),S&&(g+=-20),k===".*"&&(g+=-50)}u.push(g)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");function l(c){const u=c.match(s),f={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",y=o[p-1];f[y.name]=g&&y.repeatable?g.split("/"):g}return f}function a(c){let u="",f=!1;for(const p of e){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:y,repeatable:S,optional:A}=g,E=y in c?c[y]:"";if(Tt(E)&&!S)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const k=Tt(E)?E.join("/"):E;if(!k)if(A)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${y}"`);u+=k}}return u||"/"}return{re:s,score:r,keys:o,parse:l,stringify:a}}function Xp(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Qp(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const o=Xp(r[n],i[n]);if(o)return o;n++}if(Math.abs(i.length-r.length)===1){if(Hs(r))return 1;if(Hs(i))return-1}return i.length-r.length}function Hs(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Zp={type:0,value:""},ed=/[a-zA-Z0-9_]/;function td(e){if(!e)return[[]];if(e==="/")return[[Zp]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let l=0,a,c="",u="";function f(){!c||(n===0?o.push({type:0,value:c}):n===1||n===2||n===3?(o.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:u,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),c="")}function p(){c+=a}for(;l<e.length;){if(a=e[l++],a==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:a==="/"?(c&&f(),s()):a===":"?(f(),n=1):p();break;case 4:p(),n=r;break;case 1:a==="("?n=2:ed.test(a)?p():(f(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case 2:a===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:f(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--,u="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${c}"`),f(),s(),i}function nd(e,t,n){const r=Yp(td(e.path),n),i=Ce(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function rd(e,t){const n=[],r=new Map;t=qs({strict:!1,end:!0,sensitive:!1},t);function i(u){return r.get(u)}function o(u,f,p){const g=!p,y=id(u);y.aliasOf=p&&p.record;const S=qs(t,u),A=[y];if("alias"in u){const Y=typeof u.alias=="string"?[u.alias]:u.alias;for(const B of Y)A.push(Ce({},y,{components:p?p.record.components:y.components,path:B,aliasOf:p?p.record:y}))}let E,k;for(const Y of A){const{path:B}=Y;if(f&&B[0]!=="/"){const H=f.record.path,W=H[H.length-1]==="/"?"":"/";Y.path=f.record.path+(B&&W+B)}if(E=nd(Y,f,S),p?p.alias.push(E):(k=k||E,k!==E&&k.alias.push(E),g&&u.name&&!Ws(E)&&s(u.name)),y.children){const H=y.children;for(let W=0;W<H.length;W++)o(H[W],E,p&&p.children[W])}p=p||E,a(E)}return k?()=>{s(k)}:Qn}function s(u){if(Mc(u)){const f=r.get(u);f&&(r.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&r.delete(u.record.name),u.children.forEach(s),u.alias.forEach(s))}}function l(){return n}function a(u){let f=0;for(;f<n.length&&Qp(u,n[f])>=0&&(u.record.path!==n[f].record.path||!Dc(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!Ws(u)&&r.set(u.record.name,u)}function c(u,f){let p,g={},y,S;if("name"in u&&u.name){if(p=r.get(u.name),!p)throw Dn(1,{location:u});S=p.record.name,g=Ce(Vs(f.params,p.keys.filter(k=>!k.optional).map(k=>k.name)),u.params&&Vs(u.params,p.keys.map(k=>k.name))),y=p.stringify(g)}else if("path"in u)y=u.path,p=n.find(k=>k.re.test(y)),p&&(g=p.parse(y),S=p.record.name);else{if(p=f.name?r.get(f.name):n.find(k=>k.re.test(f.path)),!p)throw Dn(1,{location:u,currentLocation:f});S=p.record.name,g=Ce({},f.params,u.params),y=p.stringify(g)}const A=[];let E=p;for(;E;)A.unshift(E.record),E=E.parent;return{name:S,path:y,params:g,matched:A,meta:sd(A)}}return e.forEach(u=>o(u)),{addRoute:o,resolve:c,removeRoute:s,getRoutes:l,getRecordMatcher:i}}function Vs(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function id(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:od(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function od(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="boolean"?n:n[r];return t}function Ws(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function sd(e){return e.reduce((t,n)=>Ce(t,n.meta),{})}function qs(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Dc(e,t){return t.children.some(n=>n===e||Dc(e,n))}const Nc=/#/g,ad=/&/g,cd=/\//g,ld=/=/g,ud=/\?/g,wc=/\+/g,fd=/%5B/g,pd=/%5D/g,Lc=/%5E/g,dd=/%60/g,jc=/%7B/g,hd=/%7C/g,Bc=/%7D/g,md=/%20/g;function wo(e){return encodeURI(""+e).replace(hd,"|").replace(fd,"[").replace(pd,"]")}function gd(e){return wo(e).replace(jc,"{").replace(Bc,"}").replace(Lc,"^")}function Zi(e){return wo(e).replace(wc,"%2B").replace(md,"+").replace(Nc,"%23").replace(ad,"%26").replace(dd,"`").replace(jc,"{").replace(Bc,"}").replace(Lc,"^")}function vd(e){return Zi(e).replace(ld,"%3D")}function yd(e){return wo(e).replace(Nc,"%23").replace(ud,"%3F")}function _d(e){return e==null?"":yd(e).replace(cd,"%2F")}function Yr(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function bd(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(wc," "),s=o.indexOf("="),l=Yr(s<0?o:o.slice(0,s)),a=s<0?null:Yr(o.slice(s+1));if(l in t){let c=t[l];Tt(c)||(c=t[l]=[c]),c.push(a)}else t[l]=a}return t}function Js(e){let t="";for(let n in e){const r=e[n];if(n=vd(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Tt(r)?r.map(o=>o&&Zi(o)):[r&&Zi(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+n,o!=null&&(t+="="+o))})}return t}function Cd(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Tt(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const Td=Symbol(""),Ks=Symbol(""),di=Symbol(""),Lo=Symbol(""),eo=Symbol("");function Gn(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function Jt(e,t,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((s,l)=>{const a=f=>{f===!1?l(Dn(4,{from:n,to:t})):f instanceof Error?l(f):qp(f)?l(Dn(2,{from:t,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),s())},c=e.call(r&&r.instances[i],t,n,a);let u=Promise.resolve(c);e.length<3&&(u=u.then(a)),u.catch(f=>l(f))})}function Ai(e,t,n,r){const i=[];for(const o of e)for(const s in o.components){let l=o.components[s];if(!(t!=="beforeRouteEnter"&&!o.instances[s]))if(Sd(l)){const c=(l.__vccOpts||l)[t];c&&i.push(Jt(c,n,r,o,s))}else{let a=l();i.push(()=>a.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${o.path}"`));const u=Op(c)?c.default:c;o.components[s]=u;const p=(u.__vccOpts||u)[t];return p&&Jt(p,n,r,o,s)()}))}}return i}function Sd(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Ys(e){const t=bt(di),n=bt(Lo),r=st(()=>t.resolve(ae(e.to))),i=st(()=>{const{matched:a}=r.value,{length:c}=a,u=a[c-1],f=n.matched;if(!u||!f.length)return-1;const p=f.findIndex(An.bind(null,u));if(p>-1)return p;const g=Xs(a[c-2]);return c>1&&Xs(u)===g&&f[f.length-1].path!==g?f.findIndex(An.bind(null,a[c-2])):p}),o=st(()=>i.value>-1&&kd(n.params,r.value.params)),s=st(()=>i.value>-1&&i.value===n.matched.length-1&&Oc(n.params,r.value.params));function l(a={}){return Pd(a)?t[ae(e.replace)?"replace":"push"](ae(e.to)).catch(Qn):Promise.resolve()}return{route:r,href:st(()=>r.value.href),isActive:o,isExactActive:s,navigate:l}}const Ed=He({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ys,setup(e,{slots:t}){const n=zt(Ys(e)),{options:r}=bt(di),i=st(()=>({[Qs(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Qs(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=t.default&&t.default(n);return e.custom?o:Sc("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Rd=Ed;function Pd(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function kd(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Tt(i)||i.length!==r.length||r.some((o,s)=>o!==i[s]))return!1}return!0}function Xs(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Qs=(e,t,n)=>e!=null?e:t!=null?t:n,xd=He({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=bt(eo),i=st(()=>e.route||r.value),o=bt(Ks,0),s=st(()=>{let c=ae(o);const{matched:u}=i.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),l=st(()=>i.value.matched[s.value]);wr(Ks,st(()=>s.value+1)),wr(Td,l),wr(eo,i);const a=Ae();return Ct(()=>[a.value,l.value,e.name],([c,u,f],[p,g,y])=>{u&&(u.instances[f]=c,g&&g!==u&&c&&c===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!An(u,g)||!p)&&(u.enterCallbacks[f]||[]).forEach(S=>S(c))},{flush:"post"}),()=>{const c=i.value,u=e.name,f=l.value,p=f&&f.components[u];if(!p)return Zs(n.default,{Component:p,route:c});const g=f.props[u],y=g?g===!0?c.params:typeof g=="function"?g(c):g:null,A=Sc(p,Ce({},y,t,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(f.instances[u]=null)},ref:a}));return Zs(n.default,{Component:A,route:c})||A}}});function Zs(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Fc=xd;function Od(e){const t=rd(e.routes,e),n=e.parseQuery||bd,r=e.stringifyQuery||Js,i=e.history,o=Gn(),s=Gn(),l=Gn(),a=Lu(Wt);let c=Wt;Tn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ii.bind(null,T=>""+T),f=Ii.bind(null,_d),p=Ii.bind(null,Yr);function g(T,j){let x,$;return Mc(T)?(x=t.getRecordMatcher(T),$=j):$=T,t.addRoute($,x)}function y(T){const j=t.getRecordMatcher(T);j&&t.removeRoute(j)}function S(){return t.getRoutes().map(T=>T.record)}function A(T){return!!t.getRecordMatcher(T)}function E(T,j){if(j=Ce({},j||a.value),typeof T=="string"){const ee=Mi(n,T,j.path),m=t.resolve({path:ee.path},j),_=i.createHref(ee.fullPath);return Ce(ee,m,{params:p(m.params),hash:Yr(ee.hash),redirectedFrom:void 0,href:_})}let x;if("path"in T)x=Ce({},T,{path:Mi(n,T.path,j.path).path});else{const ee=Ce({},T.params);for(const m in ee)ee[m]==null&&delete ee[m];x=Ce({},T,{params:f(T.params)}),j.params=f(j.params)}const $=t.resolve(x,j),F=T.hash||"";$.params=u(p($.params));const Z=Ap(r,Ce({},T,{hash:gd(F),path:$.path})),q=i.createHref(Z);return Ce({fullPath:Z,hash:F,query:r===Js?Cd(T.query):T.query||{}},$,{redirectedFrom:void 0,href:q})}function k(T){return typeof T=="string"?Mi(n,T,a.value.path):Ce({},T)}function Y(T,j){if(c!==T)return Dn(8,{from:j,to:T})}function B(T){return Q(T)}function H(T){return B(Ce(k(T),{replace:!0}))}function W(T){const j=T.matched[T.matched.length-1];if(j&&j.redirect){const{redirect:x}=j;let $=typeof x=="function"?x(T):x;return typeof $=="string"&&($=$.includes("?")||$.includes("#")?$=k($):{path:$},$.params={}),Ce({query:T.query,hash:T.hash,params:"path"in $?{}:T.params},$)}}function Q(T,j){const x=c=E(T),$=a.value,F=T.state,Z=T.force,q=T.replace===!0,ee=W(x);if(ee)return Q(Ce(k(ee),{state:typeof ee=="object"?Ce({},F,ee.state):F,force:Z,replace:q}),j||x);const m=x;m.redirectedFrom=j;let _;return!Z&&Dp(r,$,x)&&(_=Dn(16,{to:m,from:$}),Xe($,$,!0,!1)),(_?Promise.resolve(_):ge(m,$)).catch(C=>wt(C)?wt(C,2)?C:Ne(C):fe(C,m,$)).then(C=>{if(C){if(wt(C,2))return Q(Ce({replace:q},k(C.to),{state:typeof C.to=="object"?Ce({},F,C.to.state):F,force:Z}),j||m)}else C=Ee(m,$,!0,q,F);return J(m,$,C),C})}function te(T,j){const x=Y(T,j);return x?Promise.reject(x):Promise.resolve()}function ge(T,j){let x;const[$,F,Z]=Id(T,j);x=Ai($.reverse(),"beforeRouteLeave",T,j);for(const ee of $)ee.leaveGuards.forEach(m=>{x.push(Jt(m,T,j))});const q=te.bind(null,T,j);return x.push(q),bn(x).then(()=>{x=[];for(const ee of o.list())x.push(Jt(ee,T,j));return x.push(q),bn(x)}).then(()=>{x=Ai(F,"beforeRouteUpdate",T,j);for(const ee of F)ee.updateGuards.forEach(m=>{x.push(Jt(m,T,j))});return x.push(q),bn(x)}).then(()=>{x=[];for(const ee of T.matched)if(ee.beforeEnter&&!j.matched.includes(ee))if(Tt(ee.beforeEnter))for(const m of ee.beforeEnter)x.push(Jt(m,T,j));else x.push(Jt(ee.beforeEnter,T,j));return x.push(q),bn(x)}).then(()=>(T.matched.forEach(ee=>ee.enterCallbacks={}),x=Ai(Z,"beforeRouteEnter",T,j),x.push(q),bn(x))).then(()=>{x=[];for(const ee of s.list())x.push(Jt(ee,T,j));return x.push(q),bn(x)}).catch(ee=>wt(ee,8)?ee:Promise.reject(ee))}function J(T,j,x){for(const $ of l.list())$(T,j,x)}function Ee(T,j,x,$,F){const Z=Y(T,j);if(Z)return Z;const q=j===Wt,ee=Tn?history.state:{};x&&($||q?i.replace(T.fullPath,Ce({scroll:q&&ee&&ee.scroll},F)):i.push(T.fullPath,F)),a.value=T,Xe(T,j,x,q),Ne()}let Oe;function Be(){Oe||(Oe=i.listen((T,j,x)=>{if(!L.listening)return;const $=E(T),F=W($);if(F){Q(Ce(F,{replace:!0}),$).catch(Qn);return}c=$;const Z=a.value;Tn&&Up($s(Z.fullPath,x.delta),pi()),ge($,Z).catch(q=>wt(q,12)?q:wt(q,2)?(Q(q.to,$).then(ee=>{wt(ee,20)&&!x.delta&&x.type===fr.pop&&i.go(-1,!1)}).catch(Qn),Promise.reject()):(x.delta&&i.go(-x.delta,!1),fe(q,$,Z))).then(q=>{q=q||Ee($,Z,!1),q&&(x.delta&&!wt(q,8)?i.go(-x.delta,!1):x.type===fr.pop&&wt(q,20)&&i.go(-1,!1)),J($,Z,q)}).catch(Qn)}))}let be=Gn(),Re=Gn(),Pe;function fe(T,j,x){Ne(T);const $=Re.list();return $.length?$.forEach(F=>F(T,j,x)):console.error(T),Promise.reject(T)}function ce(){return Pe&&a.value!==Wt?Promise.resolve():new Promise((T,j)=>{be.add([T,j])})}function Ne(T){return Pe||(Pe=!T,Be(),be.list().forEach(([j,x])=>T?x(T):j()),be.reset()),T}function Xe(T,j,x,$){const{scrollBehavior:F}=e;if(!Tn||!F)return Promise.resolve();const Z=!x&&zp($s(T.fullPath,0))||($||!x)&&history.state&&history.state.scroll||null;return ko().then(()=>F(T,j,Z)).then(q=>q&&$p(q)).catch(q=>fe(q,T,j))}const je=T=>i.go(T);let ke;const N=new Set,L={currentRoute:a,listening:!0,addRoute:g,removeRoute:y,hasRoute:A,getRoutes:S,resolve:E,options:e,push:B,replace:H,go:je,back:()=>je(-1),forward:()=>je(1),beforeEach:o.add,beforeResolve:s.add,afterEach:l.add,onError:Re.add,isReady:ce,install(T){const j=this;T.component("RouterLink",Rd),T.component("RouterView",Fc),T.config.globalProperties.$router=j,Object.defineProperty(T.config.globalProperties,"$route",{enumerable:!0,get:()=>ae(a)}),Tn&&!ke&&a.value===Wt&&(ke=!0,B(i.location).catch(F=>{}));const x={};for(const F in Wt)x[F]=st(()=>a.value[F]);T.provide(di,j),T.provide(Lo,zt(x)),T.provide(eo,a);const $=T.unmount;N.add(T),T.unmount=function(){N.delete(T),N.size<1&&(c=Wt,Oe&&Oe(),Oe=null,a.value=Wt,ke=!1,Pe=!1),$()}}};return L}function bn(e){return e.reduce((t,n)=>t.then(()=>n()),Promise.resolve())}function Id(e,t){const n=[],r=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let s=0;s<o;s++){const l=t.matched[s];l&&(e.matched.find(c=>An(c,l))?r.push(l):n.push(l));const a=e.matched[s];a&&(t.matched.find(c=>An(c,a))||i.push(a))}return[n,r,i]}function Md(){return bt(di)}function Ad(){return bt(Lo)}const lt=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Dd={},Nd=e=>(si("data-v-b3357c15"),e=e(),ai(),e),wd=Nd(()=>ne("div",null,[ne("a",{href:"http://www.zone38.net/"},"Font (codeman38)")],-1)),Ld=[wd];function jd(e,t){return oe(),me("footer",null,Ld)}const Bd=lt(Dd,[["render",jd],["__scopeId","data-v-b3357c15"]]),Fd="/arbol-blanco/buttonImages/removePeople.png",$d="/arbol-blanco/buttonImages/puerta.png",jn=No({id:"comms",state:()=>({client:void 0,isServer:!1,pendingRemove:[]}),getters:{},actions:{}}),en=No({id:"player",state:()=>({name:"",player:void 0,nameAlreadyTaken:!1}),getters:{playerName:e=>{var t;return(t=e.player)==null?void 0:t.name}},actions:{setName(e){this.name=e}},persist:!0});function jo(e,t=void 0,n="",r=[],i=[]){return{arbolBlanco:t,gm:e,responses:r,secretWord:n,votations:i}}function $c(e,t=void 0,n=[],r=[]){const i={name:e,currentGM:t,players:n,roundsInfo:r};if(t&&Uc(i,t),r.length==0&&t){const o=jo(t);r.push(o)}return i}function Ud(e,t){e.currentGM=t;const n=jo(t);pr(e,t)||e.roundsInfo.push(n)}function zd(e){e.roundsInfo.push(jo(e.currentGM))}function Gd(e,t){const n=vn(e);!n||pr(e,t)||(n.arbolBlanco=t)}function Hd(e,t){const n=vn(e);!n||(n.secretWord=t)}function Uc(e,t){e.players.push(t)}function ea(e,t){const n=e.players.findIndex(r=>r.name===t);return n<0?void 0:e.players[n]}function Vd(e,t){const n=e.players.findIndex(r=>r.name===t.name);console.log("removed: ",n),!(n<0)&&e.players.splice(n,1)}function vn(e){return e.roundsInfo.length!=0?e.roundsInfo[e.roundsInfo.length-1]:void 0}function pr(e,t){return!!(e&&e.currentGM&&e.currentGM.name===t.name)}function zc(e,t){const n=vn(e);return n?!!n.arbolBlanco&&n.arbolBlanco.name===t.name:!1}function er(e){const t=vn(e);return t?!!t.secretWord:!1}function Gc(e,t=void 0){return{name:e,room:t}}var Bo={exports:{}};(function(e){var t={};t.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),t.useArrayBufferView=!t.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),e.exports.binaryFeatures=t;var n=e.exports.BlobBuilder;typeof window<"u"&&(n=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function r(){this._pieces=[],this._parts=[]}r.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},r.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);t.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),t.useBlobBuilder){for(var i=new n,o=0,s=this._parts.length;o<s;o++)i.append(this._parts[o]);return i.getBlob()}else return new Blob(this._parts)},e.exports.BufferBuilder=r})(Bo);var Wd=Bo.exports.BufferBuilder,ta=Bo.exports.binaryFeatures,qd={unpack:function(e){var t=new Ve(e);return t.unpack()},pack:function(e){var t=new We;t.pack(e);var n=t.getBuffer();return n}},na=qd;function Ve(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}Ve.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;var t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}};Ve.prototype.unpack_uint8=function(){var e=this.dataView[this.index]&255;return this.index++,e};Ve.prototype.unpack_uint16=function(){var e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t};Ve.prototype.unpack_uint32=function(){var e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t};Ve.prototype.unpack_uint64=function(){var e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t};Ve.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-(1<<8)};Ve.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-(1<<16)};Ve.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)};Ve.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)};Ve.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t};Ve.prototype.unpack_string=function(e){for(var t=this.read(e),n=0,r="",i,o;n<e;)i=t[n],i<128?(r+=String.fromCharCode(i),n++):(i^192)<32?(o=(i^192)<<6|t[n+1]&63,r+=String.fromCharCode(o),n+=2):(o=(i&15)<<12|(t[n+1]&63)<<6|t[n+2]&63,r+=String.fromCharCode(o),n+=3);return this.index+=e,r};Ve.prototype.unpack_array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this.unpack();return t};Ve.prototype.unpack_map=function(e){for(var t={},n=0;n<e;n++){var r=this.unpack(),i=this.unpack();t[r]=i}return t};Ve.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=e>>31,n=(e>>23&255)-127,r=e&8388607|8388608;return(t===0?1:-1)*r*Math.pow(2,n-23)};Ve.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),n=e>>31,r=(e>>20&2047)-1023,i=e&1048575|1048576,o=i*Math.pow(2,r-20)+t*Math.pow(2,r-52);return(n===0?1:-1)*o};Ve.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")};function We(){this.bufferBuilder=new Wd}We.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};We.prototype.pack=function(e){var t=typeof e;if(t==="string")this.pack_string(e);else if(t==="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(t==="boolean")e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if(t==="undefined")this.bufferBuilder.append(192);else if(t==="object")if(e===null)this.bufferBuilder.append(192);else{var n=e.constructor;if(n==Array)this.pack_array(e);else if(n==Blob||n==File||e instanceof Blob||e instanceof File)this.pack_bin(e);else if(n==ArrayBuffer)ta.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)ta.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(e);else if(n==Date)this.pack_string(e.toString());else if(typeof e.toBinaryPack=="function")this.bufferBuilder.append(e.toBinaryPack());else throw new Error('Type "'+n.toString()+'" not yet supported')}else throw new Error('Type "'+t+'" not yet supported');this.bufferBuilder.flush()};We.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};We.prototype.pack_string=function(e){var t=Kd(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(t);else throw new Error("Invalid length");this.bufferBuilder.append(e)};We.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");for(var n=0;n<t;n++)this.pack(e[n])};We.prototype.pack_integer=function(e){if(e>=-32&&e<=127)this.bufferBuilder.append(e&255);else if(e>=0&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")};We.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var n=Math.floor(Math.log(e)/Math.LN2),r=e/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),o=Math.pow(2,32),s=t<<31|n+1023<<20|i/o&1048575,l=i%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(l)};We.prototype.pack_object=function(e){var t=Object.keys(e),n=t.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(var r in e)e.hasOwnProperty(r)&&(this.pack(r),this.pack(e[r]))};We.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)};We.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(e&255)};We.prototype.pack_uint32=function(e){var t=e&4294967295;this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};We.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),n=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};We.prototype.pack_int8=function(e){this.bufferBuilder.append(e&255)};We.prototype.pack_int16=function(e){this.bufferBuilder.append((e&65280)>>8),this.bufferBuilder.append(e&255)};We.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};We.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),n=e%Math.pow(2,32);this.bufferBuilder.append((t&4278190080)>>>24),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};function Jd(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}function Kd(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,Jd).length}let Hc=!0,Vc=!0;function qn(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Bn(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,l){if(s!==t)return i.apply(this,arguments);const a=c=>{const u=n(c);u&&(l.handleEvent?l.handleEvent(u):l(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(l,a),i.apply(this,[s,a])};const o=r.removeEventListener;r.removeEventListener=function(s,l){if(s!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(l))return o.apply(this,arguments);const a=this._eventMap[t].get(l);return this._eventMap[t].delete(l),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,a])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(s){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),s&&this.addEventListener(t,this["_on"+t]=s)},enumerable:!0,configurable:!0})}function Yd(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Hc=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Xd(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(Vc=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function Fo(){if(typeof window=="object"){if(Hc)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function hi(e,t){!Vc||console.warn(e+" is deprecated, please use "+t+" instead.")}function Qd(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=qn(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=qn(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=qn(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=qn(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function ra(e){return Object.prototype.toString.call(e)==="[object Object]"}function Wc(e){return ra(e)?Object.keys(e).reduce(function(t,n){const r=ra(e[n]),i=r?Wc(e[n]):e[n],o=r&&!Object.keys(i).length;return i===void 0||o?t:Object.assign(t,{[n]:i})},{}):e}function to(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?to(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{to(e,e.get(i),n)})}))}function ia(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const o=[];return e.forEach(s=>{s.type==="track"&&s.trackIdentifier===t.id&&o.push(s)}),o.forEach(s=>{e.forEach(l=>{l.type===r&&l.trackId===s.id&&to(e,l,i)})}),i}const oa=Fo;function qc(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const a={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof l[c]=="object"?l[c]:{ideal:l[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const f=function(p,g){return p?p+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(u.ideal!==void 0){a.optional=a.optional||[];let p={};typeof u.ideal=="number"?(p[f("min",c)]=u.ideal,a.optional.push(p),p={},p[f("max",c)]=u.ideal,a.optional.push(p)):(p[f("",c)]=u.ideal,a.optional.push(p))}u.exact!==void 0&&typeof u.exact!="number"?(a.mandatory=a.mandatory||{},a.mandatory[f("",c)]=u.exact):["min","max"].forEach(p=>{u[p]!==void 0&&(a.mandatory=a.mandatory||{},a.mandatory[f(p,c)]=u[p])})}),l.advanced&&(a.optional=(a.optional||[]).concat(l.advanced)),a},i=function(l,a){if(t.version>=61)return a(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(u,f,p){f in u&&!(p in u)&&(u[p]=u[f],delete u[f])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=t.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete l.video.facingMode;let f;if(c.exact==="environment"||c.ideal==="environment"?f=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(f=["front"]),f)return n.mediaDevices.enumerateDevices().then(p=>{p=p.filter(y=>y.kind==="videoinput");let g=p.find(y=>f.some(S=>y.label.toLowerCase().includes(S)));return!g&&p.length&&f.includes("back")&&(g=p[p.length-1]),g&&(l.video.deviceId=c.exact?{exact:g.deviceId}:{ideal:g.deviceId}),l.video=r(l.video),oa("chrome: "+JSON.stringify(l)),a(l)})}l.video=r(l.video)}return oa("chrome: "+JSON.stringify(l)),a(l)},o=function(l){return t.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(l,a,c){i(l,u=>{n.webkitGetUserMedia(u,a,f=>{c&&c(o(f))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(a){return i(a,c=>l(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function Zd(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&!!e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height,l=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),e.navigator.mediaDevices.getUserMedia(r)})}}}function Jc(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Kc(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Bn(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function Yc(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(l,a){let c=i.apply(this,arguments);return c||(c=t(this,l),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const a=this._senders.indexOf(l);a!==-1&&this._senders.splice(a,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(t(this,s))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const l=this._senders.find(a=>a.track===s);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Xc(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);const s=function(a){const c={};return a.result().forEach(f=>{const p={id:f.id,timestamp:f.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[f.type]||f.type};f.names().forEach(g=>{p[g]=f.stat(g)}),c[p.id]=p}),c},l=function(a){return new Map(Object.keys(a).map(c=>[c,a[c]]))};if(arguments.length>=2){const a=function(c){i(l(s(c)))};return t.apply(this,[a,r])}return new Promise((a,c)=>{t.apply(this,[function(u){a(l(s(u)))},c])}).then(i,o)}}function Qc(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>ia(s,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Bn(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>ia(o,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(l=>{l.track===r&&(i?s=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(o?s=!0:o=l),l.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Zc(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,l){if(!l)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=t.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(a)===-1&&this._shimmedLocalStreams[l.id].push(a):this._shimmedLocalStreams[l.id]=[l,a],a};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(c=>{if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const a=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[s.id]=[s].concat(a)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const a=this._shimmedLocalStreams[l].indexOf(s);a!==-1&&this._shimmedLocalStreams[l].splice(a,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function el(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Zc(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(f=>this._reverseStreams[f.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(f=>{if(this.getSenders().find(g=>g.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const f=new e.MediaStream(u.getTracks());this._streams[u.id]=f,this._reverseStreams[f.id]=u,u=f}r.apply(this,[u])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const p=[].slice.call(arguments,1);if(p.length!==1||!p[0].getTracks().find(S=>S===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(S=>S.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const y=this._streams[f.id];if(y)y.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const S=new e.MediaStream([u]);this._streams[f.id]=S,this._reverseStreams[S.id]=f,this.addStream(S)}return this.getSenders().find(S=>S.track===u)};function o(c,u){let f=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const g=c._reverseStreams[p],y=c._streams[g.id];f=f.replace(new RegExp(y.id,"g"),g.id)}),new RTCSessionDescription({type:u.type,sdp:f})}function s(c,u){let f=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(p=>{const g=c._reverseStreams[p],y=c._streams[g.id];f=f.replace(new RegExp(g.id,"g"),y.id)}),new RTCSessionDescription({type:u.type,sdp:f})}["createOffer","createAnswer"].forEach(function(c){const u=e.RTCPeerConnection.prototype[c],f={[c](){const p=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[y=>{const S=o(this,y);p[0].apply(null,[S])},y=>{p[1]&&p[1].apply(null,y)},arguments[2]]):u.apply(this,arguments).then(y=>o(this,y))}};e.RTCPeerConnection.prototype[c]=f[c]});const l=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=s(this,arguments[0]),l.apply(this,arguments))};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=a.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let p;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(S=>u.track===S)&&(p=this._streams[g])}),p&&(p.getTracks().length===1?this.removeStream(this._reverseStreams[p.id]):p.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function no(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),!!e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function tl(e,t){Bn(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const sa=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream:Jc,shimOnTrack:Kc,shimGetSendersWithDtmf:Yc,shimGetStats:Xc,shimSenderReceiverGetStats:Qc,shimAddTrackRemoveTrackWithNative:Zc,shimAddTrackRemoveTrack:el,shimPeerConnection:no,fixNegotiationNeeded:tl,shimGetUserMedia:qc,shimGetDisplayMedia:Zd},Symbol.toStringTag,{value:"Module"}));function eh(e,t){let n=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&hi("RTCIceServer.url","RTCIceServer.urls");const o=typeof i=="string";return o&&(i=[i]),i=i.filter(s=>{if(s.indexOf("stun:")===0)return!1;const l=s.startsWith("turn")&&!s.startsWith("turn:[")&&s.includes("transport=udp");return l&&!n?(n=!0,!0):l&&!n}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}var $o={exports:{}};(function(e){var t={};t.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},t.splitSections=function(n){var r=n.split(`
m=`);return r.map(function(i,o){return(o>0?"m="+i:i).trim()+`\r
`})},t.getDescription=function(n){var r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){var r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(function(i){return i.indexOf(r)===0})},t.parseCandidate=function(n){var r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");for(var i={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]=r[o+1];break}return i},t.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substr(14).split(" ")},t.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},t.parseFmtp=function(n){for(var r={},i,o=n.substr(n.indexOf(" ")+1).split(";"),s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var o=[];Object.keys(n.parameters).forEach(function(s){n.parameters[s]?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(o){r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substr(r+1,o-r-1),i.value=n.substr(o+1)):i.attribute=n.substr(r+1),i},t.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},t.getMid=function(n){var r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},t.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},t.getDtlsParameters=function(n,r){var i=t.matchPrefix(n+r,"a=fingerprint:");return{role:"auto",fingerprints:i.map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(o){i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},t.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){var i=t.matchPrefix(n+r,"a=crypto:");return i.map(t.parseCryptoLine)},t.getIceParameters=function(n,r){var i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],o=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},t.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(n),o=i[0].split(" "),s=3;s<o.length;s++){var l=o[s],a=t.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(a){var c=t.parseRtpMap(a),u=t.matchPrefix(n,"a=fmtp:"+l+" ");switch(c.parameters=u.length?t.parseFmtp(u[0]):{},c.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(t.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break}}}return t.matchPrefix(n,"a=extmap:").forEach(function(f){r.headerExtensions.push(t.parseExtmap(f))}),r},t.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(s){return s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(s){i+=t.writeRtpMap(s),i+=t.writeFmtp(s),i+=t.writeRtcpFb(s)});var o=0;return r.codecs.forEach(function(s){s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(s){i+=t.writeExtmap(s)}),i},t.parseRtpEncodingParameters=function(n){var r=[],i=t.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=t.matchPrefix(n,"a=ssrc:").map(function(p){return t.parseSsrcMedia(p)}).filter(function(p){return p.attribute==="cname"}),a=l.length>0&&l[0].ssrc,c,u=t.matchPrefix(n,"a=ssrc-group:FID").map(function(p){var g=p.substr(17).split(" ");return g.map(function(y){return parseInt(y,10)})});u.length>0&&u[0].length>1&&u[0][0]===a&&(c=u[0][1]),i.codecs.forEach(function(p){if(p.name.toUpperCase()==="RTX"&&p.parameters.apt){var g={ssrc:a,codecPayloadType:parseInt(p.parameters.apt,10)};a&&c&&(g.rtx={ssrc:c}),r.push(g),o&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:a,mechanism:s?"red+ulpfec":"red"},r.push(g))}}),r.length===0&&a&&r.push({ssrc:a});var f=t.matchPrefix(n,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substr(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substr(5),10)*1e3*.95-50*40*8:f=void 0,r.forEach(function(p){p.maxBitrate=f})),r},t.parseRtcpParameters=function(n){var r={},i=t.matchPrefix(n,"a=ssrc:").map(function(l){return t.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var o=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;var s=t.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},t.parseMsid=function(n){var r,i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substr(7).split(" "),{stream:r[0],track:r[1]};var o=t.matchPrefix(n,"a=ssrc:").map(function(s){return t.parseSsrcMedia(s)}).filter(function(s){return s.attribute==="msid"});if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){var r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substr(19),10)),isNaN(o)&&(o=65536);var s=t.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:r.fmt,maxMessageSize:o};var l=t.matchPrefix(n,"a=sctpmap:");if(l.length>0){var a=t.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:o}}},t.writeSctpDescription=function(n,r){var i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(n,r,i){var o,s=r!==void 0?r:2;n?o=n:o=t.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.writeMediaSection=function(n,r,i,o){var s=t.writeRtpDescription(n.kind,r);if(s+=t.writeIceParameters(n.iceGatherer.getLocalParameters()),s+=t.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),s+="a=mid:"+n.mid+`\r
`,n.direction?s+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?s+=`a=sendrecv\r
`:n.rtpSender?s+=`a=sendonly\r
`:n.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,n.rtpSender){var l="msid:"+o.id+" "+n.rtpSender.track.id+`\r
`;s+="a="+l,s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+l,n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+l,s+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+`\r
`),s},t.getDirection=function(n,r){for(var i=t.splitLines(n),o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substr(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){var r=t.splitLines(n),i=r[0].split(" ");return i[0].substr(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){var r=t.splitLines(n),i=r[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){var r=t.matchPrefix(n,"o=")[0],i=r.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=t.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})($o);const Br=$o.exports;var ie=$o.exports;function th(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}function aa(e,t,n,r,i){var o=ie.writeRtpDescription(e.kind,t);if(o+=ie.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=ie.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":i||"active"),o+="a=mid:"+e.mid+`\r
`,e.rtpSender&&e.rtpReceiver?o+=`a=sendrecv\r
`:e.rtpSender?o+=`a=sendonly\r
`:e.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var l="msid:"+(r?r.id:"-")+" "+s+`\r
`;o+="a="+l,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+l,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+l,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+ie.localCName+`\r
`,e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+ie.localCName+`\r
`),o}function nh(e,t){var n=!1;return e=JSON.parse(JSON.stringify(e)),e.filter(function(r){if(r&&(r.urls||r.url)){var i=r.urls||r.url;r.url&&!r.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof i=="string";return o&&(i=[i]),i=i.filter(function(s){var l=s.indexOf("turn:")===0&&s.indexOf("transport=udp")!==-1&&s.indexOf("turn:[")===-1&&!n;return l?(n=!0,!0):s.indexOf("stun:")===0&&t>=14393&&s.indexOf("?transport=udp")===-1}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}function Ir(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(o,s){o=parseInt(o,10);for(var l=0;l<s.length;l++)if(s[l].payloadType===o||s[l].preferredPayloadType===o)return s[l]},i=function(o,s,l,a){var c=r(o.parameters.apt,l),u=r(s.parameters.apt,a);return c&&u&&c.name.toLowerCase()===u.name.toLowerCase()};return e.codecs.forEach(function(o){for(var s=0;s<t.codecs.length;s++){var l=t.codecs[s];if(o.name.toLowerCase()===l.name.toLowerCase()&&o.clockRate===l.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&l.parameters.apt&&!i(o,l,e.codecs,t.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(o.numChannels,l.numChannels),n.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(a){for(var c=0;c<o.rtcpFeedback.length;c++)if(o.rtcpFeedback[c].type===a.type&&o.rtcpFeedback[c].parameter===a.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(o){for(var s=0;s<t.headerExtensions.length;s++){var l=t.headerExtensions[s];if(o.uri===l.uri){n.headerExtensions.push(l);break}}}),n}function ca(e,t,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)!==-1}function Di(e,t){var n=e.getRemoteCandidates().find(function(r){return t.foundation===r.foundation&&t.ip===r.ip&&t.port===r.port&&t.priority===r.priority&&t.protocol===r.protocol&&t.type===r.type});return n||e.addRemoteCandidate(t),!n}function Je(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}var rh=function(e,t){function n(a,c){c.addTrack(a),c.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:a}))}function r(a,c){c.removeTrack(a),c.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:a}))}function i(a,c,u,f){var p=new Event("track");p.track=c,p.receiver=u,p.transceiver={receiver:u},p.streams=f,e.setTimeout(function(){a._dispatchEvent("track",p)})}var o=function(a){var c=this,u=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(p){c[p]=u[p].bind(u)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",a=JSON.parse(JSON.stringify(a||{})),this.usingBundle=a.bundlePolicy==="max-bundle",a.rtcpMuxPolicy==="negotiate")throw Je("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(a.rtcpMuxPolicy||(a.rtcpMuxPolicy="require"),a.iceTransportPolicy){case"all":case"relay":break;default:a.iceTransportPolicy="all";break}switch(a.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:a.bundlePolicy="balanced";break}if(a.iceServers=nh(a.iceServers||[],t),this._iceGatherers=[],a.iceCandidatePoolSize)for(var f=a.iceCandidatePoolSize;f>0;f--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:a.iceServers,gatherPolicy:a.iceTransportPolicy}));else a.iceCandidatePoolSize=0;this._config=a,this.transceivers=[],this._sdpSessionId=ie.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(a,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+a]=="function"&&this["on"+a](c))},o.prototype._emitGatheringStateChange=function(){var a=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",a)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(a,c){var u=this.transceivers.length>0,f={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:a,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&u)f.iceTransport=this.transceivers[0].iceTransport,f.dtlsTransport=this.transceivers[0].dtlsTransport;else{var p=this._createIceAndDtlsTransports();f.iceTransport=p.iceTransport,f.dtlsTransport=p.dtlsTransport}return c||this.transceivers.push(f),f},o.prototype.addTrack=function(a,c){if(this._isClosed)throw Je("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var u=this.transceivers.find(function(g){return g.track===a});if(u)throw Je("InvalidAccessError","Track already exists.");for(var f,p=0;p<this.transceivers.length;p++)!this.transceivers[p].track&&this.transceivers[p].kind===a.kind&&(f=this.transceivers[p]);return f||(f=this._createTransceiver(a.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),f.track=a,f.stream=c,f.rtpSender=new e.RTCRtpSender(a,f.dtlsTransport),f.rtpSender},o.prototype.addStream=function(a){var c=this;if(t>=15025)a.getTracks().forEach(function(f){c.addTrack(f,a)});else{var u=a.clone();a.getTracks().forEach(function(f,p){var g=u.getTracks()[p];f.addEventListener("enabled",function(y){g.enabled=y.enabled})}),u.getTracks().forEach(function(f){c.addTrack(f,u)})}},o.prototype.removeTrack=function(a){if(this._isClosed)throw Je("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(a instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(p){return p.rtpSender===a});if(!c)throw Je("InvalidAccessError","Sender was not created by this connection.");var u=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var f=this.transceivers.map(function(p){return p.stream});f.indexOf(u)===-1&&this.localStreams.indexOf(u)>-1&&this.localStreams.splice(this.localStreams.indexOf(u),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(a){var c=this;a.getTracks().forEach(function(u){var f=c.getSenders().find(function(p){return p.track===u});f&&c.removeTrack(f)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})},o.prototype._createIceGatherer=function(a,c){var u=this;if(c&&a>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var f=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(f,"state",{value:"new",writable:!0}),this.transceivers[a].bufferedCandidateEvents=[],this.transceivers[a].bufferCandidates=function(p){var g=!p.candidate||Object.keys(p.candidate).length===0;f.state=g?"completed":"gathering",u.transceivers[a].bufferedCandidateEvents!==null&&u.transceivers[a].bufferedCandidateEvents.push(p)},f.addEventListener("localcandidate",this.transceivers[a].bufferCandidates),f},o.prototype._gather=function(a,c){var u=this,f=this.transceivers[c].iceGatherer;if(!f.onlocalcandidate){var p=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,f.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),f.onlocalcandidate=function(g){if(!(u.usingBundle&&c>0)){var y=new Event("icecandidate");y.candidate={sdpMid:a,sdpMLineIndex:c};var S=g.candidate,A=!S||Object.keys(S).length===0;if(A)(f.state==="new"||f.state==="gathering")&&(f.state="completed");else{f.state==="new"&&(f.state="gathering"),S.component=1,S.ufrag=f.getLocalParameters().usernameFragment;var E=ie.writeCandidate(S);y.candidate=Object.assign(y.candidate,ie.parseCandidate(E)),y.candidate.candidate=E,y.candidate.toJSON=function(){return{candidate:y.candidate.candidate,sdpMid:y.candidate.sdpMid,sdpMLineIndex:y.candidate.sdpMLineIndex,usernameFragment:y.candidate.usernameFragment}}}var k=ie.getMediaSections(u._localDescription.sdp);A?k[y.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:k[y.candidate.sdpMLineIndex]+="a="+y.candidate.candidate+`\r
`,u._localDescription.sdp=ie.getDescription(u._localDescription.sdp)+k.join("");var Y=u.transceivers.every(function(B){return B.iceGatherer&&B.iceGatherer.state==="completed"});u.iceGatheringState!=="gathering"&&(u.iceGatheringState="gathering",u._emitGatheringStateChange()),A||u._dispatchEvent("icecandidate",y),Y&&(u._dispatchEvent("icecandidate",new Event("icecandidate")),u.iceGatheringState="complete",u._emitGatheringStateChange())}},e.setTimeout(function(){p.forEach(function(g){f.onlocalcandidate(g)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var a=this,c=new e.RTCIceTransport(null);c.onicestatechange=function(){a._updateIceConnectionState(),a._updateConnectionState()};var u=new e.RTCDtlsTransport(c);return u.ondtlsstatechange=function(){a._updateConnectionState()},u.onerror=function(){Object.defineProperty(u,"state",{value:"failed",writable:!0}),a._updateConnectionState()},{iceTransport:c,dtlsTransport:u}},o.prototype._disposeIceAndDtlsTransports=function(a){var c=this.transceivers[a].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[a].iceGatherer);var u=this.transceivers[a].iceTransport;u&&(delete u.onicestatechange,delete this.transceivers[a].iceTransport);var f=this.transceivers[a].dtlsTransport;f&&(delete f.ondtlsstatechange,delete f.onerror,delete this.transceivers[a].dtlsTransport)},o.prototype._transceive=function(a,c,u){var f=Ir(a.localCapabilities,a.remoteCapabilities);c&&a.rtpSender&&(f.encodings=a.sendEncodingParameters,f.rtcp={cname:ie.localCName,compound:a.rtcpParameters.compound},a.recvEncodingParameters.length&&(f.rtcp.ssrc=a.recvEncodingParameters[0].ssrc),a.rtpSender.send(f)),u&&a.rtpReceiver&&f.codecs.length>0&&(a.kind==="video"&&a.recvEncodingParameters&&t<15019&&a.recvEncodingParameters.forEach(function(p){delete p.rtx}),a.recvEncodingParameters.length?f.encodings=a.recvEncodingParameters:f.encodings=[{}],f.rtcp={compound:a.rtcpParameters.compound},a.rtcpParameters.cname&&(f.rtcp.cname=a.rtcpParameters.cname),a.sendEncodingParameters.length&&(f.rtcp.ssrc=a.sendEncodingParameters[0].ssrc),a.rtpReceiver.receive(f))},o.prototype.setLocalDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(Je("TypeError",'Unsupported type "'+a.type+'"'));if(!ca("setLocalDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(Je("InvalidStateError","Can not set local "+a.type+" in state "+c.signalingState));var u,f;if(a.type==="offer")u=ie.splitSections(a.sdp),f=u.shift(),u.forEach(function(g,y){var S=ie.parseRtpParameters(g);c.transceivers[y].localCapabilities=S}),c.transceivers.forEach(function(g,y){c._gather(g.mid,y)});else if(a.type==="answer"){u=ie.splitSections(c._remoteDescription.sdp),f=u.shift();var p=ie.matchPrefix(f,"a=ice-lite").length>0;u.forEach(function(g,y){var S=c.transceivers[y],A=S.iceGatherer,E=S.iceTransport,k=S.dtlsTransport,Y=S.localCapabilities,B=S.remoteCapabilities,H=ie.isRejected(g)&&ie.matchPrefix(g,"a=bundle-only").length===0;if(!H&&!S.rejected){var W=ie.getIceParameters(g,f),Q=ie.getDtlsParameters(g,f);p&&(Q.role="server"),(!c.usingBundle||y===0)&&(c._gather(S.mid,y),E.state==="new"&&E.start(A,W,p?"controlling":"controlled"),k.state==="new"&&k.start(Q));var te=Ir(Y,B);c._transceive(S,te.codecs.length>0,!1)}})}return c._localDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(Je("TypeError",'Unsupported type "'+a.type+'"'));if(!ca("setRemoteDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(Je("InvalidStateError","Can not set remote "+a.type+" in state "+c.signalingState));var u={};c.remoteStreams.forEach(function(E){u[E.id]=E});var f=[],p=ie.splitSections(a.sdp),g=p.shift(),y=ie.matchPrefix(g,"a=ice-lite").length>0,S=ie.matchPrefix(g,"a=group:BUNDLE ").length>0;c.usingBundle=S;var A=ie.matchPrefix(g,"a=ice-options:")[0];return A?c.canTrickleIceCandidates=A.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,p.forEach(function(E,k){var Y=ie.splitLines(E),B=ie.getKind(E),H=ie.isRejected(E)&&ie.matchPrefix(E,"a=bundle-only").length===0,W=Y[0].substr(2).split(" ")[2],Q=ie.getDirection(E,g),te=ie.parseMsid(E),ge=ie.getMid(E)||ie.generateIdentifier();if(H||B==="application"&&(W==="DTLS/SCTP"||W==="UDP/DTLS/SCTP")){c.transceivers[k]={mid:ge,kind:B,protocol:W,rejected:!0};return}!H&&c.transceivers[k]&&c.transceivers[k].rejected&&(c.transceivers[k]=c._createTransceiver(B,!0));var J,Ee,Oe,Be,be,Re,Pe,fe,ce,Ne=ie.parseRtpParameters(E),Xe,je;H||(Xe=ie.getIceParameters(E,g),je=ie.getDtlsParameters(E,g),je.role="client"),Pe=ie.parseRtpEncodingParameters(E);var ke=ie.parseRtcpParameters(E),N=ie.matchPrefix(E,"a=end-of-candidates",g).length>0,L=ie.matchPrefix(E,"a=candidate:").map(function(F){return ie.parseCandidate(F)}).filter(function(F){return F.component===1});if((a.type==="offer"||a.type==="answer")&&!H&&S&&k>0&&c.transceivers[k]&&(c._disposeIceAndDtlsTransports(k),c.transceivers[k].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[k].iceTransport=c.transceivers[0].iceTransport,c.transceivers[k].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[k].rtpSender&&c.transceivers[k].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[k].rtpReceiver&&c.transceivers[k].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),a.type==="offer"&&!H){J=c.transceivers[k]||c._createTransceiver(B),J.mid=ge,J.iceGatherer||(J.iceGatherer=c._createIceGatherer(k,S)),L.length&&J.iceTransport.state==="new"&&(N&&(!S||k===0)?J.iceTransport.setRemoteCandidates(L):L.forEach(function(F){Di(J.iceTransport,F)})),fe=e.RTCRtpReceiver.getCapabilities(B),t<15019&&(fe.codecs=fe.codecs.filter(function(F){return F.name!=="rtx"})),Re=J.sendEncodingParameters||[{ssrc:(2*k+2)*1001}];var T=!1;if(Q==="sendrecv"||Q==="sendonly"){if(T=!J.rtpReceiver,be=J.rtpReceiver||new e.RTCRtpReceiver(J.dtlsTransport,B),T){var j;ce=be.track,te&&te.stream==="-"||(te?(u[te.stream]||(u[te.stream]=new e.MediaStream,Object.defineProperty(u[te.stream],"id",{get:function(){return te.stream}})),Object.defineProperty(ce,"id",{get:function(){return te.track}}),j=u[te.stream]):(u.default||(u.default=new e.MediaStream),j=u.default)),j&&(n(ce,j),J.associatedRemoteMediaStreams.push(j)),f.push([ce,be,j])}}else J.rtpReceiver&&J.rtpReceiver.track&&(J.associatedRemoteMediaStreams.forEach(function(F){var Z=F.getTracks().find(function(q){return q.id===J.rtpReceiver.track.id});Z&&r(Z,F)}),J.associatedRemoteMediaStreams=[]);J.localCapabilities=fe,J.remoteCapabilities=Ne,J.rtpReceiver=be,J.rtcpParameters=ke,J.sendEncodingParameters=Re,J.recvEncodingParameters=Pe,c._transceive(c.transceivers[k],!1,T)}else if(a.type==="answer"&&!H){J=c.transceivers[k],Ee=J.iceGatherer,Oe=J.iceTransport,Be=J.dtlsTransport,be=J.rtpReceiver,Re=J.sendEncodingParameters,fe=J.localCapabilities,c.transceivers[k].recvEncodingParameters=Pe,c.transceivers[k].remoteCapabilities=Ne,c.transceivers[k].rtcpParameters=ke,L.length&&Oe.state==="new"&&((y||N)&&(!S||k===0)?Oe.setRemoteCandidates(L):L.forEach(function(F){Di(J.iceTransport,F)})),(!S||k===0)&&(Oe.state==="new"&&Oe.start(Ee,Xe,"controlling"),Be.state==="new"&&Be.start(je));var x=Ir(J.localCapabilities,J.remoteCapabilities),$=x.codecs.filter(function(F){return F.name.toLowerCase()==="rtx"}).length;!$&&J.sendEncodingParameters[0].rtx&&delete J.sendEncodingParameters[0].rtx,c._transceive(J,Q==="sendrecv"||Q==="recvonly",Q==="sendrecv"||Q==="sendonly"),be&&(Q==="sendrecv"||Q==="sendonly")?(ce=be.track,te?(u[te.stream]||(u[te.stream]=new e.MediaStream),n(ce,u[te.stream]),f.push([ce,be,u[te.stream]])):(u.default||(u.default=new e.MediaStream),n(ce,u.default),f.push([ce,be,u.default]))):delete J.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=a.type==="offer"?"active":"passive"),c._remoteDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(u).forEach(function(E){var k=u[E];if(k.getTracks().length){if(c.remoteStreams.indexOf(k)===-1){c.remoteStreams.push(k);var Y=new Event("addstream");Y.stream=k,e.setTimeout(function(){c._dispatchEvent("addstream",Y)})}f.forEach(function(B){var H=B[0],W=B[1];k.id===B[2].id&&i(c,H,W,[k])})}}),f.forEach(function(E){E[2]||i(c,E[0],E[1],[])}),e.setTimeout(function(){!(c&&c.transceivers)||c.transceivers.forEach(function(E){E.iceTransport&&E.iceTransport.state==="new"&&E.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),E.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop(),a.dtlsTransport&&a.dtlsTransport.stop(),a.rtpSender&&a.rtpSender.stop(),a.rtpReceiver&&a.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(a){this.signalingState=a;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},o.prototype._maybeFireNegotiationNeeded=function(){var a=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,e.setTimeout(function(){if(a.needNegotiation){a.needNegotiation=!1;var c=new Event("negotiationneeded");a._dispatchEvent("negotiationneeded",c)}},0))},o.prototype._updateIceConnectionState=function(){var a,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(f){f.iceTransport&&!f.rejected&&c[f.iceTransport.state]++}),a="new",c.failed>0?a="failed":c.checking>0?a="checking":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0?a="connected":c.completed>0&&(a="completed"),a!==this.iceConnectionState){this.iceConnectionState=a;var u=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",u)}},o.prototype._updateConnectionState=function(){var a,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(f){f.iceTransport&&f.dtlsTransport&&!f.rejected&&(c[f.iceTransport.state]++,c[f.dtlsTransport.state]++)}),c.connected+=c.completed,a="new",c.failed>0?a="failed":c.connecting>0?a="connecting":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0&&(a="connected"),a!==this.connectionState){this.connectionState=a;var u=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",u)}},o.prototype.createOffer=function(){var a=this;if(a._isClosed)return Promise.reject(Je("InvalidStateError","Can not call createOffer after close"));var c=a.transceivers.filter(function(y){return y.kind==="audio"}).length,u=a.transceivers.filter(function(y){return y.kind==="video"}).length,f=arguments[0];if(f){if(f.mandatory||f.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");f.offerToReceiveAudio!==void 0&&(f.offerToReceiveAudio===!0?c=1:f.offerToReceiveAudio===!1?c=0:c=f.offerToReceiveAudio),f.offerToReceiveVideo!==void 0&&(f.offerToReceiveVideo===!0?u=1:f.offerToReceiveVideo===!1?u=0:u=f.offerToReceiveVideo)}for(a.transceivers.forEach(function(y){y.kind==="audio"?(c--,c<0&&(y.wantReceive=!1)):y.kind==="video"&&(u--,u<0&&(y.wantReceive=!1))});c>0||u>0;)c>0&&(a._createTransceiver("audio"),c--),u>0&&(a._createTransceiver("video"),u--);var p=ie.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.transceivers.forEach(function(y,S){var A=y.track,E=y.kind,k=y.mid||ie.generateIdentifier();y.mid=k,y.iceGatherer||(y.iceGatherer=a._createIceGatherer(S,a.usingBundle));var Y=e.RTCRtpSender.getCapabilities(E);t<15019&&(Y.codecs=Y.codecs.filter(function(H){return H.name!=="rtx"})),Y.codecs.forEach(function(H){H.name==="H264"&&H.parameters["level-asymmetry-allowed"]===void 0&&(H.parameters["level-asymmetry-allowed"]="1"),y.remoteCapabilities&&y.remoteCapabilities.codecs&&y.remoteCapabilities.codecs.forEach(function(W){H.name.toLowerCase()===W.name.toLowerCase()&&H.clockRate===W.clockRate&&(H.preferredPayloadType=W.payloadType)})}),Y.headerExtensions.forEach(function(H){var W=y.remoteCapabilities&&y.remoteCapabilities.headerExtensions||[];W.forEach(function(Q){H.uri===Q.uri&&(H.id=Q.id)})});var B=y.sendEncodingParameters||[{ssrc:(2*S+1)*1001}];A&&t>=15019&&E==="video"&&!B[0].rtx&&(B[0].rtx={ssrc:B[0].ssrc+1}),y.wantReceive&&(y.rtpReceiver=new e.RTCRtpReceiver(y.dtlsTransport,E)),y.localCapabilities=Y,y.sendEncodingParameters=B}),a._config.bundlePolicy!=="max-compat"&&(p+="a=group:BUNDLE "+a.transceivers.map(function(y){return y.mid}).join(" ")+`\r
`),p+=`a=ice-options:trickle\r
`,a.transceivers.forEach(function(y,S){p+=aa(y,y.localCapabilities,"offer",y.stream,a._dtlsRole),p+=`a=rtcp-rsize\r
`,y.iceGatherer&&a.iceGatheringState!=="new"&&(S===0||!a.usingBundle)&&(y.iceGatherer.getLocalCandidates().forEach(function(A){A.component=1,p+="a="+ie.writeCandidate(A)+`\r
`}),y.iceGatherer.state==="completed"&&(p+=`a=end-of-candidates\r
`))});var g=new e.RTCSessionDescription({type:"offer",sdp:p});return Promise.resolve(g)},o.prototype.createAnswer=function(){var a=this;if(a._isClosed)return Promise.reject(Je("InvalidStateError","Can not call createAnswer after close"));if(!(a.signalingState==="have-remote-offer"||a.signalingState==="have-local-pranswer"))return Promise.reject(Je("InvalidStateError","Can not call createAnswer in signalingState "+a.signalingState));var c=ie.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.usingBundle&&(c+="a=group:BUNDLE "+a.transceivers.map(function(p){return p.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var u=ie.getMediaSections(a._remoteDescription.sdp).length;a.transceivers.forEach(function(p,g){if(!(g+1>u)){if(p.rejected){p.kind==="application"?p.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+p.protocol+` webrtc-datachannel\r
`:p.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:p.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+p.mid+`\r
`;return}if(p.stream){var y;p.kind==="audio"?y=p.stream.getAudioTracks()[0]:p.kind==="video"&&(y=p.stream.getVideoTracks()[0]),y&&t>=15019&&p.kind==="video"&&!p.sendEncodingParameters[0].rtx&&(p.sendEncodingParameters[0].rtx={ssrc:p.sendEncodingParameters[0].ssrc+1})}var S=Ir(p.localCapabilities,p.remoteCapabilities),A=S.codecs.filter(function(E){return E.name.toLowerCase()==="rtx"}).length;!A&&p.sendEncodingParameters[0].rtx&&delete p.sendEncodingParameters[0].rtx,c+=aa(p,S,"answer",p.stream,a._dtlsRole),p.rtcpParameters&&p.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var f=new e.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(f)},o.prototype.addIceCandidate=function(a){var c=this,u;return a&&!(a.sdpMLineIndex!==void 0||a.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(f,p){if(c._remoteDescription)if(!a||a.candidate==="")for(var g=0;g<c.transceivers.length&&!(!c.transceivers[g].rejected&&(c.transceivers[g].iceTransport.addRemoteCandidate({}),u=ie.getMediaSections(c._remoteDescription.sdp),u[g]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=ie.getDescription(c._remoteDescription.sdp)+u.join(""),c.usingBundle));g++);else{var y=a.sdpMLineIndex;if(a.sdpMid){for(var S=0;S<c.transceivers.length;S++)if(c.transceivers[S].mid===a.sdpMid){y=S;break}}var A=c.transceivers[y];if(A){if(A.rejected)return f();var E=Object.keys(a.candidate).length>0?ie.parseCandidate(a.candidate):{};if(E.protocol==="tcp"&&(E.port===0||E.port===9)||E.component&&E.component!==1)return f();if((y===0||y>0&&A.iceTransport!==c.transceivers[0].iceTransport)&&!Di(A.iceTransport,E))return p(Je("OperationError","Can not add ICE candidate"));var k=a.candidate.trim();k.indexOf("a=")===0&&(k=k.substr(2)),u=ie.getMediaSections(c._remoteDescription.sdp),u[y]+="a="+(E.type?k:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=ie.getDescription(c._remoteDescription.sdp)+u.join("")}else return p(Je("OperationError","Can not add ICE candidate"))}else return p(Je("InvalidStateError","Can not add ICE candidate without a remote description"));f()})},o.prototype.getStats=function(a){if(a&&a instanceof e.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(f){f.rtpSender&&f.rtpSender.track===a?c=f.rtpSender:f.rtpReceiver&&f.rtpReceiver.track===a&&(c=f.rtpReceiver)}),!c)throw Je("InvalidAccessError","Invalid selector.");return c.getStats()}var u=[];return this.transceivers.forEach(function(f){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(p){f[p]&&u.push(f[p].getStats())})}),Promise.all(u).then(function(f){var p=new Map;return f.forEach(function(g){g.forEach(function(y){p.set(y.id,y)})}),p})};var s=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];s.forEach(function(a){var c=e[a];if(c&&c.prototype&&c.prototype.getStats){var u=c.prototype.getStats;c.prototype.getStats=function(){return u.apply(this).then(function(f){var p=new Map;return Object.keys(f).forEach(function(g){f[g].type=th(f[g]),p.set(g,f[g])}),p})}}});var l=["createOffer","createAnswer"];return l.forEach(function(a){var c=o.prototype[a];o.prototype[a]=function(){var u=arguments;return typeof u[0]=="function"||typeof u[1]=="function"?c.apply(this,[arguments[2]]).then(function(f){typeof u[0]=="function"&&u[0].apply(null,[f])},function(f){typeof u[1]=="function"&&u[1].apply(null,[f])}):c.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(a){var c=o.prototype[a];o.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"||typeof u[2]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)},function(f){typeof u[2]=="function"&&u[2].apply(null,[f])}):c.apply(this,arguments)}}),["getStats"].forEach(function(a){var c=o.prototype[a];o.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)}):c.apply(this,arguments)}}),o};function nl(e){const t=e&&e.navigator,n=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},r=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(i){return r(i).catch(o=>Promise.reject(n(o)))}}function rl(e){"getDisplayMedia"in e.navigator&&(!e.navigator.mediaDevices||e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function ro(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(i){return i}),e.RTCSessionDescription||(e.RTCSessionDescription=function(i){return i}),t.version<15025)){const r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new e.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=rh(e,t.version);e.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=eh(i.iceServers,t.version),Fo("ICE servers after filtering:",i.iceServers)),new n(i)},e.RTCPeerConnection.prototype=n.prototype}function il(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}const la=Object.freeze(Object.defineProperty({__proto__:null,shimPeerConnection:ro,shimReplaceTrack:il,shimGetUserMedia:nl,shimGetDisplayMedia:rl},Symbol.toStringTag,{value:"Module"}));function ol(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){hi("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,l,a){l in s&&!(a in s)&&(s[a]=s[l],delete s[l])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const l=s.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[l])}}}}function ih(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||!e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function sl(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function io(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=e.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,s,l]=arguments;return r.apply(this,[o||null]).then(a=>{if(t.version<53&&!s)try{a.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;a.forEach((u,f)=>{a.set(f,Object.assign({},u,{type:n[u.type]||u.type}))})}return a}).then(s,l)}}function al(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function cl(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Bn(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ll(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){hi("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function ul(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function fl(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=t.apply(this,arguments);if(i){const{sender:s}=o,l=s.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r.sendEncodings,s.sendEncodings=r.sendEncodings,this.setParametersPromises.push(s.setParameters(l).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function pl(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function dl(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function hl(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}const ua=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack:sl,shimPeerConnection:io,shimSenderGetStats:al,shimReceiverGetStats:cl,shimRemoveStream:ll,shimRTCDataChannel:ul,shimAddTransceiver:fl,shimGetParameters:pl,shimCreateOffer:dl,shimCreateAnswer:hl,shimGetUserMedia:ol,shimGetDisplayMedia:ih},Symbol.toStringTag,{value:"Module"}));function ml(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function gl(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),t.apply(r,arguments)}}}function vl(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(c,u){const f=arguments.length>=2?arguments[2]:arguments[0],p=n.apply(this,[f]);return u?(p.then(c,u),Promise.resolve()):p},t.createAnswer=function(c,u){const f=arguments.length>=2?arguments[2]:arguments[0],p=r.apply(this,[f]);return u?(p.then(c,u),Promise.resolve()):p};let l=function(a,c,u){const f=i.apply(this,[a]);return u?(f.then(c,u),Promise.resolve()):f};t.setLocalDescription=l,l=function(a,c,u){const f=o.apply(this,[a]);return u?(f.then(c,u),Promise.resolve()):f},t.setRemoteDescription=l,l=function(a,c,u){const f=s.apply(this,[a]);return u?(f.then(c,u),Promise.resolve()):f},t.addIceCandidate=l}function yl(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(_l(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(r,i,o){t.mediaDevices.getUserMedia(r).then(i,o)}.bind(t))}function _l(e){return e&&e.video!==void 0?Object.assign({},e,{video:Wc(e.video)}):e}function bl(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let l=r.iceServers[s];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(hi("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(r.iceServers[s])}r.iceServers=o}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function Cl(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Tl(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return t.apply(this,arguments)}}function Sl(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const fa=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI:ml,shimRemoteStreamsAPI:gl,shimCallbacksAPI:vl,shimGetUserMedia:yl,shimConstraints:_l,shimRTCIceServerUrls:bl,shimTrackEventTransceiver:Cl,shimCreateOfferLegacy:Tl,shimAudioContext:Sl},Symbol.toStringTag,{value:"Module"}));function Fr(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new t(r),o=Br.parseCandidate(r.candidate),s=Object.assign(i,o);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Bn(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Jn(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const a=Br.splitSections(l.sdp);return a.shift(),a.some(c=>{const u=Br.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(l){const a=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;const c=parseInt(a[1],10);return c!==c?-1:c},i=function(l){let a=65536;return t.browser==="firefox"&&(t.version<57?l===-1?a=16384:a=2147483637:t.version<60?a=t.version===57?65535:65536:a=2147483637),a},o=function(l,a){let c=65536;t.browser==="firefox"&&t.version===57&&(c=65535);const u=Br.matchPrefix(l.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substr(19),10):t.browser==="firefox"&&a!==-1&&(c=2147483637),c},s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:a}=this.getConfiguration();a==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const a=r(arguments[0]),c=i(a),u=o(arguments[0],a);let f;c===0&&u===0?f=Number.POSITIVE_INFINITY:c===0||u===0?f=Math.max(c,u):f=Math.min(c,u);const p={};Object.defineProperty(p,"maxMessageSize",{get(){return f}}),this._sctp=p}return s.apply(this,arguments)}}function Kn(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const o=r.send;r.send=function(){const l=arguments[0],a=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&a>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Bn(e,"datachannel",r=>(t(r.channel,r.target),r))}function oo(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function so(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function $r(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const oh=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate:Fr,shimMaxMessageSize:Jn,shimSendThrowTypeError:Kn,shimConnectionState:oo,removeExtmapAllowMixed:so,shimAddIceCandidateNullOrEmpty:$r},Symbol.toStringTag,{value:"Module"}));function sh({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=Fo,r=Qd(e),i={browserDetails:r,commonShim:oh,extractVersion:qn,disableLog:Yd,disableWarnings:Xd};switch(r.browser){case"chrome":if(!sa||!no||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=sa,$r(e,r),qc(e,r),Jc(e),no(e,r),Kc(e),el(e,r),Yc(e),Xc(e),Qc(e),tl(e,r),Fr(e),oo(e),Jn(e,r),Kn(e),so(e,r);break;case"firefox":if(!ua||!io||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=ua,$r(e,r),ol(e,r),io(e,r),sl(e),ll(e),al(e),cl(e),ul(e),fl(e),pl(e),dl(e),hl(e),Fr(e),oo(e),Jn(e,r),Kn(e);break;case"edge":if(!la||!ro||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=la,nl(e),rl(e),ro(e,r),il(e),Jn(e,r),Kn(e);break;case"safari":if(!fa||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=fa,$r(e,r),bl(e),Tl(e),vl(e),ml(e),gl(e),Cl(e),yl(e),Sl(e),Fr(e),Jn(e,r),Kn(e),so(e,r);break;default:n("Unsupported browser!");break}return i}const pa=sh({window:typeof window>"u"?void 0:window});function Mt(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var Ni=pa.default||pa,Hn=new(function(){function e(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return e.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},e.prototype.isBrowserSupported=function(){var t=this.getBrowser(),n=this.getVersion(),r=this.supportedBrowsers.includes(t);return r?t==="chrome"?n>=this.minChromeVersion:t==="firefox"?n>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1},e.prototype.getBrowser=function(){return Ni.browserDetails.browser},e.prototype.getVersion=function(){return Ni.browserDetails.version||0},e.prototype.isUnifiedPlanSupported=function(){var t=this.getBrowser(),n=Ni.browserDetails.version||0;if(t==="chrome"&&n<this.minChromeVersion)return!1;if(t==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i},e.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},e}()),da={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},ah=function(){function e(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=da,this.browser=Hn.getBrowser(),this.browserVersion=Hn.getVersion(),this.supports=function(){var t={browser:Hn.isBrowserSupported(),webRTC:Hn.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;var n;try{n=new RTCPeerConnection(da),t.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!Hn.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return t}(),this.pack=na.pack,this.unpack=na.unpack,this._dataCount=1}return e.prototype.noop=function(){},e.prototype.validateId=function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t)},e.prototype.chunk=function(t){for(var n=[],r=t.size,i=Math.ceil(r/_e.chunkedMTU),o=0,s=0;s<r;){var l=Math.min(r,s+_e.chunkedMTU),a=t.slice(s,l),c={__peerData:this._dataCount,n:o,data:a,total:i};n.push(c),s=l,o++}return this._dataCount++,n},e.prototype.blobToArrayBuffer=function(t,n){var r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(t),r},e.prototype.binaryStringToArrayBuffer=function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r)&255;return n.buffer},e.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},e.prototype.isSecure=function(){return location.protocol==="https:"},e}(),_e=new ah,El={};Mt(El,"Peer",()=>lo,e=>lo=e);var gr={},ch=Object.prototype.hasOwnProperty,nt="~";function dr(){}Object.create&&(dr.prototype=Object.create(null),new dr().__proto__||(nt=!1));function lh(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function Rl(e,t,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new lh(n,r||e,i),s=nt?nt+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function Ur(e,t){--e._eventsCount===0?e._events=new dr:delete e._events[t]}function Ye(){this._events=new dr,this._eventsCount=0}Ye.prototype.eventNames=function(){var t=[],n,r;if(this._eventsCount===0)return t;for(r in n=this._events)ch.call(n,r)&&t.push(nt?r.slice(1):r);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t};Ye.prototype.listeners=function(t){var n=nt?nt+t:t,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s};Ye.prototype.listenerCount=function(t){var n=nt?nt+t:t,r=this._events[n];return r?r.fn?1:r.length:0};Ye.prototype.emit=function(t,n,r,i,o,s){var l=nt?nt+t:t;if(!this._events[l])return!1;var a=this._events[l],c=arguments.length,u,f;if(a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,i),!0;case 5:return a.fn.call(a.context,n,r,i,o),!0;case 6:return a.fn.call(a.context,n,r,i,o,s),!0}for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];a.fn.apply(a.context,u)}else{var p=a.length,g;for(f=0;f<p;f++)switch(a[f].once&&this.removeListener(t,a[f].fn,void 0,!0),c){case 1:a[f].fn.call(a[f].context);break;case 2:a[f].fn.call(a[f].context,n);break;case 3:a[f].fn.call(a[f].context,n,r);break;case 4:a[f].fn.call(a[f].context,n,r,i);break;default:if(!u)for(g=1,u=new Array(c-1);g<c;g++)u[g-1]=arguments[g];a[f].fn.apply(a[f].context,u)}}return!0};Ye.prototype.on=function(t,n,r){return Rl(this,t,n,r,!1)};Ye.prototype.once=function(t,n,r){return Rl(this,t,n,r,!0)};Ye.prototype.removeListener=function(t,n,r,i){var o=nt?nt+t:t;if(!this._events[o])return this;if(!n)return Ur(this,o),this;var s=this._events[o];if(s.fn)s.fn===n&&(!i||s.once)&&(!r||s.context===r)&&Ur(this,o);else{for(var l=0,a=[],c=s.length;l<c;l++)(s[l].fn!==n||i&&!s[l].once||r&&s[l].context!==r)&&a.push(s[l]);a.length?this._events[o]=a.length===1?a[0]:a:Ur(this,o)}return this};Ye.prototype.removeAllListeners=function(t){var n;return t?(n=nt?nt+t:t,this._events[n]&&Ur(this,n)):(this._events=new dr,this._eventsCount=0),this};Ye.prototype.off=Ye.prototype.removeListener;Ye.prototype.addListener=Ye.prototype.on;Ye.prefixed=nt;Ye.EventEmitter=Ye;gr=Ye;var V={};Mt(V,"LogLevel",()=>it,e=>it=e);Mt(V,"default",()=>ha,e=>ha=e);var cn=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},ln=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},uh="PeerJS: ",it;(function(e){e[e.Disabled=0]="Disabled",e[e.Errors=1]="Errors",e[e.Warnings=2]="Warnings",e[e.All=3]="All"})(it||(it={}));var fh=function(){function e(){this._logLevel=it.Disabled}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=it.All&&this._print.apply(this,ln([it.All],cn(t),!1))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=it.Warnings&&this._print.apply(this,ln([it.Warnings],cn(t),!1))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logLevel>=it.Errors&&this._print.apply(this,ln([it.Errors],cn(t),!1))},e.prototype.setLogFunction=function(t){this._print=t},e.prototype._print=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=ln([uh],cn(n),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);t>=it.All?console.log.apply(console,ln([],cn(i),!1)):t>=it.Warnings?console.warn.apply(console,ln(["WARNING"],cn(i),!1)):t>=it.Errors&&console.error.apply(console,ln(["ERROR"],cn(i),!1))},e}(),ha=new fh,Pl={};Mt(Pl,"Socket",()=>ma,e=>ma=e);var ht;(function(e){e.Data="data",e.Media="media"})(ht||(ht={}));var we;(function(e){e.BrowserIncompatible="browser-incompatible",e.Disconnected="disconnected",e.InvalidID="invalid-id",e.InvalidKey="invalid-key",e.Network="network",e.PeerUnavailable="peer-unavailable",e.SslUnavailable="ssl-unavailable",e.ServerError="server-error",e.SocketError="socket-error",e.SocketClosed="socket-closed",e.UnavailableID="unavailable-id",e.WebRTC="webrtc"})(we||(we={}));var Bt;(function(e){e.Binary="binary",e.BinaryUTF8="binary-utf8",e.JSON="json"})(Bt||(Bt={}));var Ft;(function(e){e.Message="message",e.Disconnected="disconnected",e.Error="error",e.Close="close"})(Ft||(Ft={}));var ze;(function(e){e.Heartbeat="HEARTBEAT",e.Candidate="CANDIDATE",e.Offer="OFFER",e.Answer="ANSWER",e.Open="OPEN",e.Error="ERROR",e.IdTaken="ID-TAKEN",e.InvalidKey="INVALID-KEY",e.Leave="LEAVE",e.Expire="EXPIRE"})(ze||(ze={}));var Uo={};Uo=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xFCckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var ph=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dh=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},hh=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))},mh=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ma=function(e){ph(t,e);function t(n,r,i,o,s,l){l===void 0&&(l=5e3);var a=e.call(this)||this;a.pingInterval=l,a._disconnected=!0,a._messagesQueue=[];var c=n?"wss://":"ws://";return a._baseUrl=c+r+":"+i+o+"peerjs?key="+s,a}return t.prototype.start=function(n,r){var i=this;this._id=n;var o="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);!!this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+Uo.version),this._disconnected=!1,this._socket.onmessage=function(s){var l;try{l=JSON.parse(s.data),V.default.log("Server message received:",l)}catch{V.default.log("Invalid server message",s.data);return}i.emit(Ft.Message,l)},this._socket.onclose=function(s){i._disconnected||(V.default.log("Socket closed.",s),i._cleanup(),i._disconnected=!0,i.emit(Ft.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),V.default.log("Socket open"),i._scheduleHeartbeat())})},t.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},t.prototype._sendHeartbeat=function(){if(!this._wsOpen()){V.default.log("Cannot send heartbeat, because socket closed");return}var n=JSON.stringify({type:ze.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()},t.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},t.prototype._sendQueuedMessages=function(){var n,r,i=hh([],dh(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=mh(i),s=o.next();!s.done;s=o.next()){var l=s.value;this.send(l)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.send=function(n){if(!this._disconnected){if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(Ft.Error,"Invalid message");return}if(!!this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},t.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},t.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},t}(gr.EventEmitter),ao={};Mt(ao,"MediaConnection",()=>ya,e=>ya=e);var zo={};Mt(zo,"Negotiator",()=>ga,e=>ga=e);var Xr=function(){return Xr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Xr.apply(this,arguments)},Mr=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(u){try{c(r.next(u))}catch(f){s(f)}}function a(u){try{c(r.throw(u))}catch(f){s(f)}}function c(u){u.done?o(u.value):i(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})},Ar=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ga=function(){function e(t){this.connection=t}return e.prototype.startConnection=function(t){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===ht.Media&&t._stream&&this._addTracksToConnection(t._stream,n),t.originator){if(this.connection.type===ht.Data){var r=this.connection,i={ordered:!!t.reliable},o=n.createDataChannel(r.label,i);r.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",t.sdp)},e.prototype._startPeerConnection=function(){V.default.log("Creating RTCPeerConnection.");var t=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(t),t},e.prototype._setupListeners=function(t){var n=this,r=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,s=this.connection.provider;V.default.log("Listening for ICE candidates."),t.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(V.default.log("Received ICE candidates for ".concat(r,":"),l.candidate),s.socket.send({type:ze.Candidate,payload:{candidate:l.candidate,type:o,connectionId:i},dst:r}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"failed":V.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":V.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":V.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":t.onicecandidate=_e.noop;break}n.connection.emit("iceStateChanged",t.iceConnectionState)},V.default.log("Listening for data channel"),t.ondatachannel=function(l){V.default.log("Received data channel");var a=l.channel,c=s.getConnection(r,i);c.initialize(a)},V.default.log("Listening for remote stream"),t.ontrack=function(l){V.default.log("Received remote stream");var a=l.streams[0],c=s.getConnection(r,i);if(c.type===ht.Media){var u=c;n._addStreamToMediaConnection(a,u)}}},e.prototype.cleanup=function(){V.default.log("Cleaning up PeerConnection to "+this.connection.peer);var t=this.connection.peerConnection;if(!!t){this.connection.peerConnection=null,t.onicecandidate=t.oniceconnectionstatechange=t.ondatachannel=t.ontrack=function(){};var n=t.signalingState!=="closed",r=!1;if(this.connection.type===ht.Data){var i=this.connection,o=i.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed")}(n||r)&&t.close()}},e.prototype._makeOffer=function(){return Mr(this,void 0,Promise,function(){var t,n,r,i,o,s,l;return Ar(this,function(a){switch(a.label){case 0:t=this.connection.peerConnection,n=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,t.createOffer(this.connection.options.constraints)];case 2:r=a.sent(),V.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,t.setLocalDescription(r)];case 4:return a.sent(),V.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:_e.browser},this.connection.type===ht.Data&&(o=this.connection,i=Xr(Xr({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),n.socket.send({type:ze.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return s=a.sent(),s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(we.WebRTC,s),V.default.log("Failed to setLocalDescription, ",s)),[3,6];case 6:return[3,8];case 7:return l=a.sent(),n.emitError(we.WebRTC,l),V.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},e.prototype._makeAnswer=function(){return Mr(this,void 0,Promise,function(){var t,n,r,i,o;return Ar(this,function(s){switch(s.label){case 0:t=this.connection.peerConnection,n=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,t.createAnswer()];case 2:r=s.sent(),V.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,t.setLocalDescription(r)];case 4:return s.sent(),V.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:ze.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:_e.browser},dst:this.connection.peer}),[3,6];case 5:return i=s.sent(),n.emitError(we.WebRTC,i),V.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=s.sent(),n.emitError(we.WebRTC,o),V.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},e.prototype.handleSDP=function(t,n){return Mr(this,void 0,Promise,function(){var r,i,o,s;return Ar(this,function(l){switch(l.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,i=this.connection.provider,V.default.log("Setting remote description",n),o=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return l.sent(),V.default.log("Set remoteDescription:".concat(t," for:").concat(this.connection.peer)),t!=="OFFER"?[3,4]:[4,o._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return s=l.sent(),i.emitError(we.WebRTC,s),V.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},e.prototype.handleCandidate=function(t){return Mr(this,void 0,Promise,function(){var n,r,i,o,s,l;return Ar(this,function(a){switch(a.label){case 0:V.default.log("handleCandidate:",t),n=t.candidate,r=t.sdpMLineIndex,i=t.sdpMid,o=this.connection.peerConnection,s=this.connection.provider,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:n}))];case 2:return a.sent(),V.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=a.sent(),s.emitError(we.WebRTC,l),V.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},e.prototype._addTracksToConnection=function(t,n){if(V.default.log("add tracks from stream ".concat(t.id," to peer connection")),!n.addTrack)return V.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");t.getTracks().forEach(function(r){n.addTrack(r,t)})},e.prototype._addStreamToMediaConnection=function(t,n){V.default.log("add stream ".concat(t.id," to media connection ").concat(n.connectionId)),n.addStream(t)},e}(),Go={};Mt(Go,"BaseConnection",()=>va,e=>va=e);var gh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),va=function(e){gh(t,e);function t(n,r,i){var o=e.call(this)||this;return o.peer=n,o.provider=r,o.options=i,o._open=!1,o.metadata=i.metadata,o}return Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),t}(gr.EventEmitter),vh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qr=function(){return Qr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Qr.apply(this,arguments)},yh=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ya=function(e){vh(t,e);function t(n,r,i){var o=e.call(this,n,r,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||t.ID_PREFIX+_e.randomToken(),o._negotiator=new zo.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return ht.Media},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),t.prototype.addStream=function(n){V.default.log("Receiving stream",n),this._remoteStream=n,e.prototype.emit.call(this,"stream",n)},t.prototype.handleMessage=function(n){var r=n.type,i=n.payload;switch(n.type){case ze.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case ze.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:V.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer));break}},t.prototype.answer=function(n,r){var i,o;if(r===void 0&&(r={}),this._localStream){V.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(Qr(Qr({},this.options._payload),{_stream:n}));var s=this.provider._getMessages(this.connectionId);try{for(var l=yh(s),a=l.next();!a.done;a=l.next()){var c=a.value;this.handleMessage(c)}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}this._open=!0},t.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.ID_PREFIX="mc_",t}(Go.BaseConnection),co={};Mt(co,"DataConnection",()=>ba,e=>ba=e);var kl={};Mt(kl,"EncodingQueue",()=>_a,e=>_a=e);var _h=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_a=function(e){_h(t,e);function t(){var n=e.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){V.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return Object.defineProperty(t.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),t.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},t.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},t.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},t}(gr.EventEmitter),bh=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ch=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},ba=function(e){bh(t,e);function t(n,r,i){var o=e.call(this,n,r,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new kl.EncodingQueue,o.connectionId=o.options.connectionId||t.ID_PREFIX+_e.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||Bt.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(s){o._bufferedSend(s)}),o._encodingQueue.on("error",function(){V.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new zo.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return Object.defineProperty(t.prototype,"type",{get:function(){return ht.Data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),t.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},t.prototype._configureDataChannel=function(){var n=this;(!_e.supports.binaryBlob||_e.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){V.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){V.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){V.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},t.prototype._handleDataMessage=function(n){var r=this,i=n.data,o=i.constructor,s=this.serialization===Bt.Binary||this.serialization===Bt.BinaryUTF8,l=i;if(s){if(o===Blob){_e.blobToArrayBuffer(i,function(c){var u=_e.unpack(c);r.emit("data",u)});return}else if(o===ArrayBuffer)l=_e.unpack(i);else if(o===String){var a=_e.binaryStringToArrayBuffer(i);l=_e.unpack(a)}}else this.serialization===Bt.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}e.prototype.emit.call(this,"data",l)},t.prototype._handleChunk=function(n){var r=n.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:n.total};if(i.data[n.n]=n.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var o=new Blob(i.data);this._handleDataMessage({data:o})}},t.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,e.prototype.emit.call(this,"close"))},t.prototype.send=function(n,r){if(!this.open){e.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===Bt.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===Bt.Binary||this.serialization===Bt.BinaryUTF8){var i=_e.pack(n);if(!r&&i.size>_e.chunkedMTU){this._sendChunks(i);return}_e.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(n)},t.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},t.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>t.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(i){return V.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},t.prototype._tryBuffer=function(){if(!!this.open&&this._buffer.length!==0){var n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},t.prototype._sendChunks=function(n){var r,i,o=_e.chunk(n);V.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var s=Ch(o),l=s.next();!l.done;l=s.next()){var a=l.value;this.send(a,!0)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case ze.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case ze.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:V.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}},t.ID_PREFIX="dc_",t.MAX_BUFFERED_AMOUNT=8388608,t}(Go.BaseConnection),xl={};Mt(xl,"API",()=>Sa,e=>Sa=e);var Ca=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(u){try{c(r.next(u))}catch(f){s(f)}}function a(u){try{c(r.throw(u))}catch(f){s(f)}}function c(u){u.done?o(u.value):i(u.value).then(l,a)}c((r=r.apply(e,t||[])).next())})},Ta=function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Sa=function(){function e(t){this._options=t}return e.prototype._buildRequest=function(t){var n=this._options.secure?"https":"http",r=this._options,i=r.host,o=r.port,s=r.path,l=r.key,a=new URL("".concat(n,"://").concat(i,":").concat(o).concat(s).concat(l,"/").concat(t));return a.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),a.searchParams.set("version",Uo.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})},e.prototype.retrieveId=function(){return Ca(this,void 0,Promise,function(){var t,n,r;return Ta(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(t=i.sent(),t.status!==200)throw new Error("Error. Status:".concat(t.status));return[2,t.text()];case 2:throw n=i.sent(),V.default.error("Error retrieving ID",n),r="",this._options.path==="/"&&this._options.host!==_e.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},e.prototype.listAllPeers=function(){return Ca(this,void 0,Promise,function(){var t,n,r;return Ta(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(t=i.sent(),t.status!==200)throw t.status===401?(n="",this._options.host===_e.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(t.status));return[2,t.json()];case 2:throw r=i.sent(),V.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},e}(),Th=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tr=function(){return tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tr.apply(this,arguments)},Vn=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Sh=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},lo=function(e){Th(t,e);function t(n,r){var i=e.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var o;return n&&n.constructor==Object?r=n:n&&(o=n.toString()),r=tr({debug:0,host:_e.CLOUD_HOST,port:_e.CLOUD_PORT,path:"/",key:t.DEFAULT_KEY,token:_e.randomToken(),config:_e.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==_e.CLOUD_HOST?i._options.secure=_e.isSecure():i._options.host==_e.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&V.default.setLogFunction(i._options.logFunction),V.default.logLevel=i._options.debug||0,i._api=new xl.API(r),i._socket=i._createServerConnection(),!_e.supports.audioVideo&&!_e.supports.data?(i._delayedAbort(we.BrowserIncompatible,"The current browser does not support WebRTC"),i):!!o&&!_e.validateId(o)?(i._delayedAbort(we.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(s){return i._initialize(s)}).catch(function(s){return i._abort(we.ServerError,s)}),i)}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connections",{get:function(){var n,r,i=Object.create(null);try{for(var o=Vn(this._connections),s=o.next();!s.done;s=o.next()){var l=Sh(s.value,2),a=l[0],c=l[1];i[a]=c}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),t.prototype._createServerConnection=function(){var n=this,r=new Pl.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(Ft.Message,function(i){n._handleMessage(i)}),r.on(Ft.Error,function(i){n._abort(we.SocketError,i)}),r.on(Ft.Disconnected,function(){n.disconnected||(n.emitError(we.Network,"Lost connection to server."),n.disconnect())}),r.on(Ft.Close,function(){n.disconnected||n._abort(we.SocketClosed,"Underlying socket is already closed.")}),r},t.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},t.prototype._handleMessage=function(n){var r,i,o=n.type,s=n.payload,l=n.src;switch(o){case ze.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ze.Error:this._abort(we.ServerError,s.msg);break;case ze.IdTaken:this._abort(we.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case ze.InvalidKey:this._abort(we.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case ze.Leave:V.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case ze.Expire:this.emitError(we.PeerUnavailable,"Could not connect to peer ".concat(l));break;case ze.Offer:var y=s.connectionId,S=this.getConnection(l,y);if(S&&(S.close(),V.default.warn("Offer received for existing Connection ID:".concat(y))),s.type===ht.Media){var a=new ao.MediaConnection(l,this,{connectionId:y,_payload:s,metadata:s.metadata});S=a,this._addConnection(l,S),this.emit("call",a)}else if(s.type===ht.Data){var c=new co.DataConnection(l,this,{connectionId:y,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});S=c,this._addConnection(l,S),this.emit("connection",c)}else{V.default.warn("Received malformed connection type:".concat(s.type));return}var u=this._getMessages(y);try{for(var f=Vn(u),p=f.next();!p.done;p=f.next()){var g=p.value;S.handleMessage(g)}}catch(A){r={error:A}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}break;default:if(!s){V.default.warn("You received a malformed message from ".concat(l," of type ").concat(o));return}var y=s.connectionId,S=this.getConnection(l,y);S&&S.peerConnection?S.handleMessage(n):y?this._storeMessage(y,n):V.default.warn("You received an unrecognized message:",n);break}},t.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},t.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},t.prototype.connect=function(n,r){if(r===void 0&&(r={}),this.disconnected){V.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(we.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new co.DataConnection(n,this,r);return this._addConnection(n,i),i},t.prototype.call=function(n,r,i){if(i===void 0&&(i={}),this.disconnected){V.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(we.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){V.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var o=new ao.MediaConnection(n,this,tr(tr({},i),{_stream:r}));return this._addConnection(n,o),o},t.prototype._addConnection=function(n,r){V.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},t.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var i=r.indexOf(n);i!==-1&&r.splice(i,1)}this._lostMessages.delete(n.connectionId)},t.prototype.getConnection=function(n,r){var i,o,s=this._connections.get(n);if(!s)return null;try{for(var l=Vn(s),a=l.next();!a.done;a=l.next()){var c=a.value;if(c.connectionId===r)return c}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return null},t.prototype._delayedAbort=function(n,r){var i=this;setTimeout(function(){i._abort(n,r)},0)},t.prototype._abort=function(n,r){V.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},t.prototype.emitError=function(n,r){V.default.error("Error:",r);var i;typeof r=="string"?i=new Error(r):i=r,i.type=n,this.emit("error",i)},t.prototype.destroy=function(){this.destroyed||(V.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},t.prototype._cleanup=function(){var n,r;try{for(var i=Vn(this._connections.keys()),o=i.next();!o.done;o=i.next()){var s=o.value;this._cleanupPeer(s),this._connections.delete(s)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},t.prototype._cleanupPeer=function(n){var r,i,o=this._connections.get(n);if(!!o)try{for(var s=Vn(o),l=s.next();!l.done;l=s.next()){var a=l.value;a.close()}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},t.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;V.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},t.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)V.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)V.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},t.prototype.listAllPeers=function(n){var r=this;n===void 0&&(n=function(i){}),this._api.listAllPeers().then(function(i){return n(i)}).catch(function(i){return r._abort(we.ServerError,i)})},t.DEFAULT_KEY="peerjs",t}(gr.EventEmitter);El.Peer;var Te=(e=>(e[e.JOIN_ROOM=1]="JOIN_ROOM",e[e.SEND_SECRET_WORD=2]="SEND_SECRET_WORD",e[e.UPDATE_STATE=3]="UPDATE_STATE",e[e.LEAVE_ROOM=4]="LEAVE_ROOM",e[e.CHANGE_GM=5]="CHANGE_GM",e[e.CHANGE_ARBOL_BLANCO=6]="CHANGE_ARBOL_BLANCO",e[e.NEW_ROUND=7]="NEW_ROUND",e[e.REJECTED=8]="REJECTED",e))(Te||{}),hr=(e=>(e[e.NOT_FOUND=1]="NOT_FOUND",e[e.UNKNOWN=99]="UNKNOWN",e))(hr||{});const Kt=class{constructor(t,n=void 0){Pt(this,"peer");Pt(this,"messageListeners",[]);Pt(this,"connections",[]);Pt(this,"ready",!1);Pt(this,"pendingConnections",[]);Pt(this,"resolveConnection");Pt(this,"errorConnection");this.roomName=t,this.name=n,this.peer=new lo(this.generatePeerId(t,n)),this.peer.on("open",this.onPeerOpen.bind(this)),this.peer.on("error",r=>this.errorConnection?this.errorConnection(this.handleError(r)):void 0)}get peerId(){return this.peer.id}sendMessage(t){this.connections.forEach(n=>{console.log({message:t,peer:n.peer}),n.send(t)})}addListener(t){this.messageListeners.push(t)}destroy(){this.peer.destroy()}connect(t){const n=new Promise((r,i)=>{this.resolveConnection=r,this.errorConnection=i});return this.ready?this.unsafeConnect(t):this.pendingConnections.push(t),n}getPeerName(t){const n=t.split(Kt.separator);let r;return n.length==3?r=n[2]:n.length==2&&(r=n[1]),r}unsafeConnect(t){console.log("unsafe");const n=this.peer.connect(this.generatePeerId(t));n.on("open",()=>this.resolveConnection()),this.connections.push(n),n.on("data",r=>{const i=r;console.log(i),this.messageListeners.forEach(o=>o(i))}),n.on("error",r=>this.errorConnection(this.handleError(r)))}onPeerOpen(){this.ready=!0,console.log("OPEN"),this.pendingConnections.length!==0&&(console.log("pending message"),this.pendingConnections.forEach(this.unsafeConnect.bind(this))),this.peer.on("connection",this.onPeerConection.bind(this))}onPeerConection(t){console.log("Connection"),this.connections.push(t),t.on("data",n=>{const r=n;this.messageListeners.forEach(i=>i(r))}),t.on("close",()=>{this.messageListeners.forEach(n=>n({messageType:Te.LEAVE_ROOM,message:t})),console.log("someoneClosed")})}generatePeerId(t,n){return n?`${Kt.uniqueBullshit}${Kt.separator}${t}${Kt.separator}${n}`:`${Kt.uniqueBullshit}${Kt.separator}${t}`}handleError(t){console.log(t.message);let n={type:99,message:t.message};return t.message.startsWith("Could not connect to peer")&&(n.type=1),n}};let $t=Kt;Pt($t,"uniqueBullshit","dasdasdasdasdasd1223gdfsgdfsgdsf23123"),Pt($t,"separator","_");const tn=No({id:"room",state:()=>({connections:[],roomName:"",room:void 0,client:jn()}),getters:{currentSecretWord:e=>{const t=vn(e.room);if(!!t)return t.secretWord},players:e=>e.room.players,currentGm:e=>e.room.currentGM,currentArbolBlanco:e=>{const t=vn(e.room);if(!!t)return t.arbolBlanco},isServer:e=>e.client.isServer},actions:{changeSecretWord(e){this.isServer?(Hd(this.room,e),this.client.client.sendMessage({messageType:Te.UPDATE_STATE,message:this.room})):this.client.client.sendMessage({messageType:Te.SEND_SECRET_WORD,message:{secretWord:e}})},changeGM(e){this.isServer?(Ud(this.room,e),this.client.client.sendMessage({messageType:Te.UPDATE_STATE,message:this.room})):this.client.client.sendMessage({messageType:Te.CHANGE_GM,message:{newGM:e}})},changeArbolBlanco(e){this.isServer?(Gd(this.room,e),this.client.client.sendMessage({messageType:Te.UPDATE_STATE,message:this.room})):this.client.client.sendMessage({messageType:Te.CHANGE_ARBOL_BLANCO,message:{arbolBlanco:e}})},newRound(){this.isServer?(zd(this.room),this.client.client.sendMessage({messageType:Te.UPDATE_STATE,message:this.room})):this.client.client.sendMessage({messageType:Te.NEW_ROUND,message:void 0})}},persist:!0}),Eh={key:1,class:"tappable"},Rh={key:1},Ph=He({__name:"HeaderComponent",setup(e){const t=tn(),n=en(),r=jn(),i=32;function o(){r.client&&(r.client.destroy(),r.$patch({client:void 0})),t.$patch({room:void 0})}function s(){r.client&&(r.client.destroy(),r.$patch({client:void 0})),t.room&&t.$patch({room:void 0}),n.$patch({player:void 0})}return(l,a)=>{var c;return oe(),me("header",null,[ae(n).player?(oe(),me(Le,{key:0},[ne("span",null,vt((c=ae(n).player)==null?void 0:c.name),1),ae(n).player?(oe(),me("span",{key:0,onClick:s,class:"tappable"},[ne("img",{src:Fd,alt:"remove",width:i,height:i})])):ot("",!0),ae(t).room?(oe(),me("span",Eh,[ne("img",{src:$d,alt:"puerta",onClick:o,width:i,height:i})])):ot("",!0)],64)):(oe(),me("span",Rh,"Arbol blanco"))])}}});const kh=lt(Ph,[["__scopeId","data-v-b4c5dcdf"]]),nr=e=>t=>n=>e[0]+t(n)*(e[1]-e[0]),xh=e=>t=>{let n=t;return t<e[0]?n=e[0]:t>e[1]&&(n=e[1]),n};function zr(e,t){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function Oh(e){return e<.5?4*e*e*e:1-(-2*e+2)*(-2*e+2)*(-2*e+2)/2}function Ih(e,t,n,r,i){var o=Math.abs(n-e),s=Math.abs(r-t),l=e<n?1:-1,a=t<r?1:-1,c=o-s;let u=0;for(;u<200&&(i(e,t),u++,!(e===n&&t===r));){var f=2*c;f>-s&&(c-=s,e+=l),f<o&&(c+=o,t+=a)}}function Ea(e,t,n){e/=255,t/=255,n/=255;let r=Math.max(e,t,n),i=Math.min(e,t,n),o=(r+i)/2,s=(r+i)/2,l=(r+i)/2;if(r==i)o=s=0;else{let a=r-i;switch(s=l>.5?a/(2-r-i):a/(r+i),r){case e:o=(t-n)/a+(t<n?6:0);break;case t:o=(n-e)/a+2;break;case n:o=(e-t)/a+4;break}o/=6}return[Math.floor(o*360),Math.floor(s*100),Math.floor(l*100)]}function uo(e,t){return e[1]*t+e[0]}function Mh(e,t){const n=Math.floor(e.pos[0]/t),r=Math.floor(e.pos[1]/t);return uo([n,r],t)}function Ra(e,t){if(e[0]*e[1]%t!=0)throw new Error("The grid must be divisible by the cell size");return{cellSize:t,buckets:{}}}function Pa(e,t){const n=Mh(t,e.cellSize);let r=e.buckets[n];r||(r=[]),r.push(t),e.buckets[n]=r}function Ah(e,t,n){if(n<0)throw new Error("Can't search for a negative radius");const r=[[-1,1],[1,1],[-1,-1],[1,-1]],i=n*n,{cellSize:o}=e,s=Math.floor(n/e.cellSize),l=Math.floor(t[0]/e.cellSize),a=Math.floor(t[1]/e.cellSize);let c=Math.floor(t[0]/e.cellSize);const u=c+s,f=[];for(;c<=u;){const p=Math.floor((Math.sqrt(n*n-(c*o-l*o)*(c*o-l*o))+a*o)/o);for(let g=a;g<p;g++)for(let y=0;y<r.length;y++){const S=e.buckets[uo([l+(c-l)*r[y][0],a+(g-a)*r[y][1]],e.cellSize)];S&&f.push(...S)}for(let g=0;g<r.length;g++){const y=e.buckets[uo([l+(c-l)*r[g][0],a+(p-a)*r[g][1]],e.cellSize)];if(y)for(let S=0;S<y.length;S++){const A=y[S];zr(t,A.pos)<=i&&f.push(A)}}c++}return f}const Dh={key:0,id:"debugInfo"},Nh=He({__name:"Background",setup(e){function t(N){return N.from.pos[1]*1e4+N.from.pos[0]+N.to.pos[1]*1e4+N.to.pos[0]}function n(N,L){return{...N,pos:L}}const r=[[225,0,169],[255,30,0],[0,226,59],[188,249,0]],i=Ae(!1),o=1024,s=[2560,1440],l=[o,o],a=[s[0]/l[0],s[1]/l[1]],c=25,u=Ae(30),f=2,p=.25,g=100;let y=[];const S=200,A=S*S,E=Ae(null),k=document.createElement("canvas");k.width=s[0],k.height=s[1];let Y,B;Ui(()=>{if(E.value){W(),H(E.value);const N=E.value.getContext("2d");y=J(r,u.value,E.value),B=Ra(s,g),y.forEach(L=>Pa(B,L)),y.forEach(L=>Re(N,L)),Y||(Y=window.requestAnimationFrame(je))}});function H(N){const{width:L,height:T}=N;u.value=Math.floor(c/1e6*L*T)}function W(){if(E.value){const{innerHeight:N,innerWidth:L}=window;E.value.height=s[1]>N?N:s[1],E.value.width=s[0]>L?L:s[0],k.width=s[0],k.height=s[1]}}function Q(N){const L=Math.floor(Math.random()*N.width+1),T=Math.floor(Math.random()*N.height+1);return[L,T]}function te(N,L){const T=L/(N*2),j=nr([-N,N])(F=>{let Z=0;return F>-T&&F<T?F>0?Z=T:Z=-T:Z=1-(2*F-1)*(2*F-1),Z});let x=j(Math.random()),$=j(Math.random());return[x,$]}function ge(N){const L=Math.floor(Math.random()*N.length);return N[L]}function J(N,L,T){const j=[];for(let x=0;x<L;x++){const $=ge(N);j.push({color:$,colorHSL:Ea(...$),pos:Q(T),size:10,speed:te(f,p)})}return j}function Ee(N,L){L.pos[0]<0&&(L.pos[0]=N[0]),L.pos[0]>N[0]&&(L.pos[0]=0),L.pos[1]<0&&(L.pos[1]=N[1]),L.pos[1]>N[1]&&(L.pos[1]=0)}function Oe(N,L){L.pos=[L.pos[0]+L.speed[0],L.pos[1]+L.speed[1]];const T=[N.width,N.height];Ee(T,L)}function Be(N,L){return{from:N,to:L}}function be(N,L){const T={};for(let j=0;j<y.length;j++){const x=y[j];for(let $=0;$<9;$++){const F=($%3-1)*N.width,Z=(Math.floor($/3)-1)*N.height,q=[x.pos[0]+F,x.pos[1]+Z],ee=Ah(L,q,S);for(let m=0;m<ee.length;m++){const _=ee[m];if(x!==_){const C=[_.pos[0]-F,_.pos[1]-Z],R=Be(n(x,q),_);if(T[t(R)]=R,F!==0||Z!==0){const P=Be(n(_,C),x);T[t(P)]=P}}}}}return Object.values(T)}function Re(N,L){const T=`rgb(${L.color[0]}, ${L.color[1]}, ${L.color[2]})`;N.shadowColor=T,N.fillStyle=T,N.fillRect(Math.floor(L.pos[0]-L.size/2),Math.floor(L.pos[1]-L.size/2),L.size,L.size)}function Pe(N,L){N.strokeStyle="white",N.beginPath();for(let T=0;T<L.length;T++)N.moveTo(Math.floor(L[T].from.pos[0]),Math.floor(L[T].from.pos[1])),N.lineTo(Math.floor(L[T].to.pos[0]),Math.floor(L[T].to.pos[1]));N.stroke()}function fe(N,L,T={matrixInBinary:511,size:3}){const j=nr([0,1])(q=>q),x=nr([255,0])(Oh),$=A/(a[0]*a[1]);let F=N.createImageData(...l);const Z=T.size*T.size;for(let q of L){const ee=[Math.round(q.from.pos[0]/a[0]),Math.round(q.from.pos[1]/a[1])],m=[Math.round(q.to.pos[0]/a[0]),Math.round(q.to.pos[1]/a[1])],_=zr(ee,m),C=(R,P)=>{const w=zr(ee,[R,P]),U=zr([R,P],m),D=j(w/_),M=j(U/_);F.data[P*l[0]*4+R*4+3],Math.floor(x(_/$));const O=[Math.floor(M*q.from.color[0]+D*q.to.color[0]),Math.floor(M*q.from.color[1]+D*q.to.color[1]),Math.floor(M*q.from.color[2]+D*q.to.color[2]),Math.floor(x(_/$))],X=1;for(let z=0;z<Z;z++){const K=z%3-X,re=Math.floor(z/3)-X;let ue=1<<z;const de=(T.matrixInBinary&ue)/ue;F.data[(P+re)*l[0]*4+(R+K)*4]=Math.floor(O[0])*de,F.data[(P+re)*l[0]*4+(R+K)*4+1]=Math.floor(O[1])*de,F.data[(P+re)*l[0]*4+(R+K)*4+2]=Math.floor(O[2])*de,F.data[(P+re)*l[0]*4+(R+K)*4+3]=Math.floor(O[3])*de}};Ih(...ee,...m,C)}return F}function ce(N,L){N.putImageData(L,0,0),N.globalCompositeOperation="copy",N.drawImage(k,0,0,...l,0,0,...s),N.globalCompositeOperation="lighter"}const Ne=0;let Xe=0;function je(){if(Xe<Ne){Xe++,Y=window.requestAnimationFrame(je);return}Xe=0;const N=E.value.getContext("2d"),L=k.getContext("2d");y.forEach(x=>Oe(E.value,x)),B=Ra(s,g),y.forEach(x=>Pa(B,x)),N.globalCompositeOperation="source-over",N.fillRect(0,0,E.value.width,E.value.height),N.fillStyle="rgba(24,24,24,1)";const T=be(E.value,B),j=fe(L,T);ce(L,j),L.globalCompositeOperation="destination-in",Pe(L,T),N.globalCompositeOperation="lighten",N.drawImage(L.canvas,0,0),Y=window.requestAnimationFrame(je)}let ke;return window.addEventListener("mousemove",N=>{ke?ke.pos=[N.clientX/E.value.clientWidth*E.value.width,N.clientY/E.value.clientHeight*E.value.height]:(ke={pos:[N.clientX/E.value.clientWidth*E.value.width,N.clientY/E.value.clientHeight*E.value.height],color:[255,255,255],colorHSL:Ea(255,255,255),size:10,speed:[0,0]},y.push(ke))}),window.addEventListener("mouseout",N=>{ke&&(y.splice(y.indexOf(ke),1),ke=void 0)}),window.addEventListener("resize",N=>{W(),H(E.value),y=J(r,u.value,E.value)}),window.addEventListener("keyup",N=>{N.key==="F12"&&(i.value=!i.value)}),(N,L)=>(oe(),me(Le,null,[ne("canvas",{id:"background",ref_key:"canvas",ref:E},null,512),i.value?(oe(),me("div",Dh,[ne("span",null,"numberOfParticles : "+vt(u.value),1)])):ot("",!0)],64))}});const wh=lt(Nh,[["__scopeId","data-v-dc765055"]]),Lh={id:"content"},jh=He({__name:"App",setup(e){return(t,n)=>(oe(),me(Le,null,[Ie(wh),Ie(kh,{id:"header"}),ne("div",Lh,[Ie(ae(Fc))]),Ie(Bd,{id:"footer"})],64))}});const Bh={class:"about"},Fh=ne("label",null,"Username: ",-1),$h=ne("br",null,null,-1),Uh=ne("label",null,"Own Room: ",-1),zh=ne("br",null,null,-1),Gh=ne("label",null,"Remote Room: ",-1),Hh=ne("br",null,null,-1),Vh=ne("label",null,"Message: ",-1),Wh=ne("br",null,null,-1),qh=ne("h2",null,"Conexiones",-1),Jh=ne("h2",null,"Mensajes",-1),Kh=He({__name:"RoomView",setup(e){const t=tn(),n=en(),r=Ae("");let i,o,s;const l=Ae([]);function a(f){o||(o=Gc(n.name)),$c(f,o),i&&i.destroy(),i=new $t(t.roomName),i.addListener(p=>{switch(p.messageType){case Te.SEND_SECRET_WORD:l.value.push(p.message)}})}function c(){s&&s.destroy(),s=new $t(n.name),s.connect(t.roomName).then(()=>!0),s.addListener(f=>{switch(f.messageType){case Te.SEND_SECRET_WORD:l.value.push(f.message)}})}function u(){i&&i.sendMessage({messageType:Te.SEND_SECRET_WORD,message:r.value}),s&&s.sendMessage({messageType:Te.SEND_SECRET_WORD,message:r.value})}return(f,p)=>(oe(),me("div",Bh,[Fh,Pi(ne("input",{type:"text","onUpdate:modelValue":p[0]||(p[0]=g=>ae(n).name=g)},null,512),[[Oi,ae(n).name]]),$h,Uh,Pi(ne("input",{type:"text","onUpdate:modelValue":p[1]||(p[1]=g=>ae(t).roomName=g)},null,512),[[Oi,ae(t).roomName]]),ne("button",{onClick:p[2]||(p[2]=g=>a(ae(t).roomName))},"Create Room"),zh,Gh,ne("button",{onClick:p[3]||(p[3]=g=>c())},"Connect to room"),Hh,Vh,Pi(ne("input",{type:"text","onUpdate:modelValue":p[4]||(p[4]=g=>r.value=g)},null,512),[[Oi,r.value]]),_c(" "+vt(r.value)+" ",1),ne("button",{onClick:p[5]||(p[5]=g=>u())},"sendMessage"),Wh,ne("div",null,[qh,ne("ul",null,[(oe(!0),me(Le,null,qr(ae(t).connections,g=>(oe(),me("li",{key:g},vt(g),1))),128))])]),ne("div",null,[Jh,ne("ul",null,[(oe(!0),me(Le,null,qr(l.value,g=>(oe(),me("li",{key:g},vt(g),1))),128))])])]))}}),rr=e=>/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e),ir=e=>!!e,or=(e,...t)=>{let n=!0;for(let r of t)if(n=r(e),!n)break;return n},Yh=He({__name:"Animatext",props:{text:{type:String,required:!0},amplitude:{type:Number,default:10},deltaDesfase:{type:Number,default:3},desfase:{type:Number,default:-Math.PI},deltaDesfaseEntreLetras:{type:Number,default:0},increaseDesfaseEntreLetras:{type:Number,default:.25},waveFunction:{type:Function,default:e=>Math.sin(e)}},setup(e){const t=e;let n=Ae([]);Ct(()=>t.text,p=>{n.value=p.split("")},{immediate:!0});let r=Ae(null);const i=p=>`translateY(${p}px)`;Ct(r,p=>{r=p,requestAnimationFrame(f)});let o=-Math.PI,s=Math.PI/180*t.deltaDesfase,l=Math.PI/180*t.deltaDesfaseEntreLetras,a=Math.PI/180*t.increaseDesfaseEntreLetras,c=t.amplitude,u=t.waveFunction;function f(p){o+=s,o>Math.PI&&(o=-Math.PI),l+=a,l>Math.PI&&(l=-Math.PI);const g=r;if(g.children)for(let y=0;y<g.children.length;y++)g.children[y].style.transform=i(u(o+l*y)*c);requestAnimationFrame(f)}return(p,g)=>(oe(),me("div",{id:"animatext-wrapper",ref_key:"root",ref:r},[(oe(!0),me(Le,null,qr(ae(n),y=>(oe(),me("span",null,vt(y),1))),256))],512))}});const Ho=lt(Yh,[["__scopeId","data-v-d9038c89"]]),Xh=["disabled"],Qh=["src"],Zh=He({__name:"ButtonComponent",props:{label:{type:String,required:!0},img:String,disabled:Boolean,loading:Boolean},setup(e){function t(n){return`/arbol-blanco/buttonImages/${n}.png`}return(n,r)=>(oe(),me("button",{disabled:e.disabled||e.loading,onClick:r[0]||(r[0]=i=>n.$emit("click"))},[ne("div",null,[ne("img",{src:t(e.img),width:"64",height:"64"},null,8,Qh)]),ne("span",{style:Pn({visibility:e.loading?"hidden":"visible"})},vt(e.label),5),e.loading?(oe(),at(Ho,{key:0,text:e.label,amplitude:3,"delta-desfase":8,"delta-desfase-entre-letras":60,"increase-desfase-entre-letras":0},null,8,["text"])):ot("",!0)],8,Xh))}});const mr=lt(Zh,[["__scopeId","data-v-a17598b5"]]),em=["value","disabled"],tm=He({__name:"InputComponent",props:{modelValue:String,disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=r=>{t("update:modelValue",r.target.value)};return(r,i)=>(oe(),me("input",{value:e.modelValue,onInput:n,disabled:e.disabled},null,40,em))}});const Vo=lt(tm,[["__scopeId","data-v-e591276f"]]),nm={class:"invalid"},rm=He({__name:"ErrorComponent",props:{message:{type:String,required:!0}},setup(e){return(t,n)=>(oe(),me("label",nm,vt(e.message),1))}});const fo=lt(rm,[["__scopeId","data-v-c2296f2f"]]),im=e=>(si("data-v-6c026200"),e=e(),ai(),e),om={id:"player"},sm=im(()=>ne("h2",null,"Player",-1)),am={class:"buttons"},cm=He({__name:"CreatePlayer",setup(e){const t=en();Ae();const n=Ae(t.name!==void 0?or(t.name,ir,rr):!0);function r(){n.value&&(t.player=Gc(t.name))}return t.$subscribe((i,o)=>{n.value=or(o.name,ir,rr)}),(i,o)=>(oe(),me("div",om,[sm,Ie(Vo,{modelValue:ae(t).name,"onUpdate:modelValue":o[0]||(o[0]=s=>ae(t).name=s)},null,8,["modelValue"]),n.value?ot("",!0):(oe(),at(fo,{key:0,message:"Invalid name"})),ne("div",am,[Ie(mr,{onClick:r,label:"Create player",img:"addPeople"})])]))}});const Ol=lt(cm,[["__scopeId","data-v-6c026200"]]);function ka(){const e=jn(),t=en(),n=tn(),r=Ae(!1),i=Ae(!1),o=Ae(!1);return e.isServer=!1,r.value=!0,i.value=!0,t.nameAlreadyTaken=!1,e.client&&(console.log("destroying client"),e.client.destroy()),e.client=new $t(n.roomName,t.player.name),e.client.addListener(s=>{switch(s.messageType){case Te.UPDATE_STATE:const l=s.message;n.$patch({room:l});break;case Te.REJECTED:e.client.destroy(),t.nameAlreadyTaken=!0}}),e.client.connect(n.roomName).then(()=>{e.client.sendMessage({messageType:Te.JOIN_ROOM,message:{player:t.player,peerId:e.client.peerId}})},s=>{const l=s;switch(l.type){case hr.NOT_FOUND:i.value=!1,o.value=!0,console.log("Not found");break;case hr.UNKNOWN:console.error("Undefined error",l.message);break;default:const a=l.type;throw new Error(`Unhandled color case: ${a}`)}console.log(s)}).then(()=>{r.value=!1}),{loading:r,roomExists:i,roomNotFound:o}}const lm=e=>(si("data-v-8257056b"),e=e(),ai(),e),um=lm(()=>ne("h2",null,"Room",-1)),fm={id:"room-info"},pm={class:"buttons"},dm={key:2},hm=He({__name:"RoomHandler",setup(e){const t=tn(),n=en(),r=jn();n.nameAlreadyTaken=!1;let i=Ae(!1),o=Ae(!1);function s(){c.value=or(t.roomName,ir,rr),c.value&&(t.room=$c(t.roomName,n.player),r.isServer=!0,r.client&&r.client.destroy(),r.client=new $t(t.roomName),r.client.addListener(u=>{switch(console.log(u),u.messageType){case Te.JOIN_ROOM:{if(!t.room)return;const f=u.message;console.log("pending,remove",r.pendingRemove),ea(t.room,f.player.name)?(r.pendingRemove.push(f),r.client.sendMessage({messageType:Te.REJECTED,message:void 0})):(Uc(t.room,f.player),r.client.sendMessage({messageType:Te.UPDATE_STATE,message:t.room}));break}case Te.LEAVE_ROOM:{const f=u.message,p=r.client.getPeerName(f.peer);console.log("Player left",p);const g=r.pendingRemove.findIndex(y=>y.player.name===p);if(g>-1)r.pendingRemove.splice(g,1);else{const y=ea(t.room,p);y&&Vd(t.room,y),r.client.sendMessage({messageType:Te.UPDATE_STATE,message:t.room})}break}case Te.CHANGE_GM:{const f=u.message;t.changeGM(f.newGM);break}case Te.CHANGE_ARBOL_BLANCO:{const f=u.message;t.changeArbolBlanco(f.arbolBlanco);break}case Te.NEW_ROUND:{t.newRound();break}case Te.SEND_SECRET_WORD:{t.changeSecretWord(u.message.secretWord);break}}}))}const l=Ae(!0);function a(){c.value=or(t.roomName,ir,rr),c.value&&(r.isServer=!1,o.value=!0,l.value=!0,n.nameAlreadyTaken=!1,r.client&&(console.log("destroying client"),r.client.destroy()),r.client=new $t(t.roomName,n.player.name),r.client.addListener(u=>{switch(u.messageType){case Te.UPDATE_STATE:const f=u.message;t.$patch({room:f});break;case Te.REJECTED:r.client.destroy(),n.nameAlreadyTaken=!0}}),r.client.connect(t.roomName).then(()=>{i.value=!0,r.client.sendMessage({messageType:Te.JOIN_ROOM,message:{player:n.player,peerId:r.client.peerId}})},u=>{const f=u;switch(f.type){case hr.NOT_FOUND:l.value=!1;break;case hr.UNKNOWN:console.error("Undefined error",f.message);break;default:const p=f.type;throw new Error(`Unhandled color case: ${p}`)}console.log(u)}).then(()=>{o.value=!1}))}const c=Ae(!0);return t.$subscribe((u,f)=>{c.value=or(f.roomName,ir,rr)}),(u,f)=>(oe(),me(Le,null,[um,ne("div",fm,[Ie(Vo,{disabled:ae(o),modelValue:ae(t).roomName,"onUpdate:modelValue":f[0]||(f[0]=p=>ae(t).roomName=p)},null,8,["disabled","modelValue"]),c.value?ot("",!0):(oe(),at(fo,{key:0,message:"Invalid name"})),ae(n).nameAlreadyTaken?(oe(),at(fo,{key:1,message:"Name taken"})):ot("",!0),ne("div",pm,[Ie(mr,{loading:ae(o),onClick:s,label:"Create Room",img:"createRoom"},null,8,["loading"]),Ie(mr,{loading:ae(o),onClick:a,label:"Join room",img:"joinRoom"},null,8,["loading"])]),l.value?ot("",!0):(oe(),me("span",dm,"Room doesn't exist, create one"))])],64))}});const mm=lt(hm,[["__scopeId","data-v-8257056b"]]),gm="/arbol-blanco/buttonImages/share.png",vm="/arbol-blanco/buttonImages/arbolBlanco.png",ym="/arbol-blanco/buttonImages/GM.png";var Il={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,n,r,i){var o=["","webkit","Moz","MS","ms","o"],s=n.createElement("div"),l="function",a=Math.round,c=Math.abs,u=Date.now;function f(d,h,v){return setTimeout(Y(d,v),h)}function p(d,h,v){return Array.isArray(d)?(g(d,v[h],v),!0):!1}function g(d,h,v){var b;if(!!d)if(d.forEach)d.forEach(h,v);else if(d.length!==i)for(b=0;b<d.length;)h.call(v,d[b],b,d),b++;else for(b in d)d.hasOwnProperty(b)&&h.call(v,d[b],b,d)}function y(d,h,v){var b="DEPRECATED METHOD: "+h+`
`+v+` AT 
`;return function(){var I=new Error("get-stack-trace"),G=I&&I.stack?I.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",pe=t.console&&(t.console.warn||t.console.log);return pe&&pe.call(t.console,b,G),d.apply(this,arguments)}}var S;typeof Object.assign!="function"?S=function(h){if(h===i||h===null)throw new TypeError("Cannot convert undefined or null to object");for(var v=Object(h),b=1;b<arguments.length;b++){var I=arguments[b];if(I!==i&&I!==null)for(var G in I)I.hasOwnProperty(G)&&(v[G]=I[G])}return v}:S=Object.assign;var A=y(function(h,v,b){for(var I=Object.keys(v),G=0;G<I.length;)(!b||b&&h[I[G]]===i)&&(h[I[G]]=v[I[G]]),G++;return h},"extend","Use `assign`."),E=y(function(h,v){return A(h,v,!0)},"merge","Use `assign`.");function k(d,h,v){var b=h.prototype,I;I=d.prototype=Object.create(b),I.constructor=d,I._super=b,v&&S(I,v)}function Y(d,h){return function(){return d.apply(h,arguments)}}function B(d,h){return typeof d==l?d.apply(h&&h[0]||i,h):d}function H(d,h){return d===i?h:d}function W(d,h,v){g(J(h),function(b){d.addEventListener(b,v,!1)})}function Q(d,h,v){g(J(h),function(b){d.removeEventListener(b,v,!1)})}function te(d,h){for(;d;){if(d==h)return!0;d=d.parentNode}return!1}function ge(d,h){return d.indexOf(h)>-1}function J(d){return d.trim().split(/\s+/g)}function Ee(d,h,v){if(d.indexOf&&!v)return d.indexOf(h);for(var b=0;b<d.length;){if(v&&d[b][v]==h||!v&&d[b]===h)return b;b++}return-1}function Oe(d){return Array.prototype.slice.call(d,0)}function Be(d,h,v){for(var b=[],I=[],G=0;G<d.length;){var pe=h?d[G][h]:d[G];Ee(I,pe)<0&&b.push(d[G]),I[G]=pe,G++}return v&&(h?b=b.sort(function(Ue,Ze){return Ue[h]>Ze[h]}):b=b.sort()),b}function be(d,h){for(var v,b,I=h[0].toUpperCase()+h.slice(1),G=0;G<o.length;){if(v=o[G],b=v?v+I:h,b in d)return b;G++}return i}var Re=1;function Pe(){return Re++}function fe(d){var h=d.ownerDocument||d;return h.defaultView||h.parentWindow||t}var ce=/mobile|tablet|ip(ad|hone|od)|android/i,Ne="ontouchstart"in t,Xe=be(t,"PointerEvent")!==i,je=Ne&&ce.test(navigator.userAgent),ke="touch",N="pen",L="mouse",T="kinect",j=25,x=1,$=2,F=4,Z=8,q=1,ee=2,m=4,_=8,C=16,R=ee|m,P=_|C,w=R|P,U=["x","y"],D=["clientX","clientY"];function M(d,h){var v=this;this.manager=d,this.callback=h,this.element=d.element,this.target=d.options.inputTarget,this.domHandler=function(b){B(d.options.enable,[d])&&v.handler(b)},this.init()}M.prototype={handler:function(){},init:function(){this.evEl&&W(this.element,this.evEl,this.domHandler),this.evTarget&&W(this.target,this.evTarget,this.domHandler),this.evWin&&W(fe(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Q(this.element,this.evEl,this.domHandler),this.evTarget&&Q(this.target,this.evTarget,this.domHandler),this.evWin&&Q(fe(this.element),this.evWin,this.domHandler)}};function O(d){var h,v=d.options.inputClass;return v?h=v:Xe?h=mi:je?h=_r:Ne?h=gi:h=rn,new h(d,X)}function X(d,h,v){var b=v.pointers.length,I=v.changedPointers.length,G=h&x&&b-I===0,pe=h&(F|Z)&&b-I===0;v.isFirst=!!G,v.isFinal=!!pe,G&&(d.session={}),v.eventType=h,z(d,v),d.emit("hammer.input",v),d.recognize(v),d.session.prevInput=v}function z(d,h){var v=d.session,b=h.pointers,I=b.length;v.firstInput||(v.firstInput=ue(h)),I>1&&!v.firstMultiple?v.firstMultiple=ue(h):I===1&&(v.firstMultiple=!1);var G=v.firstInput,pe=v.firstMultiple,Fe=pe?pe.center:G.center,Ue=h.center=de(b);h.timeStamp=u(),h.deltaTime=h.timeStamp-G.timeStamp,h.angle=St(Fe,Ue),h.distance=qe(Fe,Ue),K(v,h),h.offsetDirection=Se(h.deltaX,h.deltaY);var Ze=ye(h.deltaTime,h.deltaX,h.deltaY);h.overallVelocityX=Ze.x,h.overallVelocityY=Ze.y,h.overallVelocity=c(Ze.x)>c(Ze.y)?Ze.x:Ze.y,h.scale=pe?nn(pe.pointers,b):1,h.rotation=pe?vr(pe.pointers,b):0,h.maxPointers=v.prevInput?h.pointers.length>v.prevInput.maxPointers?h.pointers.length:v.prevInput.maxPointers:h.pointers.length,re(v,h);var Rt=d.element;te(h.srcEvent.target,Rt)&&(Rt=h.srcEvent.target),h.target=Rt}function K(d,h){var v=h.center,b=d.offsetDelta||{},I=d.prevDelta||{},G=d.prevInput||{};(h.eventType===x||G.eventType===F)&&(I=d.prevDelta={x:G.deltaX||0,y:G.deltaY||0},b=d.offsetDelta={x:v.x,y:v.y}),h.deltaX=I.x+(v.x-b.x),h.deltaY=I.y+(v.y-b.y)}function re(d,h){var v=d.lastInterval||h,b=h.timeStamp-v.timeStamp,I,G,pe,Fe;if(h.eventType!=Z&&(b>j||v.velocity===i)){var Ue=h.deltaX-v.deltaX,Ze=h.deltaY-v.deltaY,Rt=ye(b,Ue,Ze);G=Rt.x,pe=Rt.y,I=c(Rt.x)>c(Rt.y)?Rt.x:Rt.y,Fe=Se(Ue,Ze),d.lastInterval=h}else I=v.velocity,G=v.velocityX,pe=v.velocityY,Fe=v.direction;h.velocity=I,h.velocityX=G,h.velocityY=pe,h.direction=Fe}function ue(d){for(var h=[],v=0;v<d.pointers.length;)h[v]={clientX:a(d.pointers[v].clientX),clientY:a(d.pointers[v].clientY)},v++;return{timeStamp:u(),pointers:h,center:de(h),deltaX:d.deltaX,deltaY:d.deltaY}}function de(d){var h=d.length;if(h===1)return{x:a(d[0].clientX),y:a(d[0].clientY)};for(var v=0,b=0,I=0;I<h;)v+=d[I].clientX,b+=d[I].clientY,I++;return{x:a(v/h),y:a(b/h)}}function ye(d,h,v){return{x:h/d||0,y:v/d||0}}function Se(d,h){return d===h?q:c(d)>=c(h)?d<0?ee:m:h<0?_:C}function qe(d,h,v){v||(v=U);var b=h[v[0]]-d[v[0]],I=h[v[1]]-d[v[1]];return Math.sqrt(b*b+I*I)}function St(d,h,v){v||(v=U);var b=h[v[0]]-d[v[0]],I=h[v[1]]-d[v[1]];return Math.atan2(I,b)*180/Math.PI}function vr(d,h){return St(h[1],h[0],D)+St(d[1],d[0],D)}function nn(d,h){return qe(h[0],h[1],D)/qe(d[0],d[1],D)}var yr={mousedown:x,mousemove:$,mouseup:F},Qe="mousedown",ut="mousemove mouseup";function rn(){this.evEl=Qe,this.evWin=ut,this.pressed=!1,M.apply(this,arguments)}k(rn,M,{handler:function(h){var v=yr[h.type];v&x&&h.button===0&&(this.pressed=!0),v&$&&h.which!==1&&(v=F),this.pressed&&(v&F&&(this.pressed=!1),this.callback(this.manager,v,{pointers:[h],changedPointers:[h],pointerType:L,srcEvent:h}))}});var Al={pointerdown:x,pointermove:$,pointerup:F,pointercancel:Z,pointerout:Z},Dl={2:ke,3:N,4:L,5:T},qo="pointerdown",Jo="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(qo="MSPointerDown",Jo="MSPointerMove MSPointerUp MSPointerCancel");function mi(){this.evEl=qo,this.evWin=Jo,M.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}k(mi,M,{handler:function(h){var v=this.store,b=!1,I=h.type.toLowerCase().replace("ms",""),G=Al[I],pe=Dl[h.pointerType]||h.pointerType,Fe=pe==ke,Ue=Ee(v,h.pointerId,"pointerId");G&x&&(h.button===0||Fe)?Ue<0&&(v.push(h),Ue=v.length-1):G&(F|Z)&&(b=!0),!(Ue<0)&&(v[Ue]=h,this.callback(this.manager,G,{pointers:v,changedPointers:[h],pointerType:pe,srcEvent:h}),b&&v.splice(Ue,1))}});var Nl={touchstart:x,touchmove:$,touchend:F,touchcancel:Z},wl="touchstart",Ll="touchstart touchmove touchend touchcancel";function Ko(){this.evTarget=wl,this.evWin=Ll,this.started=!1,M.apply(this,arguments)}k(Ko,M,{handler:function(h){var v=Nl[h.type];if(v===x&&(this.started=!0),!!this.started){var b=jl.call(this,h,v);v&(F|Z)&&b[0].length-b[1].length===0&&(this.started=!1),this.callback(this.manager,v,{pointers:b[0],changedPointers:b[1],pointerType:ke,srcEvent:h})}}});function jl(d,h){var v=Oe(d.touches),b=Oe(d.changedTouches);return h&(F|Z)&&(v=Be(v.concat(b),"identifier",!0)),[v,b]}var Bl={touchstart:x,touchmove:$,touchend:F,touchcancel:Z},Fl="touchstart touchmove touchend touchcancel";function _r(){this.evTarget=Fl,this.targetIds={},M.apply(this,arguments)}k(_r,M,{handler:function(h){var v=Bl[h.type],b=$l.call(this,h,v);!b||this.callback(this.manager,v,{pointers:b[0],changedPointers:b[1],pointerType:ke,srcEvent:h})}});function $l(d,h){var v=Oe(d.touches),b=this.targetIds;if(h&(x|$)&&v.length===1)return b[v[0].identifier]=!0,[v,v];var I,G,pe=Oe(d.changedTouches),Fe=[],Ue=this.target;if(G=v.filter(function(Ze){return te(Ze.target,Ue)}),h===x)for(I=0;I<G.length;)b[G[I].identifier]=!0,I++;for(I=0;I<pe.length;)b[pe[I].identifier]&&Fe.push(pe[I]),h&(F|Z)&&delete b[pe[I].identifier],I++;if(!!Fe.length)return[Be(G.concat(Fe),"identifier",!0),Fe]}var Ul=2500,Yo=25;function gi(){M.apply(this,arguments);var d=Y(this.handler,this);this.touch=new _r(this.manager,d),this.mouse=new rn(this.manager,d),this.primaryTouch=null,this.lastTouches=[]}k(gi,M,{handler:function(h,v,b){var I=b.pointerType==ke,G=b.pointerType==L;if(!(G&&b.sourceCapabilities&&b.sourceCapabilities.firesTouchEvents)){if(I)zl.call(this,v,b);else if(G&&Gl.call(this,b))return;this.callback(h,v,b)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function zl(d,h){d&x?(this.primaryTouch=h.changedPointers[0].identifier,Xo.call(this,h)):d&(F|Z)&&Xo.call(this,h)}function Xo(d){var h=d.changedPointers[0];if(h.identifier===this.primaryTouch){var v={x:h.clientX,y:h.clientY};this.lastTouches.push(v);var b=this.lastTouches,I=function(){var G=b.indexOf(v);G>-1&&b.splice(G,1)};setTimeout(I,Ul)}}function Gl(d){for(var h=d.srcEvent.clientX,v=d.srcEvent.clientY,b=0;b<this.lastTouches.length;b++){var I=this.lastTouches[b],G=Math.abs(h-I.x),pe=Math.abs(v-I.y);if(G<=Yo&&pe<=Yo)return!0}return!1}var Qo=be(s.style,"touchAction"),Zo=Qo!==i,es="compute",ts="auto",vi="manipulation",on="none",Fn="pan-x",$n="pan-y",br=Vl();function yi(d,h){this.manager=d,this.set(h)}yi.prototype={set:function(d){d==es&&(d=this.compute()),Zo&&this.manager.element.style&&br[d]&&(this.manager.element.style[Qo]=d),this.actions=d.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var d=[];return g(this.manager.recognizers,function(h){B(h.options.enable,[h])&&(d=d.concat(h.getTouchAction()))}),Hl(d.join(" "))},preventDefaults:function(d){var h=d.srcEvent,v=d.offsetDirection;if(this.manager.session.prevented){h.preventDefault();return}var b=this.actions,I=ge(b,on)&&!br[on],G=ge(b,$n)&&!br[$n],pe=ge(b,Fn)&&!br[Fn];if(I){var Fe=d.pointers.length===1,Ue=d.distance<2,Ze=d.deltaTime<250;if(Fe&&Ue&&Ze)return}if(!(pe&&G)&&(I||G&&v&R||pe&&v&P))return this.preventSrc(h)},preventSrc:function(d){this.manager.session.prevented=!0,d.preventDefault()}};function Hl(d){if(ge(d,on))return on;var h=ge(d,Fn),v=ge(d,$n);return h&&v?on:h||v?h?Fn:$n:ge(d,vi)?vi:ts}function Vl(){if(!Zo)return!1;var d={},h=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(v){d[v]=h?t.CSS.supports("touch-action",v):!0}),d}var Cr=1,ft=2,yn=4,Ht=8,At=Ht,Un=16,Et=32;function Dt(d){this.options=S({},this.defaults,d||{}),this.id=Pe(),this.manager=null,this.options.enable=H(this.options.enable,!0),this.state=Cr,this.simultaneous={},this.requireFail=[]}Dt.prototype={defaults:{},set:function(d){return S(this.options,d),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(d){if(p(d,"recognizeWith",this))return this;var h=this.simultaneous;return d=Tr(d,this),h[d.id]||(h[d.id]=d,d.recognizeWith(this)),this},dropRecognizeWith:function(d){return p(d,"dropRecognizeWith",this)?this:(d=Tr(d,this),delete this.simultaneous[d.id],this)},requireFailure:function(d){if(p(d,"requireFailure",this))return this;var h=this.requireFail;return d=Tr(d,this),Ee(h,d)===-1&&(h.push(d),d.requireFailure(this)),this},dropRequireFailure:function(d){if(p(d,"dropRequireFailure",this))return this;d=Tr(d,this);var h=Ee(this.requireFail,d);return h>-1&&this.requireFail.splice(h,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(d){return!!this.simultaneous[d.id]},emit:function(d){var h=this,v=this.state;function b(I){h.manager.emit(I,d)}v<Ht&&b(h.options.event+ns(v)),b(h.options.event),d.additionalEvent&&b(d.additionalEvent),v>=Ht&&b(h.options.event+ns(v))},tryEmit:function(d){if(this.canEmit())return this.emit(d);this.state=Et},canEmit:function(){for(var d=0;d<this.requireFail.length;){if(!(this.requireFail[d].state&(Et|Cr)))return!1;d++}return!0},recognize:function(d){var h=S({},d);if(!B(this.options.enable,[this,h])){this.reset(),this.state=Et;return}this.state&(At|Un|Et)&&(this.state=Cr),this.state=this.process(h),this.state&(ft|yn|Ht|Un)&&this.tryEmit(h)},process:function(d){},getTouchAction:function(){},reset:function(){}};function ns(d){return d&Un?"cancel":d&Ht?"end":d&yn?"move":d&ft?"start":""}function rs(d){return d==C?"down":d==_?"up":d==ee?"left":d==m?"right":""}function Tr(d,h){var v=h.manager;return v?v.get(d):d}function pt(){Dt.apply(this,arguments)}k(pt,Dt,{defaults:{pointers:1},attrTest:function(d){var h=this.options.pointers;return h===0||d.pointers.length===h},process:function(d){var h=this.state,v=d.eventType,b=h&(ft|yn),I=this.attrTest(d);return b&&(v&Z||!I)?h|Un:b||I?v&F?h|Ht:h&ft?h|yn:ft:Et}});function Sr(){pt.apply(this,arguments),this.pX=null,this.pY=null}k(Sr,pt,{defaults:{event:"pan",threshold:10,pointers:1,direction:w},getTouchAction:function(){var d=this.options.direction,h=[];return d&R&&h.push($n),d&P&&h.push(Fn),h},directionTest:function(d){var h=this.options,v=!0,b=d.distance,I=d.direction,G=d.deltaX,pe=d.deltaY;return I&h.direction||(h.direction&R?(I=G===0?q:G<0?ee:m,v=G!=this.pX,b=Math.abs(d.deltaX)):(I=pe===0?q:pe<0?_:C,v=pe!=this.pY,b=Math.abs(d.deltaY))),d.direction=I,v&&b>h.threshold&&I&h.direction},attrTest:function(d){return pt.prototype.attrTest.call(this,d)&&(this.state&ft||!(this.state&ft)&&this.directionTest(d))},emit:function(d){this.pX=d.deltaX,this.pY=d.deltaY;var h=rs(d.direction);h&&(d.additionalEvent=this.options.event+h),this._super.emit.call(this,d)}});function _i(){pt.apply(this,arguments)}k(_i,pt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[on]},attrTest:function(d){return this._super.attrTest.call(this,d)&&(Math.abs(d.scale-1)>this.options.threshold||this.state&ft)},emit:function(d){if(d.scale!==1){var h=d.scale<1?"in":"out";d.additionalEvent=this.options.event+h}this._super.emit.call(this,d)}});function bi(){Dt.apply(this,arguments),this._timer=null,this._input=null}k(bi,Dt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ts]},process:function(d){var h=this.options,v=d.pointers.length===h.pointers,b=d.distance<h.threshold,I=d.deltaTime>h.time;if(this._input=d,!b||!v||d.eventType&(F|Z)&&!I)this.reset();else if(d.eventType&x)this.reset(),this._timer=f(function(){this.state=At,this.tryEmit()},h.time,this);else if(d.eventType&F)return At;return Et},reset:function(){clearTimeout(this._timer)},emit:function(d){this.state===At&&(d&&d.eventType&F?this.manager.emit(this.options.event+"up",d):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Ci(){pt.apply(this,arguments)}k(Ci,pt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[on]},attrTest:function(d){return this._super.attrTest.call(this,d)&&(Math.abs(d.rotation)>this.options.threshold||this.state&ft)}});function Ti(){pt.apply(this,arguments)}k(Ti,pt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:R|P,pointers:1},getTouchAction:function(){return Sr.prototype.getTouchAction.call(this)},attrTest:function(d){var h=this.options.direction,v;return h&(R|P)?v=d.overallVelocity:h&R?v=d.overallVelocityX:h&P&&(v=d.overallVelocityY),this._super.attrTest.call(this,d)&&h&d.offsetDirection&&d.distance>this.options.threshold&&d.maxPointers==this.options.pointers&&c(v)>this.options.velocity&&d.eventType&F},emit:function(d){var h=rs(d.offsetDirection);h&&this.manager.emit(this.options.event+h,d),this.manager.emit(this.options.event,d)}});function Er(){Dt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}k(Er,Dt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[vi]},process:function(d){var h=this.options,v=d.pointers.length===h.pointers,b=d.distance<h.threshold,I=d.deltaTime<h.time;if(this.reset(),d.eventType&x&&this.count===0)return this.failTimeout();if(b&&I&&v){if(d.eventType!=F)return this.failTimeout();var G=this.pTime?d.timeStamp-this.pTime<h.interval:!0,pe=!this.pCenter||qe(this.pCenter,d.center)<h.posThreshold;this.pTime=d.timeStamp,this.pCenter=d.center,!pe||!G?this.count=1:this.count+=1,this._input=d;var Fe=this.count%h.taps;if(Fe===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=At,this.tryEmit()},h.interval,this),ft):At}return Et},failTimeout:function(){return this._timer=f(function(){this.state=Et},this.options.interval,this),Et},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==At&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Nt(d,h){return h=h||{},h.recognizers=H(h.recognizers,Nt.defaults.preset),new Si(d,h)}Nt.VERSION="2.0.7",Nt.defaults={domEvents:!1,touchAction:es,enable:!0,inputTarget:null,inputClass:null,preset:[[Ci,{enable:!1}],[_i,{enable:!1},["rotate"]],[Ti,{direction:R}],[Sr,{direction:R},["swipe"]],[Er],[Er,{event:"doubletap",taps:2},["tap"]],[bi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Wl=1,is=2;function Si(d,h){this.options=S({},Nt.defaults,h||{}),this.options.inputTarget=this.options.inputTarget||d,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=d,this.input=O(this),this.touchAction=new yi(this,this.options.touchAction),os(this,!0),g(this.options.recognizers,function(v){var b=this.add(new v[0](v[1]));v[2]&&b.recognizeWith(v[2]),v[3]&&b.requireFailure(v[3])},this)}Si.prototype={set:function(d){return S(this.options,d),d.touchAction&&this.touchAction.update(),d.inputTarget&&(this.input.destroy(),this.input.target=d.inputTarget,this.input.init()),this},stop:function(d){this.session.stopped=d?is:Wl},recognize:function(d){var h=this.session;if(!h.stopped){this.touchAction.preventDefaults(d);var v,b=this.recognizers,I=h.curRecognizer;(!I||I&&I.state&At)&&(I=h.curRecognizer=null);for(var G=0;G<b.length;)v=b[G],h.stopped!==is&&(!I||v==I||v.canRecognizeWith(I))?v.recognize(d):v.reset(),!I&&v.state&(ft|yn|Ht)&&(I=h.curRecognizer=v),G++}},get:function(d){if(d instanceof Dt)return d;for(var h=this.recognizers,v=0;v<h.length;v++)if(h[v].options.event==d)return h[v];return null},add:function(d){if(p(d,"add",this))return this;var h=this.get(d.options.event);return h&&this.remove(h),this.recognizers.push(d),d.manager=this,this.touchAction.update(),d},remove:function(d){if(p(d,"remove",this))return this;if(d=this.get(d),d){var h=this.recognizers,v=Ee(h,d);v!==-1&&(h.splice(v,1),this.touchAction.update())}return this},on:function(d,h){if(d!==i&&h!==i){var v=this.handlers;return g(J(d),function(b){v[b]=v[b]||[],v[b].push(h)}),this}},off:function(d,h){if(d!==i){var v=this.handlers;return g(J(d),function(b){h?v[b]&&v[b].splice(Ee(v[b],h),1):delete v[b]}),this}},emit:function(d,h){this.options.domEvents&&ql(d,h);var v=this.handlers[d]&&this.handlers[d].slice();if(!(!v||!v.length)){h.type=d,h.preventDefault=function(){h.srcEvent.preventDefault()};for(var b=0;b<v.length;)v[b](h),b++}},destroy:function(){this.element&&os(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function os(d,h){var v=d.element;if(!!v.style){var b;g(d.options.cssProps,function(I,G){b=be(v.style,G),h?(d.oldCssProps[b]=v.style[b],v.style[b]=I):v.style[b]=d.oldCssProps[b]||""}),h||(d.oldCssProps={})}}function ql(d,h){var v=n.createEvent("Event");v.initEvent(d,!0,!0),v.gesture=h,h.target.dispatchEvent(v)}S(Nt,{INPUT_START:x,INPUT_MOVE:$,INPUT_END:F,INPUT_CANCEL:Z,STATE_POSSIBLE:Cr,STATE_BEGAN:ft,STATE_CHANGED:yn,STATE_ENDED:Ht,STATE_RECOGNIZED:At,STATE_CANCELLED:Un,STATE_FAILED:Et,DIRECTION_NONE:q,DIRECTION_LEFT:ee,DIRECTION_RIGHT:m,DIRECTION_UP:_,DIRECTION_DOWN:C,DIRECTION_HORIZONTAL:R,DIRECTION_VERTICAL:P,DIRECTION_ALL:w,Manager:Si,Input:M,TouchAction:yi,TouchInput:_r,MouseInput:rn,PointerEventInput:mi,TouchMouseInput:gi,SingleTouchInput:Ko,Recognizer:Dt,AttrRecognizer:pt,Tap:Er,Pan:Sr,Swipe:Ti,Pinch:_i,Rotate:Ci,Press:bi,on:W,off:Q,each:g,merge:E,extend:A,assign:S,inherit:k,bindFn:Y,prefixed:be});var Jl=typeof t<"u"?t:typeof self<"u"?self:{};Jl.Hammer=Nt,typeof i=="function"&&i.amd?i(function(){return Nt}):e.exports?e.exports=Nt:t[r]=Nt})(window,document,"Hammer")})(Il);const _m=Il.exports,bm={class:"slab"},Cm=He({__name:"PlayerSlab",props:{name:{type:String,required:!0},isGM:Boolean,isArbolBlanco:Boolean,deltaX:{type:Number,required:!0}},emits:["swipeRight","swipeLeft","changeSecretWord","newRound","deltaX"],setup(e,{emit:t}){const n=e,r=128,i=32,o=Math.floor(i*1.5),s=10,u=nr([0,o])(B=>Math.sqrt(B)),f=xh([-r,r]),p=nr([0,s])(B=>1-B*B),g=(B,H)=>B/H;let y=!1;const S=zt({transform:"none",boxShadow:"none",translateX:0}),A=zt({transform:"none"}),E=B=>{const H=Math.abs(B),W=u(H)*Math.sign(B);S.transform=`translateX(${W}px)`,S.boxShadow=`0px 0px ${p(H)}px ${p(H)}px rgba(233,233,233,0.75)`,S.translateX=W},k=(B,H)=>{let W;H?(W=o,S.boxShadow="0px 0px 0px 0px rgba(233,233,233,0.75)"):B?(W=-o,S.boxShadow="0px 0px 0px 0px rgba(233,233,233,0.75)"):W=0,S.translateX=W,S.transform=`translateX(${W}px)`};Ct(()=>({isGM:n.isGM,isArbolBlanco:n.isArbolBlanco}),(B,H)=>{let{isArbolBlanco:W,isGM:Q}=B;k(Q,W)}),Ct(()=>n.deltaX,B=>{E(B)}),Ct(()=>S.translateX,B=>{A.transform=`translateX(${-B}px)`});function Y(B){if(B.el===null)return;new _m(B.el).on("panstart panmove panend",W=>{W.type=="panstart"&&(y=!1),W.type=="panend"&&!y&&(Math.abs(W.deltaX)>r/2&&(W.deltaX>0?(t("swipeRight"),y=!0):W.deltaX<0&&(t("swipeLeft"),y=!0)),k(n.isGM,n.isArbolBlanco)),W.type=="panmove"&&t("deltaX",g(f(W.deltaX),r))})}return k(n.isGM,n.isArbolBlanco),(B,H)=>(oe(),me("div",bm,[ne("div",{class:"modifier behind left"},[ne("img",{src:vm,alt:"ArbolBlanco",width:i,height:i})]),ne("div",{class:"modifier behind right"},[ne("img",{src:ym,alt:"GM",width:i,height:i})]),ne("div",{class:"slab-inner",onVnodeMounted:H[0]||(H[0]=W=>Y(W)),style:Pn(S)},[ne("span",{style:Pn(A)},vt(e.name),5)],4)]))}});const Tm=lt(Cm,[["__scopeId","data-v-dab93f22"]]),Sm=e=>(si("data-v-699a3552"),e=e(),ai(),e),Em={id:"roomHeader"},Rm={id:"players"},Pm={id:"secret-word"},km=Sm(()=>ne("h3",null,"Secret word",-1)),xm={class:"buttons"},Om=He({__name:"GMRoom",props:{secretWord:String},emits:["swipeRight","swipeLeft","changeSecretWord","newRound"],setup(e,{emit:t}){const n=tn(),r=zt([]);n.$subscribe((s,l)=>{n.room.players.values.length>r.length&&r.push(0)});const i=(s,l,a)=>{if(!pr(n.room,a)&&!er(n.room)){for(let c=0;c<r.length;c++)s<0&&n.currentGm&&n.currentGm.name===n.players[c].name&&(r[c]=-1-s,console.log("hallo")),s>0&&n.currentArbolBlanco&&n.currentArbolBlanco.name===n.players[c].name&&(r[c]=1-s);r[l]=s}},o=()=>{const s=`${window.location.href}roomInvite/${n.room.name}`;navigator.share?navigator.share({title:"Arbol blanco invitation",text:`You have been invited to room ${n.room.name}`,url:s}).then(()=>console.log("Successful share")).catch(l=>console.log("Error sharing",l)):navigator.clipboard.writeText(s)};return(s,l)=>(oe(),me(Le,null,[ne("div",Em,[ne("h3",null,vt(ae(n).room.name),1),ne("img",{onClick:o,src:gm})]),ne("div",Rm,[(oe(!0),me(Le,null,qr(ae(n).room.players,(a,c)=>(oe(),at(Tm,{onSwipeLeft:u=>s.$emit("swipeLeft",a),onSwipeRight:u=>s.$emit("swipeRight",a),onDeltaX:u=>i(u,c,a),name:a.name,"is-g-m":ae(pr)(ae(n).room,a),"is-arbol-blanco":ae(zc)(ae(n).room,a),"delta-x":r[c]},null,8,["onSwipeLeft","onSwipeRight","onDeltaX","name","is-g-m","is-arbol-blanco","delta-x"]))),256))]),ne("div",Pm,[km,Ie(Vo,{value:e.secretWord,onInput:l[0]||(l[0]=a=>s.$emit("update:secretWord",a.target.value)),disabled:ae(er)(ae(n).room)},null,8,["value","disabled"]),ne("div",xm,[ae(er)(ae(n).room)?(oe(),at(mr,{key:0,onClick:l[1]||(l[1]=a=>s.$emit("newRound")),label:"new round",img:"end"})):(oe(),at(mr,{key:1,onClick:l[2]||(l[2]=a=>s.$emit("changeSecretWord",e.secretWord)),label:"change secret word",img:"enigma"}))])])],64))}});const Im=lt(Om,[["__scopeId","data-v-699a3552"]]),Mm={id:"waiting-wrapper"},Am={key:0,id:"waiting"},Dm={key:1},Nm={key:2},wm=He({__name:"PlayerWaiting",setup(e){const t=tn(),n=en();function r(){return vn(t.room)}function i(){const s=r();if(!!s)return s.secretWord}function o(){return zc(t.room,n.player)}return(s,l)=>(oe(),me("div",Mm,[i()?o()?(oe(),me("div",Dm,"Arbol Blanco")):(oe(),me("div",Nm,vt(i()),1)):(oe(),me("div",Am,[Ie(Ho,{text:"waiting..."})]))]))}});const Lm=lt(wm,[["__scopeId","data-v-a000627f"]]),jm=He({__name:"ArbolBlancoView",setup(e){const t=en(),n=tn();jn();let r=Ae("");function i(){return t.player&&n.room&&pr(n.room,t.player)}function o(c){er(n.room)||n.changeArbolBlanco(c)}function s(c){er(n.room)||n.changeGM(c)}function l(c){n.currentArbolBlanco&&n.changeSecretWord(c)}function a(){n.newRound(),r.value=""}return(c,u)=>(oe(),me(Le,null,[ae(t).player?ot("",!0):(oe(),at(Ol,{key:0})),ae(t).player&&!ae(n).room?(oe(),at(mm,{key:1})):ot("",!0),i()?(oe(),at(Im,{key:2,onSwipeLeft:s,onSwipeRight:o,onChangeSecretWord:l,onNewRound:a,"secret-word":ae(r),"onUpdate:secret-word":u[0]||(u[0]=f=>De(r)?r.value=f:r=f)},null,8,["secret-word"])):ot("",!0),!i()&&ae(t).player&&ae(n).room?(oe(),at(Lm,{key:3})):ot("",!0)],64))}}),Bm={key:0,id:"waiting-wrapper"},Fm={id:"waiting"},$m=He({__name:"RoomInviteView",setup(e){const t=en(),n=tn(),r=jn(),i=Ad(),o=Md(),s=i.params.roomName,l=Ae(!1),a=Ae(!1);if(Ae(!1),n.roomName=s,t.player){const c=ka();Ui(()=>{l.value=c.loading.value,a.value=c.roomExists.value,!l.value&&r.client&&o.push({path:"/"})})}return Ct(()=>t.player,()=>{const c=ka();console.log(n.roomName),Ui(()=>{l.value=c.loading.value,a.value=c.roomExists.value,!l.value&&r.client&&o.push({path:"/"})})}),(c,u)=>(oe(),me(Le,null,[l.value?(oe(),me("div",Bm,[ne("div",Fm,[Ie(Ho,{text:"loading...."})])])):ot("",!0),!ae(t).player&&!l.value?(oe(),at(Ol,{key:1})):ot("",!0)],64))}});const Um=lt($m,[["__scopeId","data-v-d3a02c23"]]),zm=Od({history:Wp("/arbol-blanco/"),routes:[{path:"/",name:"arbol-blanco",component:jm},{path:"/room",name:"room",component:Kh},{path:"/roomInvite/:roomName",name:"roomInvite",component:Um}]});const Wo=mp(jh),Ml=yp();Ml.use(xp);Wo.use(Ml);Wo.use(zm);Wo.mount("#app");
